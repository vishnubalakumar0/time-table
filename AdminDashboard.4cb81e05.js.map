{"mappings":"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","sources":["<anon>","src/components/AdminDashboard.jsx","src/components/Toast.jsx","src/components/HoursTracker.jsx","src/components/timetableGrid.jsx","src/components/StaffTimetableGrid.jsx","src/utils/timetableGenerator.jsx"],"sourcesContent":["\nfunction $parcel$defineInteropFlag(a) {\n  Object.defineProperty(a, '__esModule', {value: true, configurable: true});\n}\n\nfunction $parcel$export(e, n, v, s) {\n  Object.defineProperty(e, n, {get: v, set: s, enumerable: true, configurable: true});\n}\n\nfunction $parcel$interopDefault(a) {\n  return a && a.__esModule ? a.default : a;\n}\n\n      var $parcel$global = globalThis;\n    var parcelRequire = $parcel$global[\"parcelRequireb79f\"];\nvar parcelRegister = parcelRequire.register;\nparcelRegister(\"dXtBz\", function(module, exports) {\n\n$parcel$defineInteropFlag(module.exports);\n\n$parcel$export(module.exports, \"default\", () => $9b678cdbbac6dec2$export$2e2bcd8739ae039);\n\nvar $ayMG0 = parcelRequire(\"ayMG0\");\n\nvar $acw62 = parcelRequire(\"acw62\");\n\nvar $aOD4d = parcelRequire(\"aOD4d\");\n\nvar $2A5UH = parcelRequire(\"2A5UH\");\n\nvar $4XiCD = parcelRequire(\"4XiCD\");\n\nvar $e3nvF = parcelRequire(\"e3nvF\");\n\nvar $hyYFF = parcelRequire(\"hyYFF\");\n\nvar $gqAsg = parcelRequire(\"gqAsg\");\n\nvar $bU9CP = parcelRequire(\"bU9CP\");\n\nvar $fAZ67 = parcelRequire(\"fAZ67\");\n\nvar $6AR8M = parcelRequire(\"6AR8M\");\n\nvar $ilpIi = parcelRequire(\"ilpIi\");\nfunction $9b678cdbbac6dec2$export$2e2bcd8739ae039({ user: user, onLogout: onLogout }) {\n    const [classes, setClasses] = (0, $acw62.useState)([]);\n    const [staff, setStaff] = (0, $acw62.useState)([]);\n    const [subjects, setSubjects] = (0, $acw62.useState)([]);\n    const [timetable, setTimetable] = (0, $acw62.useState)(null);\n    const [toasts, setToasts] = (0, $acw62.useState)([]);\n    const [loading, setLoading] = (0, $acw62.useState)(true);\n    const [showAddStaffForm, setShowAddStaffForm] = (0, $acw62.useState)(false);\n    const [showAddSubjectForm, setShowAddSubjectForm] = (0, $acw62.useState)(false);\n    const [showAddClassForm, setShowAddClassForm] = (0, $acw62.useState)(false);\n    const [activeTab, setActiveTab] = (0, $acw62.useState)('classes');\n    (0, $acw62.useEffect)(()=>{\n        window.scrollTo({\n            top: 0,\n            left: 0,\n            behavior: 'auto'\n        });\n    }, []);\n    const staffFormRef = (0, $acw62.useRef)(null);\n    const subjectFormRef = (0, $acw62.useRef)(null);\n    const [newClass, setNewClass] = (0, $acw62.useState)({\n        name: '',\n        hallNumber: ''\n    });\n    const [newStaff, setNewStaff] = (0, $acw62.useState)({\n        id: null,\n        name: '',\n        username: '',\n        password: '',\n        freePeriodMode: 'auto',\n        manualFreePeriods: 0\n    });\n    const [newSubject, setNewSubject] = (0, $acw62.useState)({\n        id: null,\n        className: '',\n        name: '',\n        subjectType: 'Core',\n        hoursPerWeek: 6,\n        isContinuous: false,\n        blockSize: 2,\n        teacher: ''\n    });\n    const teachers = staff.filter((s)=>s.role === \"staff\");\n    const showToast = (message, type, duration = 3000, undoAction = null)=>{\n        const newToast = {\n            message: message,\n            type: type,\n            id: Date.now(),\n            undoAction: undoAction\n        };\n        setToasts((prev)=>[\n                ...prev,\n                newToast\n            ]);\n        setTimeout(()=>removeToast(newToast.id), duration);\n    };\n    const removeToast = (id)=>{\n        setToasts((prev)=>prev.filter((t)=>t.id !== id));\n    };\n    const convertFlatToNested = (flatTimetable)=>{\n        if (!flatTimetable) return null;\n        const nested = {};\n        Object.keys(flatTimetable).forEach((key)=>{\n            const slots = flatTimetable[key];\n            if (Array.isArray(slots) && slots.length > 0 && Array.isArray(slots[0])) nested[key] = slots;\n            else if (Array.isArray(slots)) {\n                const days = [\n                    [],\n                    [],\n                    [],\n                    [],\n                    []\n                ];\n                slots.forEach((slot)=>{\n                    if (slot && typeof slot.day === 'number' && typeof slot.period === 'number') {\n                        if (!days[slot.day]) days[slot.day] = [];\n                        days[slot.day][slot.period] = {\n                            subject: slot.subject,\n                            teacher: slot.teacher,\n                            class: slot.class,\n                            type: slot.type\n                        };\n                    }\n                });\n                days.forEach((day, idx)=>{\n                    if (!days[idx]) days[idx] = [];\n                    for(let p = 0; p < 6; p++)if (!days[idx][p]) days[idx][p] = slots[0]?.class !== undefined ? {\n                        subject: 'FREE',\n                        class: '-',\n                        type: 'free'\n                    } : null;\n                });\n                nested[key] = days;\n            }\n        });\n        return nested;\n    };\n    const fetchData = async ()=>{\n        setLoading(true);\n        try {\n            const [cls, st, sb, tt] = await Promise.all([\n                (0, $ilpIi.getDocs)((0, $ilpIi.collection)((0, $fAZ67.db), 'classes')),\n                (0, $ilpIi.getDocs)((0, $ilpIi.collection)((0, $fAZ67.db), 'staff')),\n                (0, $ilpIi.getDocs)((0, $ilpIi.collection)((0, $fAZ67.db), 'subjects')),\n                (0, $ilpIi.getDocs)((0, $ilpIi.collection)((0, $fAZ67.db), 'timetable'))\n            ]);\n            setClasses(cls.docs.map((doc)=>({\n                    id: doc.id,\n                    ...doc.data()\n                })));\n            setStaff(st.docs.map((doc)=>({\n                    id: doc.id,\n                    ...doc.data()\n                })));\n            setSubjects(sb.docs.map((doc)=>({\n                    id: doc.id,\n                    ...doc.data()\n                })));\n            if (!tt.empty) {\n                const ttData = tt.docs[0].data();\n                const convertedData = {\n                    classTimetables: convertFlatToNested(ttData.classTimetables),\n                    staffTimetables: convertFlatToNested(ttData.staffTimetables)\n                };\n                setTimetable(convertedData);\n            }\n        } catch (error) {\n            showToast(\"\\u274C Error loading data: \" + error.message, 'error');\n            console.error(error);\n        }\n        setLoading(false);\n    };\n    (0, $acw62.useEffect)(()=>{\n        fetchData();\n    }, []);\n    const restoreFromUndo = async (undoItem)=>{\n        try {\n            if (undoItem.type === 'class') {\n                const { id: id, ...classData } = undoItem.data;\n                await (0, $ilpIi.setDoc)((0, $ilpIi.doc)((0, $fAZ67.db), 'classes', id), classData);\n            } else if (undoItem.type === 'staff') {\n                const { id: id, ...staffData } = undoItem.data;\n                await (0, $ilpIi.setDoc)((0, $ilpIi.doc)((0, $fAZ67.db), 'staff', id), staffData);\n                if (undoItem.data.firebaseUid) await (0, $ilpIi.setDoc)((0, $ilpIi.doc)((0, $fAZ67.db), 'users', undoItem.data.firebaseUid), {\n                    name: undoItem.data.name,\n                    username: undoItem.data.username,\n                    role: 'staff'\n                });\n            } else if (undoItem.type === 'subject') {\n                const { id: id, ...subjectData } = undoItem.data;\n                await (0, $ilpIi.setDoc)((0, $ilpIi.doc)((0, $fAZ67.db), 'subjects', id), subjectData);\n            } else if (undoItem.type === 'classTimetable') {\n                // Restore class timetable\n                const updatedClassTimetables = {\n                    ...timetable.classTimetables,\n                    [undoItem.className]: undoItem.data\n                };\n                const ttRef = (0, $ilpIi.collection)((0, $fAZ67.db), 'timetable');\n                const existing = await (0, $ilpIi.getDocs)(ttRef);\n                if (!existing.empty) await (0, $ilpIi.updateDoc)((0, $ilpIi.doc)((0, $fAZ67.db), 'timetable', existing.docs[0].id), {\n                    classTimetables: updatedClassTimetables\n                });\n                setTimetable({\n                    ...timetable,\n                    classTimetables: updatedClassTimetables\n                });\n            }\n            await fetchData();\n            showToast(\"\\u2705 Data restored!\", 'success');\n        } catch (error) {\n            console.error('Restore error:', error);\n            showToast(\"\\u274C Restore failed: \" + error.message, 'error');\n        }\n    };\n    const addClass = async ()=>{\n        if (!newClass.name) return showToast(\"Enter class name\", \"error\");\n        if (classes.find((c)=>c.name === newClass.name && !newClass.id)) return showToast(\"Class already exists\", \"error\");\n        try {\n            if (newClass.id) {\n                await (0, $ilpIi.updateDoc)((0, $ilpIi.doc)((0, $fAZ67.db), 'classes', newClass.id), {\n                    name: newClass.name,\n                    hallNumber: newClass.hallNumber\n                });\n                setClasses(classes.map((c)=>c.id === newClass.id ? {\n                        id: newClass.id,\n                        ...newClass\n                    } : c));\n                showToast(\"\\u2705 Class updated!\", \"success\");\n            } else {\n                const docRef = await (0, $ilpIi.addDoc)((0, $ilpIi.collection)((0, $fAZ67.db), 'classes'), {\n                    name: newClass.name,\n                    hallNumber: newClass.hallNumber || ''\n                });\n                setClasses([\n                    ...classes,\n                    {\n                        id: docRef.id,\n                        name: newClass.name,\n                        hallNumber: newClass.hallNumber || ''\n                    }\n                ]);\n                showToast(\"\\u2705 Class added!\", \"success\");\n            }\n            setNewClass({\n                name: '',\n                hallNumber: ''\n            });\n            setShowAddClassForm(false);\n        } catch (error) {\n            showToast(\"\\u274C Operation failed\", \"error\");\n        }\n    };\n    const editClass = (cls)=>{\n        setNewClass({\n            id: cls.id,\n            name: cls.name,\n            hallNumber: cls.hallNumber || ''\n        });\n        setShowAddClassForm(true);\n        window.scrollTo({\n            top: 0,\n            behavior: 'smooth'\n        });\n    };\n    const deleteClass = async (id)=>{\n        if (!window.confirm(\"Delete this class?\")) return;\n        try {\n            const classToDelete = classes.find((c)=>c.id === id);\n            if (!classToDelete) return;\n            const undoItem = {\n                type: 'class',\n                data: {\n                    ...classToDelete\n                }\n            };\n            await (0, $ilpIi.deleteDoc)((0, $ilpIi.doc)((0, $fAZ67.db), 'classes', id));\n            setClasses(classes.filter((c)=>c.id !== id));\n            showToast(\"\\u2705 Class deleted\", 'success', 5000, ()=>restoreFromUndo(undoItem));\n        } catch (error) {\n            console.error('Delete error:', error);\n            showToast(\"\\u274C Failed to delete\", \"error\");\n        }\n    };\n    const addOrUpdateStaff = async ()=>{\n        if (!newStaff.name || !newStaff.username) return showToast(\"Fill all required fields\", \"error\");\n        try {\n            if (newStaff.id) {\n                const staffToUpdate = staff.find((s)=>s.id === newStaff.id);\n                const { password: password, ...updateData } = newStaff;\n                const firestoreUpdateData = {\n                    name: updateData.name,\n                    freePeriodMode: updateData.freePeriodMode,\n                    manualFreePeriods: updateData.manualFreePeriods\n                };\n                if (staffToUpdate.username !== updateData.username) firestoreUpdateData.username = updateData.username;\n                await (0, $ilpIi.updateDoc)((0, $ilpIi.doc)((0, $fAZ67.db), 'staff', newStaff.id), firestoreUpdateData);\n                if (staffToUpdate.firebaseUid) await (0, $ilpIi.updateDoc)((0, $ilpIi.doc)((0, $fAZ67.db), 'users', staffToUpdate.firebaseUid), {\n                    name: newStaff.name,\n                    username: newStaff.username,\n                    role: 'staff'\n                });\n                if (password && password.trim()) {\n                    await (0, $ilpIi.updateDoc)((0, $ilpIi.doc)((0, $fAZ67.db), 'staff', newStaff.id), {\n                        tempPassword: password,\n                        passwordLastChanged: new Date().toISOString(),\n                        needsPasswordChange: true\n                    });\n                    showToast(\"\\u2705 Temporary password set. Share it with staff.\", \"success\");\n                } else showToast(\"\\u2705 Staff updated!\", \"success\");\n                setStaff(staff.map((s)=>s.id === newStaff.id ? {\n                        ...s,\n                        ...firestoreUpdateData\n                    } : s));\n                resetStaffForm();\n                setShowAddStaffForm(false);\n                return;\n            }\n            if (!newStaff.password) return showToast(\"Password required\", \"error\");\n            const email = `${newStaff.username}@timetable.com`;\n            const userCredential = await (0, $6AR8M.createUserWithEmailAndPassword)((0, $fAZ67.auth), email, newStaff.password);\n            const uid = userCredential.user.uid;\n            const staffData = {\n                name: newStaff.name,\n                username: newStaff.username,\n                freePeriodMode: newStaff.freePeriodMode,\n                manualFreePeriods: newStaff.manualFreePeriods,\n                role: \"staff\",\n                firebaseUid: uid\n            };\n            const docRef = await (0, $ilpIi.addDoc)((0, $ilpIi.collection)((0, $fAZ67.db), 'staff'), staffData);\n            await (0, $ilpIi.setDoc)((0, $ilpIi.doc)((0, $fAZ67.db), 'users', uid), {\n                name: newStaff.name,\n                username: newStaff.username,\n                role: 'staff'\n            });\n            setStaff([\n                ...staff,\n                {\n                    id: docRef.id,\n                    ...staffData\n                }\n            ]);\n            resetStaffForm();\n            setShowAddStaffForm(false);\n            showToast(\"\\u2705 Staff added!\", \"success\");\n        } catch (error) {\n            showToast(\"\\u274C Operation failed: \" + error.message, \"error\");\n            console.error(error);\n        }\n    };\n    const editStaff = (staffMember)=>{\n        setNewStaff({\n            ...staffMember,\n            password: ''\n        });\n        setShowAddStaffForm(true);\n        setTimeout(()=>{\n            staffFormRef.current?.scrollIntoView({\n                behavior: 'smooth',\n                block: 'center'\n            });\n        }, 100);\n    };\n    const resetStaffForm = ()=>{\n        setNewStaff({\n            id: null,\n            name: '',\n            username: '',\n            password: '',\n            freePeriodMode: 'auto',\n            manualFreePeriods: 0\n        });\n    };\n    const deleteStaff = async (id)=>{\n        if (!window.confirm(\"Delete this staff member?\")) return;\n        try {\n            const staffToDelete = staff.find((s)=>s.id === id);\n            if (!staffToDelete) return;\n            const undoItem = {\n                type: 'staff',\n                data: {\n                    ...staffToDelete\n                }\n            };\n            await (0, $ilpIi.deleteDoc)((0, $ilpIi.doc)((0, $fAZ67.db), 'staff', id));\n            if (staffToDelete.firebaseUid) await (0, $ilpIi.deleteDoc)((0, $ilpIi.doc)((0, $fAZ67.db), 'users', staffToDelete.firebaseUid));\n            setStaff(staff.filter((x)=>x.id !== id));\n            showToast(\"\\u2705 Staff deleted\", 'success', 5000, ()=>restoreFromUndo(undoItem));\n        } catch (error) {\n            console.error('Delete staff error:', error);\n            showToast(\"\\u274C Failed to delete\", 'error');\n        }\n    };\n    const addOrUpdateSubject = async ()=>{\n        if (!newSubject.className || !newSubject.name || !newSubject.teacher) return showToast(\"Fill all required fields\", \"error\");\n        try {\n            const subjectData = {\n                className: newSubject.className,\n                name: newSubject.name,\n                subjectType: newSubject.subjectType,\n                hoursPerWeek: newSubject.hoursPerWeek,\n                isContinuous: newSubject.isContinuous,\n                blockSize: newSubject.blockSize,\n                teacher: newSubject.teacher\n            };\n            if (newSubject.id) {\n                await (0, $ilpIi.updateDoc)((0, $ilpIi.doc)((0, $fAZ67.db), 'subjects', newSubject.id), subjectData);\n                setSubjects(subjects.map((s)=>s.id === newSubject.id ? {\n                        id: newSubject.id,\n                        ...subjectData\n                    } : s));\n                showToast(\"\\u2705 Subject updated!\", \"success\");\n            } else {\n                const docRef = await (0, $ilpIi.addDoc)((0, $ilpIi.collection)((0, $fAZ67.db), 'subjects'), subjectData);\n                setSubjects([\n                    ...subjects,\n                    {\n                        id: docRef.id,\n                        ...subjectData\n                    }\n                ]);\n                showToast(\"\\u2705 Subject added!\", \"success\");\n            }\n            resetSubjectForm();\n            setShowAddSubjectForm(false);\n        } catch (error) {\n            showToast(\"\\u274C Operation failed\", \"error\");\n            console.error(error);\n        }\n    };\n    const editSubject = (subject)=>{\n        setNewSubject({\n            id: subject.id,\n            className: subject.className,\n            name: subject.name,\n            subjectType: subject.subjectType,\n            hoursPerWeek: subject.hoursPerWeek,\n            isContinuous: subject.isContinuous || false,\n            blockSize: subject.blockSize || 2,\n            teacher: subject.teacher\n        });\n        setShowAddSubjectForm(true);\n        setTimeout(()=>{\n            subjectFormRef.current?.scrollIntoView({\n                behavior: 'smooth',\n                block: 'center'\n            });\n        }, 100);\n    };\n    const resetSubjectForm = ()=>{\n        setNewSubject({\n            id: null,\n            className: '',\n            name: '',\n            subjectType: 'Core',\n            hoursPerWeek: 6,\n            isContinuous: false,\n            blockSize: 2,\n            teacher: ''\n        });\n    };\n    const deleteSubject = async (id)=>{\n        if (!window.confirm(\"Delete this subject?\")) return;\n        try {\n            const subjectToDelete = subjects.find((s)=>s.id === id);\n            if (!subjectToDelete) return;\n            const undoItem = {\n                type: 'subject',\n                data: {\n                    ...subjectToDelete\n                }\n            };\n            await (0, $ilpIi.deleteDoc)((0, $ilpIi.doc)((0, $fAZ67.db), 'subjects', id));\n            setSubjects(subjects.filter((s)=>s.id !== id));\n            showToast(\"\\u2705 Subject deleted\", 'success', 5000, ()=>restoreFromUndo(undoItem));\n        } catch (error) {\n            console.error('Delete subject error:', error);\n            showToast(\"\\u274C Failed to delete\", 'error');\n        }\n    };\n    // Delete Class Timetable (like class/staff/subject delete)\n    const deleteClassTimetable = async (className)=>{\n        if (!window.confirm(`Delete timetable for ${className}?\\nThis will only delete the class timetable, not staff timetables.`)) return;\n        try {\n            if (!timetable || !timetable.classTimetables || !timetable.classTimetables[className]) return showToast('Timetable not found', 'error');\n            // Save for undo\n            const deletedTimetableData = timetable.classTimetables[className];\n            const undoItem = {\n                type: 'classTimetable',\n                className: className,\n                data: deletedTimetableData\n            };\n            // Remove from timetable\n            const updatedClassTimetables = {\n                ...timetable.classTimetables\n            };\n            delete updatedClassTimetables[className];\n            // Update Firebase\n            const ttRef = (0, $ilpIi.collection)((0, $fAZ67.db), 'timetable');\n            const existing = await (0, $ilpIi.getDocs)(ttRef);\n            if (!existing.empty) await (0, $ilpIi.updateDoc)((0, $ilpIi.doc)((0, $fAZ67.db), 'timetable', existing.docs[0].id), {\n                classTimetables: updatedClassTimetables\n            });\n            // Update state\n            setTimetable({\n                ...timetable,\n                classTimetables: updatedClassTimetables\n            });\n            showToast(`Timetable for ${className} deleted`, 'success', 5000, ()=>restoreFromUndo(undoItem));\n        } catch (error) {\n            console.error('Delete timetable error:', error);\n            showToast('Failed to delete timetable', 'error');\n        }\n    };\n    const generateTimetable = async ()=>{\n        setLoading(true);\n        try {\n            const generator = new (0, $bU9CP.TimetableGenerator)(classes, staff.filter((s)=>s.role === 'staff'), subjects);\n            const validation = generator.validate();\n            if (!validation.valid) {\n                showToast(\"\\u274C Validation: \" + validation.errors[0], 'error');\n                setLoading(false);\n                return;\n            }\n            const result = generator.generate();\n            if (result.success) {\n                const serializableClassTimetables = {};\n                const serializableStaffTimetables = {};\n                Object.keys(result.classTimetables).forEach((className)=>{\n                    serializableClassTimetables[className] = result.classTimetables[className].map((day, dayIndex)=>{\n                        return day.map((period, periodIndex)=>({\n                                day: dayIndex,\n                                period: periodIndex,\n                                subject: period?.subject || null,\n                                teacher: period?.teacher || null,\n                                type: period?.type || null\n                            }));\n                    }).flat();\n                });\n                Object.keys(result.staffTimetables).forEach((staffName)=>{\n                    serializableStaffTimetables[staffName] = result.staffTimetables[staffName].map((day, dayIndex)=>{\n                        return day.map((period, periodIndex)=>({\n                                day: dayIndex,\n                                period: periodIndex,\n                                subject: period?.subject || null,\n                                class: period?.class || null,\n                                type: period?.type || null\n                            }));\n                    }).flat();\n                });\n                const timetableData = {\n                    classTimetables: serializableClassTimetables,\n                    staffTimetables: serializableStaffTimetables,\n                    generatedAt: new Date().toISOString()\n                };\n                const ttRef = (0, $ilpIi.collection)((0, $fAZ67.db), 'timetable');\n                const existing = await (0, $ilpIi.getDocs)(ttRef);\n                if (!existing.empty) await (0, $ilpIi.updateDoc)((0, $ilpIi.doc)((0, $fAZ67.db), 'timetable', existing.docs[0].id), timetableData);\n                else await (0, $ilpIi.addDoc)(ttRef, timetableData);\n                const teacherList = staff.filter((s)=>s.role === 'staff');\n                for (const teacher of teacherList){\n                    const staffTT = serializableStaffTimetables[teacher.name];\n                    if (staffTT) await (0, $ilpIi.setDoc)((0, $ilpIi.doc)((0, $fAZ67.db), 'staffTimetables', teacher.id), {\n                        staffName: teacher.name,\n                        timetable: staffTT,\n                        generatedAt: new Date().toISOString()\n                    });\n                }\n                const displayClassTimetables = {};\n                Object.keys(serializableClassTimetables).forEach((className)=>{\n                    const days = [\n                        [],\n                        [],\n                        [],\n                        [],\n                        []\n                    ];\n                    serializableClassTimetables[className].forEach((slot)=>{\n                        if (!days[slot.day]) days[slot.day] = [];\n                        days[slot.day][slot.period] = {\n                            subject: slot.subject,\n                            teacher: slot.teacher,\n                            type: slot.type\n                        };\n                    });\n                    days.forEach((day, idx)=>{\n                        if (!days[idx]) days[idx] = [];\n                        for(let p = 0; p < 6; p++)if (!days[idx][p]) days[idx][p] = null;\n                    });\n                    displayClassTimetables[className] = days;\n                });\n                const displayStaffTimetables = {};\n                Object.keys(serializableStaffTimetables).forEach((staffName)=>{\n                    const days = [\n                        [],\n                        [],\n                        [],\n                        [],\n                        []\n                    ];\n                    serializableStaffTimetables[staffName].forEach((slot)=>{\n                        if (!days[slot.day]) days[slot.day] = [];\n                        days[slot.day][slot.period] = {\n                            subject: slot.subject,\n                            class: slot.class,\n                            type: slot.type\n                        };\n                    });\n                    days.forEach((day, idx)=>{\n                        if (!days[idx]) days[idx] = [];\n                        for(let p = 0; p < 6; p++)if (!days[idx][p]) days[idx][p] = {\n                            subject: 'FREE',\n                            class: '-',\n                            type: 'free'\n                        };\n                    });\n                    displayStaffTimetables[staffName] = days;\n                });\n                setTimetable({\n                    classTimetables: displayClassTimetables,\n                    staffTimetables: displayStaffTimetables\n                });\n                setActiveTab('results');\n                showToast(\"\\u2705 Timetable generated & saved!\", 'success');\n                setTimeout(()=>{\n                    document.getElementById('view-timetables')?.scrollIntoView({\n                        behavior: 'smooth'\n                    });\n                }, 300);\n            } else showToast(\"\\u274C Failed: \" + result.error, 'error');\n        } catch (error) {\n            showToast(\"\\u274C Error: \" + error.message, 'error');\n            console.error(error);\n        }\n        setLoading(false);\n    };\n    if (loading) return /*#__PURE__*/ (0, $ayMG0.jsx)((0, $aOD4d.default), {\n        variant: \"spiral\",\n        colorScheme: \"gradient\",\n        interactive: true,\n        children: /*#__PURE__*/ (0, $ayMG0.jsxs)(\"div\", {\n            style: {\n                display: 'flex',\n                flexDirection: 'column',\n                justifyContent: 'center',\n                alignItems: 'center',\n                height: '100vh',\n                color: 'white',\n                fontSize: '24px',\n                gap: '20px'\n            },\n            children: [\n                /*#__PURE__*/ (0, $ayMG0.jsx)(\"div\", {\n                    className: \"spinner\"\n                }),\n                /*#__PURE__*/ (0, $ayMG0.jsx)(\"div\", {\n                    children: \"Loading...\"\n                })\n            ]\n        })\n    });\n    return /*#__PURE__*/ (0, $ayMG0.jsx)((0, $aOD4d.default), {\n        variant: \"spiral\",\n        colorScheme: \"gradient\",\n        interactive: true,\n        children: /*#__PURE__*/ (0, $ayMG0.jsxs)(\"div\", {\n            className: \"min-h-screen relative z-10 text-white\",\n            children: [\n                /*#__PURE__*/ (0, $ayMG0.jsxs)(\"div\", {\n                    className: \"header-content\",\n                    children: [\n                        /*#__PURE__*/ (0, $ayMG0.jsx)(\"h1\", {\n                            className: \"text-white\",\n                            children: \"Admin Dashboard\"\n                        }),\n                        /*#__PURE__*/ (0, $ayMG0.jsx)(\"div\", {\n                            className: \"header-actions\",\n                            children: /*#__PURE__*/ (0, $ayMG0.jsx)(\"button\", {\n                                className: \"btn btn-danger btn-sm\",\n                                onClick: onLogout,\n                                children: \"Logout\"\n                            })\n                        })\n                    ]\n                }),\n                /*#__PURE__*/ (0, $ayMG0.jsxs)(\"div\", {\n                    className: \"segmented-nav\",\n                    children: [\n                        /*#__PURE__*/ (0, $ayMG0.jsx)(\"button\", {\n                            className: `segmented-item ${activeTab === 'classes' ? 'active' : ''}`,\n                            onClick: ()=>{\n                                setActiveTab('classes');\n                                document.getElementById('classes-section')?.scrollIntoView({\n                                    behavior: 'smooth'\n                                });\n                            },\n                            children: \"Classes\"\n                        }),\n                        /*#__PURE__*/ (0, $ayMG0.jsx)(\"button\", {\n                            className: `segmented-item ${activeTab === 'staff' ? 'active' : ''}`,\n                            onClick: ()=>{\n                                setActiveTab('staff');\n                                document.getElementById('staff-section')?.scrollIntoView({\n                                    behavior: 'smooth'\n                                });\n                            },\n                            children: \"Staff\"\n                        }),\n                        /*#__PURE__*/ (0, $ayMG0.jsx)(\"button\", {\n                            className: `segmented-item ${activeTab === 'subjects' ? 'active' : ''}`,\n                            onClick: ()=>{\n                                setActiveTab('subjects');\n                                document.getElementById('subject-section')?.scrollIntoView({\n                                    behavior: 'smooth'\n                                });\n                            },\n                            children: \"Subjects\"\n                        }),\n                        /*#__PURE__*/ (0, $ayMG0.jsx)(\"button\", {\n                            className: `segmented-item ${activeTab === 'generate' ? 'active' : ''}`,\n                            onClick: ()=>{\n                                setActiveTab('generate');\n                                document.getElementById('generate-section')?.scrollIntoView({\n                                    behavior: 'smooth'\n                                });\n                            },\n                            children: \"Generate\"\n                        }),\n                        /*#__PURE__*/ (0, $ayMG0.jsx)(\"button\", {\n                            className: `segmented-item ${activeTab === 'results' ? 'active' : ''}`,\n                            onClick: ()=>{\n                                setActiveTab('results');\n                                document.getElementById('view-timetables')?.scrollIntoView({\n                                    behavior: 'smooth'\n                                });\n                            },\n                            children: \"Results\"\n                        })\n                    ]\n                }),\n                /*#__PURE__*/ (0, $ayMG0.jsxs)(\"div\", {\n                    className: \"content\",\n                    children: [\n                        /*#__PURE__*/ (0, $ayMG0.jsxs)(\"div\", {\n                            className: \"section\",\n                            id: \"classes-section\",\n                            children: [\n                                /*#__PURE__*/ (0, $ayMG0.jsxs)(\"div\", {\n                                    className: \"section-header\",\n                                    children: [\n                                        /*#__PURE__*/ (0, $ayMG0.jsx)(\"span\", {\n                                            className: \"section-icon\",\n                                            children: \"\\uD83D\\uDCDA\"\n                                        }),\n                                        /*#__PURE__*/ (0, $ayMG0.jsx)(\"h2\", {\n                                            className: \"section-title\",\n                                            children: \"Manage Classes\"\n                                        })\n                                    ]\n                                }),\n                                /*#__PURE__*/ (0, $ayMG0.jsxs)(\"div\", {\n                                    className: \"card\",\n                                    children: [\n                                        /*#__PURE__*/ (0, $ayMG0.jsxs)(\"h3\", {\n                                            children: [\n                                                \"Existing Classes (\",\n                                                classes.length,\n                                                \")\"\n                                            ]\n                                        }),\n                                        classes.length === 0 ? /*#__PURE__*/ (0, $ayMG0.jsx)(\"p\", {\n                                            style: {\n                                                color: '#64748b',\n                                                textAlign: 'center',\n                                                padding: '20px'\n                                            },\n                                            children: \"No classes added yet\"\n                                        }) : /*#__PURE__*/ (0, $ayMG0.jsx)((0, $ayMG0.Fragment), {\n                                            children: (()=>{\n                                                const sorted = [\n                                                    ...classes\n                                                ].sort((a, b)=>a.name.localeCompare(b.name));\n                                                return sorted.map((cls)=>{\n                                                    const classSubjects = subjects.filter((s)=>s.className === cls.name);\n                                                    const totalHours = classSubjects.reduce((sum, s)=>sum + s.hoursPerWeek, 0);\n                                                    const progress = totalHours / 30 * 100;\n                                                    return /*#__PURE__*/ (0, $ayMG0.jsxs)(\"div\", {\n                                                        style: {\n                                                            marginBottom: '30px'\n                                                        },\n                                                        children: [\n                                                            /*#__PURE__*/ (0, $ayMG0.jsxs)(\"div\", {\n                                                                style: {\n                                                                    marginBottom: '8px',\n                                                                    display: 'flex',\n                                                                    alignItems: 'center',\n                                                                    justifyContent: 'space-between',\n                                                                    gap: '10px',\n                                                                    color: '#1e293b',\n                                                                    flexWrap: 'wrap'\n                                                                },\n                                                                children: [\n                                                                    /*#__PURE__*/ (0, $ayMG0.jsxs)(\"h4\", {\n                                                                        style: {\n                                                                            margin: 0,\n                                                                            display: 'flex',\n                                                                            alignItems: 'center',\n                                                                            gap: '8px'\n                                                                        },\n                                                                        children: [\n                                                                            \"Class \",\n                                                                            /*#__PURE__*/ (0, $ayMG0.jsx)(\"strong\", {\n                                                                                children: cls.name\n                                                                            })\n                                                                        ]\n                                                                    }),\n                                                                    /*#__PURE__*/ (0, $ayMG0.jsxs)(\"div\", {\n                                                                        style: {\n                                                                            display: 'flex',\n                                                                            alignItems: 'center',\n                                                                            gap: '16px',\n                                                                            color: '#64748b',\n                                                                            fontWeight: 600\n                                                                        },\n                                                                        children: [\n                                                                            /*#__PURE__*/ (0, $ayMG0.jsxs)(\"span\", {\n                                                                                children: [\n                                                                                    totalHours,\n                                                                                    \"/30 hours\"\n                                                                                ]\n                                                                            }),\n                                                                            /*#__PURE__*/ (0, $ayMG0.jsxs)(\"span\", {\n                                                                                children: [\n                                                                                    Math.max(30 - totalHours, 0),\n                                                                                    \"h remaining\"\n                                                                                ]\n                                                                            })\n                                                                        ]\n                                                                    })\n                                                                ]\n                                                            }),\n                                                            /*#__PURE__*/ (0, $ayMG0.jsx)(\"div\", {\n                                                                style: {\n                                                                    width: '100%',\n                                                                    height: '8px',\n                                                                    backgroundColor: '#e2e8f0',\n                                                                    borderRadius: '4px',\n                                                                    overflow: 'hidden',\n                                                                    marginBottom: '15px'\n                                                                },\n                                                                children: /*#__PURE__*/ (0, $ayMG0.jsx)(\"div\", {\n                                                                    style: {\n                                                                        height: '100%',\n                                                                        width: `${Math.min(progress, 100)}%`,\n                                                                        backgroundColor: totalHours === 30 ? '#10b981' : '#f59e0b',\n                                                                        transition: 'width 0.3s ease'\n                                                                    }\n                                                                })\n                                                            }),\n                                                            /*#__PURE__*/ (0, $ayMG0.jsx)(\"div\", {\n                                                                className: \"desktop-table\",\n                                                                children: /*#__PURE__*/ (0, $ayMG0.jsxs)(\"table\", {\n                                                                    children: [\n                                                                        /*#__PURE__*/ (0, $ayMG0.jsx)(\"thead\", {\n                                                                            children: /*#__PURE__*/ (0, $ayMG0.jsxs)(\"tr\", {\n                                                                                children: [\n                                                                                    /*#__PURE__*/ (0, $ayMG0.jsx)(\"th\", {\n                                                                                        children: \"Hall Number\"\n                                                                                    }),\n                                                                                    /*#__PURE__*/ (0, $ayMG0.jsx)(\"th\", {\n                                                                                        children: \"Subjects\"\n                                                                                    }),\n                                                                                    /*#__PURE__*/ (0, $ayMG0.jsx)(\"th\", {\n                                                                                        children: \"Hours\"\n                                                                                    }),\n                                                                                    /*#__PURE__*/ (0, $ayMG0.jsx)(\"th\", {\n                                                                                        children: \"Actions\"\n                                                                                    })\n                                                                                ]\n                                                                            })\n                                                                        }),\n                                                                        /*#__PURE__*/ (0, $ayMG0.jsx)(\"tbody\", {\n                                                                            children: /*#__PURE__*/ (0, $ayMG0.jsxs)(\"tr\", {\n                                                                                children: [\n                                                                                    /*#__PURE__*/ (0, $ayMG0.jsx)(\"td\", {\n                                                                                        children: cls.hallNumber || '-'\n                                                                                    }),\n                                                                                    /*#__PURE__*/ (0, $ayMG0.jsx)(\"td\", {\n                                                                                        children: classSubjects.length\n                                                                                    }),\n                                                                                    /*#__PURE__*/ (0, $ayMG0.jsx)(\"td\", {\n                                                                                        children: /*#__PURE__*/ (0, $ayMG0.jsxs)(\"span\", {\n                                                                                            className: `badge ${totalHours === 30 ? 'badge-success' : 'badge-danger'}`,\n                                                                                            children: [\n                                                                                                totalHours,\n                                                                                                \"/30h\"\n                                                                                            ]\n                                                                                        })\n                                                                                    }),\n                                                                                    /*#__PURE__*/ (0, $ayMG0.jsx)(\"td\", {\n                                                                                        children: /*#__PURE__*/ (0, $ayMG0.jsxs)(\"div\", {\n                                                                                            className: \"action-buttons\",\n                                                                                            children: [\n                                                                                                /*#__PURE__*/ (0, $ayMG0.jsx)(\"button\", {\n                                                                                                    className: \"btn-icon btn-icon-primary\",\n                                                                                                    onClick: ()=>editClass(cls),\n                                                                                                    title: \"Edit\",\n                                                                                                    children: \"\\u270F\\uFE0F\"\n                                                                                                }),\n                                                                                                /*#__PURE__*/ (0, $ayMG0.jsx)(\"button\", {\n                                                                                                    className: \"btn-icon btn-icon-danger\",\n                                                                                                    onClick: ()=>deleteClass(cls.id),\n                                                                                                    title: \"Delete\",\n                                                                                                    children: \"\\uD83D\\uDDD1\\uFE0F\"\n                                                                                                })\n                                                                                            ]\n                                                                                        })\n                                                                                    })\n                                                                                ]\n                                                                            })\n                                                                        })\n                                                                    ]\n                                                                })\n                                                            })\n                                                        ]\n                                                    }, cls.id);\n                                                });\n                                            })()\n                                        }),\n                                        /*#__PURE__*/ (0, $ayMG0.jsx)(\"button\", {\n                                            className: \"btn btn-success btn-sm\",\n                                            onClick: ()=>{\n                                                setShowAddClassForm(true);\n                                                setNewClass({\n                                                    id: null,\n                                                    name: '',\n                                                    hallNumber: ''\n                                                });\n                                            },\n                                            style: {\n                                                marginTop: '15px'\n                                            },\n                                            children: \"Add Class\"\n                                        })\n                                    ]\n                                }),\n                                showAddClassForm && /*#__PURE__*/ (0, $ayMG0.jsxs)(\"div\", {\n                                    className: \"card\",\n                                    children: [\n                                        /*#__PURE__*/ (0, $ayMG0.jsx)(\"h3\", {\n                                            children: newClass.id ? 'Edit Class' : 'Add New Class'\n                                        }),\n                                        /*#__PURE__*/ (0, $ayMG0.jsxs)(\"div\", {\n                                            className: \"grid-2\",\n                                            children: [\n                                                /*#__PURE__*/ (0, $ayMG0.jsxs)(\"div\", {\n                                                    className: \"form-group\",\n                                                    children: [\n                                                        /*#__PURE__*/ (0, $ayMG0.jsx)(\"label\", {\n                                                            children: \"Class Name\"\n                                                        }),\n                                                        /*#__PURE__*/ (0, $ayMG0.jsx)(\"input\", {\n                                                            type: \"text\",\n                                                            value: newClass.name,\n                                                            onChange: (e)=>setNewClass({\n                                                                    ...newClass,\n                                                                    name: e.target.value.toUpperCase()\n                                                                }),\n                                                            placeholder: \"CS3A, EE2B\"\n                                                        })\n                                                    ]\n                                                }),\n                                                /*#__PURE__*/ (0, $ayMG0.jsxs)(\"div\", {\n                                                    className: \"form-group\",\n                                                    children: [\n                                                        /*#__PURE__*/ (0, $ayMG0.jsx)(\"label\", {\n                                                            children: \"Hall Number (Optional)\"\n                                                        }),\n                                                        /*#__PURE__*/ (0, $ayMG0.jsx)(\"input\", {\n                                                            type: \"text\",\n                                                            value: newClass.hallNumber,\n                                                            onChange: (e)=>setNewClass({\n                                                                    ...newClass,\n                                                                    hallNumber: e.target.value\n                                                                }),\n                                                            placeholder: \"Hall 101\"\n                                                        })\n                                                    ]\n                                                })\n                                            ]\n                                        }),\n                                        /*#__PURE__*/ (0, $ayMG0.jsxs)(\"div\", {\n                                            style: {\n                                                display: 'flex',\n                                                gap: '10px'\n                                            },\n                                            children: [\n                                                /*#__PURE__*/ (0, $ayMG0.jsx)(\"button\", {\n                                                    className: \"btn btn-primary\",\n                                                    onClick: addClass,\n                                                    children: newClass.id ? 'Update Class' : 'Add Class'\n                                                }),\n                                                /*#__PURE__*/ (0, $ayMG0.jsx)(\"button\", {\n                                                    className: \"btn btn-secondary\",\n                                                    onClick: ()=>{\n                                                        setNewClass({\n                                                            name: '',\n                                                            hallNumber: ''\n                                                        });\n                                                        setShowAddClassForm(false);\n                                                    },\n                                                    children: \"Cancel\"\n                                                })\n                                            ]\n                                        })\n                                    ]\n                                })\n                            ]\n                        }),\n                        /*#__PURE__*/ (0, $ayMG0.jsxs)(\"div\", {\n                            className: \"section\",\n                            id: \"staff-section\",\n                            children: [\n                                /*#__PURE__*/ (0, $ayMG0.jsxs)(\"div\", {\n                                    className: \"section-header\",\n                                    children: [\n                                        /*#__PURE__*/ (0, $ayMG0.jsx)(\"span\", {\n                                            className: \"section-icon\",\n                                            children: \"\\uD83D\\uDC65\"\n                                        }),\n                                        /*#__PURE__*/ (0, $ayMG0.jsx)(\"h2\", {\n                                            className: \"section-title\",\n                                            children: \"Manage Staff\"\n                                        })\n                                    ]\n                                }),\n                                /*#__PURE__*/ (0, $ayMG0.jsxs)(\"div\", {\n                                    className: \"card\",\n                                    children: [\n                                        /*#__PURE__*/ (0, $ayMG0.jsxs)(\"h3\", {\n                                            children: [\n                                                \"Existing Staff (\",\n                                                teachers.length,\n                                                \")\"\n                                            ]\n                                        }),\n                                        teachers.length === 0 ? /*#__PURE__*/ (0, $ayMG0.jsx)(\"p\", {\n                                            style: {\n                                                color: '#64748b',\n                                                textAlign: 'center',\n                                                padding: '20px'\n                                            },\n                                            children: \"No staff added yet\"\n                                        }) : /*#__PURE__*/ (0, $ayMG0.jsx)(\"div\", {\n                                            className: \"desktop-table\",\n                                            children: /*#__PURE__*/ (0, $ayMG0.jsxs)(\"table\", {\n                                                children: [\n                                                    /*#__PURE__*/ (0, $ayMG0.jsx)(\"thead\", {\n                                                        children: /*#__PURE__*/ (0, $ayMG0.jsxs)(\"tr\", {\n                                                            children: [\n                                                                /*#__PURE__*/ (0, $ayMG0.jsx)(\"th\", {\n                                                                    children: \"S.No\"\n                                                                }),\n                                                                /*#__PURE__*/ (0, $ayMG0.jsx)(\"th\", {\n                                                                    children: \"Name\"\n                                                                }),\n                                                                /*#__PURE__*/ (0, $ayMG0.jsx)(\"th\", {\n                                                                    children: \"Username\"\n                                                                }),\n                                                                /*#__PURE__*/ (0, $ayMG0.jsx)(\"th\", {\n                                                                    children: \"Free Periods\"\n                                                                }),\n                                                                /*#__PURE__*/ (0, $ayMG0.jsx)(\"th\", {\n                                                                    children: \"Actions\"\n                                                                })\n                                                            ]\n                                                        })\n                                                    }),\n                                                    /*#__PURE__*/ (0, $ayMG0.jsx)(\"tbody\", {\n                                                        children: teachers.map((s, idx)=>/*#__PURE__*/ (0, $ayMG0.jsxs)(\"tr\", {\n                                                                children: [\n                                                                    /*#__PURE__*/ (0, $ayMG0.jsx)(\"td\", {\n                                                                        children: /*#__PURE__*/ (0, $ayMG0.jsxs)(\"span\", {\n                                                                            className: \"staff-badge\",\n                                                                            children: [\n                                                                                \"S\",\n                                                                                idx + 1\n                                                                            ]\n                                                                        })\n                                                                    }),\n                                                                    /*#__PURE__*/ (0, $ayMG0.jsx)(\"td\", {\n                                                                        children: /*#__PURE__*/ (0, $ayMG0.jsx)(\"strong\", {\n                                                                            children: s.name\n                                                                        })\n                                                                    }),\n                                                                    /*#__PURE__*/ (0, $ayMG0.jsx)(\"td\", {\n                                                                        children: s.username\n                                                                    }),\n                                                                    /*#__PURE__*/ (0, $ayMG0.jsx)(\"td\", {\n                                                                        children: s.freePeriodMode === 'manual' ? `Manual (${s.manualFreePeriods} free periods)` : 'Auto'\n                                                                    }),\n                                                                    /*#__PURE__*/ (0, $ayMG0.jsx)(\"td\", {\n                                                                        children: /*#__PURE__*/ (0, $ayMG0.jsxs)(\"div\", {\n                                                                            className: \"action-buttons\",\n                                                                            children: [\n                                                                                /*#__PURE__*/ (0, $ayMG0.jsx)(\"button\", {\n                                                                                    className: \"btn-icon btn-icon-primary\",\n                                                                                    onClick: ()=>editStaff(s),\n                                                                                    title: \"Edit\",\n                                                                                    children: \"\\u270F\\uFE0F\"\n                                                                                }),\n                                                                                /*#__PURE__*/ (0, $ayMG0.jsx)(\"button\", {\n                                                                                    className: \"btn-icon btn-icon-danger\",\n                                                                                    onClick: ()=>deleteStaff(s.id),\n                                                                                    title: \"Delete\",\n                                                                                    children: \"\\uD83D\\uDDD1\\uFE0F\"\n                                                                                })\n                                                                            ]\n                                                                        })\n                                                                    })\n                                                                ]\n                                                            }, s.id))\n                                                    })\n                                                ]\n                                            })\n                                        }),\n                                        /*#__PURE__*/ (0, $ayMG0.jsx)(\"button\", {\n                                            className: \"btn btn-success btn-sm\",\n                                            onClick: ()=>{\n                                                setShowAddStaffForm(true);\n                                                resetStaffForm();\n                                            },\n                                            style: {\n                                                marginTop: '15px'\n                                            },\n                                            children: \"Add Staff\"\n                                        })\n                                    ]\n                                }),\n                                showAddStaffForm && /*#__PURE__*/ (0, $ayMG0.jsxs)(\"div\", {\n                                    className: \"card\",\n                                    ref: staffFormRef,\n                                    children: [\n                                        /*#__PURE__*/ (0, $ayMG0.jsx)(\"h3\", {\n                                            children: newStaff.id ? 'Edit Staff' : 'Add New Staff'\n                                        }),\n                                        /*#__PURE__*/ (0, $ayMG0.jsxs)(\"div\", {\n                                            className: \"grid-2\",\n                                            children: [\n                                                /*#__PURE__*/ (0, $ayMG0.jsxs)(\"div\", {\n                                                    className: \"form-group\",\n                                                    children: [\n                                                        /*#__PURE__*/ (0, $ayMG0.jsx)(\"label\", {\n                                                            children: \"Full Name\"\n                                                        }),\n                                                        /*#__PURE__*/ (0, $ayMG0.jsx)(\"input\", {\n                                                            type: \"text\",\n                                                            placeholder: \"Dr. John Doe\",\n                                                            value: newStaff.name,\n                                                            onChange: (e)=>setNewStaff({\n                                                                    ...newStaff,\n                                                                    name: e.target.value\n                                                                })\n                                                        })\n                                                    ]\n                                                }),\n                                                /*#__PURE__*/ (0, $ayMG0.jsxs)(\"div\", {\n                                                    className: \"form-group\",\n                                                    children: [\n                                                        /*#__PURE__*/ (0, $ayMG0.jsx)(\"label\", {\n                                                            children: \"Username\"\n                                                        }),\n                                                        /*#__PURE__*/ (0, $ayMG0.jsx)(\"input\", {\n                                                            type: \"text\",\n                                                            placeholder: \"john\",\n                                                            value: newStaff.username,\n                                                            onChange: (e)=>setNewStaff({\n                                                                    ...newStaff,\n                                                                    username: e.target.value\n                                                                })\n                                                        })\n                                                    ]\n                                                }),\n                                                /*#__PURE__*/ (0, $ayMG0.jsxs)(\"div\", {\n                                                    className: \"form-group\",\n                                                    children: [\n                                                        /*#__PURE__*/ (0, $ayMG0.jsx)(\"label\", {\n                                                            children: newStaff.id ? 'New Password (Optional)' : 'Password'\n                                                        }),\n                                                        /*#__PURE__*/ (0, $ayMG0.jsx)(\"input\", {\n                                                            type: \"password\",\n                                                            placeholder: newStaff.id ? 'Leave blank to keep current' : 'Enter password',\n                                                            value: newStaff.password,\n                                                            onChange: (e)=>setNewStaff({\n                                                                    ...newStaff,\n                                                                    password: e.target.value\n                                                                })\n                                                        }),\n                                                        newStaff.id && /*#__PURE__*/ (0, $ayMG0.jsx)(\"small\", {\n                                                            style: {\n                                                                color: '#64748b',\n                                                                display: 'block',\n                                                                marginTop: '4px'\n                                                            },\n                                                            children: \"Staff can use new password immediately on next login\"\n                                                        })\n                                                    ]\n                                                }),\n                                                /*#__PURE__*/ (0, $ayMG0.jsxs)(\"div\", {\n                                                    className: \"form-group\",\n                                                    children: [\n                                                        /*#__PURE__*/ (0, $ayMG0.jsx)(\"label\", {\n                                                            children: \"Free Period Mode\"\n                                                        }),\n                                                        /*#__PURE__*/ (0, $ayMG0.jsxs)(\"select\", {\n                                                            value: newStaff.freePeriodMode,\n                                                            onChange: (e)=>setNewStaff({\n                                                                    ...newStaff,\n                                                                    freePeriodMode: e.target.value\n                                                                }),\n                                                            children: [\n                                                                /*#__PURE__*/ (0, $ayMG0.jsx)(\"option\", {\n                                                                    value: \"auto\",\n                                                                    children: \"Auto\"\n                                                                }),\n                                                                /*#__PURE__*/ (0, $ayMG0.jsx)(\"option\", {\n                                                                    value: \"manual\",\n                                                                    children: \"Manual\"\n                                                                })\n                                                            ]\n                                                        })\n                                                    ]\n                                                }),\n                                                newStaff.freePeriodMode === 'manual' && /*#__PURE__*/ (0, $ayMG0.jsxs)(\"div\", {\n                                                    className: \"form-group\",\n                                                    children: [\n                                                        /*#__PURE__*/ (0, $ayMG0.jsx)(\"label\", {\n                                                            children: \"Free Periods per Week\"\n                                                        }),\n                                                        /*#__PURE__*/ (0, $ayMG0.jsx)(\"input\", {\n                                                            type: \"number\",\n                                                            min: \"0\",\n                                                            max: \"30\",\n                                                            value: newStaff.manualFreePeriods,\n                                                            onChange: (e)=>setNewStaff({\n                                                                    ...newStaff,\n                                                                    manualFreePeriods: parseInt(e.target.value) || 0\n                                                                })\n                                                        })\n                                                    ]\n                                                })\n                                            ]\n                                        }),\n                                        /*#__PURE__*/ (0, $ayMG0.jsxs)(\"div\", {\n                                            className: \"button-group\",\n                                            children: [\n                                                /*#__PURE__*/ (0, $ayMG0.jsx)(\"button\", {\n                                                    className: \"btn btn-primary\",\n                                                    onClick: addOrUpdateStaff,\n                                                    children: newStaff.id ? 'Save Changes' : 'Add Staff'\n                                                }),\n                                                /*#__PURE__*/ (0, $ayMG0.jsx)(\"button\", {\n                                                    className: \"btn btn-secondary\",\n                                                    onClick: ()=>{\n                                                        resetStaffForm();\n                                                        setShowAddStaffForm(false);\n                                                    },\n                                                    children: \"Cancel\"\n                                                })\n                                            ]\n                                        })\n                                    ]\n                                })\n                            ]\n                        }),\n                        /*#__PURE__*/ (0, $ayMG0.jsxs)(\"div\", {\n                            className: \"section\",\n                            id: \"subject-section\",\n                            children: [\n                                /*#__PURE__*/ (0, $ayMG0.jsxs)(\"div\", {\n                                    className: \"section-header\",\n                                    children: [\n                                        /*#__PURE__*/ (0, $ayMG0.jsx)(\"span\", {\n                                            className: \"section-icon\",\n                                            children: \"\\uD83D\\uDCD6\"\n                                        }),\n                                        /*#__PURE__*/ (0, $ayMG0.jsx)(\"h2\", {\n                                            className: \"section-title\",\n                                            children: \"Manage Subjects\"\n                                        })\n                                    ]\n                                }),\n                                /*#__PURE__*/ (0, $ayMG0.jsxs)(\"div\", {\n                                    className: \"card\",\n                                    children: [\n                                        /*#__PURE__*/ (0, $ayMG0.jsxs)(\"h3\", {\n                                            children: [\n                                                \"Existing Subjects (\",\n                                                subjects.length,\n                                                \")\"\n                                            ]\n                                        }),\n                                        subjects.length === 0 ? /*#__PURE__*/ (0, $ayMG0.jsx)(\"p\", {\n                                            style: {\n                                                color: '#64748b',\n                                                textAlign: 'center',\n                                                padding: '20px'\n                                            },\n                                            children: \"No subjects added yet\"\n                                        }) : /*#__PURE__*/ (0, $ayMG0.jsx)((0, $ayMG0.Fragment), {\n                                            children: classes.map((cls)=>{\n                                                const classSubjects = subjects.filter((s)=>s.className === cls.name);\n                                                if (classSubjects.length === 0) return null;\n                                                const totalHours = classSubjects.reduce((sum, s)=>sum + s.hoursPerWeek, 0);\n                                                const progress = totalHours / 30 * 100;\n                                                return /*#__PURE__*/ (0, $ayMG0.jsxs)(\"div\", {\n                                                    style: {\n                                                        marginBottom: '30px'\n                                                    },\n                                                    children: [\n                                                        /*#__PURE__*/ (0, $ayMG0.jsxs)(\"div\", {\n                                                            style: {\n                                                                marginBottom: '8px',\n                                                                display: 'flex',\n                                                                alignItems: 'center',\n                                                                justifyContent: 'space-between',\n                                                                gap: '10px',\n                                                                color: '#1e293b',\n                                                                flexWrap: 'wrap'\n                                                            },\n                                                            children: [\n                                                                /*#__PURE__*/ (0, $ayMG0.jsxs)(\"h4\", {\n                                                                    style: {\n                                                                        margin: 0,\n                                                                        display: 'flex',\n                                                                        alignItems: 'center',\n                                                                        gap: '8px'\n                                                                    },\n                                                                    children: [\n                                                                        \"Class \",\n                                                                        /*#__PURE__*/ (0, $ayMG0.jsx)(\"strong\", {\n                                                                            children: cls.name\n                                                                        })\n                                                                    ]\n                                                                }),\n                                                                /*#__PURE__*/ (0, $ayMG0.jsxs)(\"div\", {\n                                                                    style: {\n                                                                        display: 'flex',\n                                                                        alignItems: 'center',\n                                                                        gap: '16px',\n                                                                        color: '#64748b',\n                                                                        fontWeight: 600\n                                                                    },\n                                                                    children: [\n                                                                        /*#__PURE__*/ (0, $ayMG0.jsxs)(\"span\", {\n                                                                            children: [\n                                                                                totalHours,\n                                                                                \"/30 hours\"\n                                                                            ]\n                                                                        }),\n                                                                        /*#__PURE__*/ (0, $ayMG0.jsxs)(\"span\", {\n                                                                            children: [\n                                                                                Math.max(30 - totalHours, 0),\n                                                                                \"h remaining\"\n                                                                            ]\n                                                                        })\n                                                                    ]\n                                                                })\n                                                            ]\n                                                        }),\n                                                        /*#__PURE__*/ (0, $ayMG0.jsx)(\"div\", {\n                                                            style: {\n                                                                width: '100%',\n                                                                height: '8px',\n                                                                backgroundColor: '#e2e8f0',\n                                                                borderRadius: '4px',\n                                                                overflow: 'hidden',\n                                                                marginBottom: '15px'\n                                                            },\n                                                            children: /*#__PURE__*/ (0, $ayMG0.jsx)(\"div\", {\n                                                                style: {\n                                                                    height: '100%',\n                                                                    width: `${Math.min(progress, 100)}%`,\n                                                                    backgroundColor: totalHours === 30 ? '#10b981' : '#f59e0b',\n                                                                    transition: 'width 0.3s ease'\n                                                                }\n                                                            })\n                                                        }),\n                                                        /*#__PURE__*/ (0, $ayMG0.jsx)(\"div\", {\n                                                            className: \"desktop-table\",\n                                                            children: /*#__PURE__*/ (0, $ayMG0.jsxs)(\"table\", {\n                                                                children: [\n                                                                    /*#__PURE__*/ (0, $ayMG0.jsx)(\"thead\", {\n                                                                        children: /*#__PURE__*/ (0, $ayMG0.jsxs)(\"tr\", {\n                                                                            children: [\n                                                                                /*#__PURE__*/ (0, $ayMG0.jsx)(\"th\", {\n                                                                                    children: \"Subject\"\n                                                                                }),\n                                                                                /*#__PURE__*/ (0, $ayMG0.jsx)(\"th\", {\n                                                                                    children: \"Type\"\n                                                                                }),\n                                                                                /*#__PURE__*/ (0, $ayMG0.jsx)(\"th\", {\n                                                                                    children: \"Hours\"\n                                                                                }),\n                                                                                /*#__PURE__*/ (0, $ayMG0.jsx)(\"th\", {\n                                                                                    children: \"Teacher\"\n                                                                                }),\n                                                                                /*#__PURE__*/ (0, $ayMG0.jsx)(\"th\", {\n                                                                                    children: \"Continuous\"\n                                                                                }),\n                                                                                /*#__PURE__*/ (0, $ayMG0.jsx)(\"th\", {\n                                                                                    children: \"Actions\"\n                                                                                })\n                                                                            ]\n                                                                        })\n                                                                    }),\n                                                                    /*#__PURE__*/ (0, $ayMG0.jsx)(\"tbody\", {\n                                                                        children: classSubjects.map((sub)=>/*#__PURE__*/ (0, $ayMG0.jsxs)(\"tr\", {\n                                                                                children: [\n                                                                                    /*#__PURE__*/ (0, $ayMG0.jsx)(\"td\", {\n                                                                                        children: /*#__PURE__*/ (0, $ayMG0.jsx)(\"strong\", {\n                                                                                            children: sub.name\n                                                                                        })\n                                                                                    }),\n                                                                                    /*#__PURE__*/ (0, $ayMG0.jsx)(\"td\", {\n                                                                                        children: sub.subjectType\n                                                                                    }),\n                                                                                    /*#__PURE__*/ (0, $ayMG0.jsxs)(\"td\", {\n                                                                                        children: [\n                                                                                            sub.hoursPerWeek,\n                                                                                            \"h\"\n                                                                                        ]\n                                                                                    }),\n                                                                                    /*#__PURE__*/ (0, $ayMG0.jsx)(\"td\", {\n                                                                                        children: sub.teacher\n                                                                                    }),\n                                                                                    /*#__PURE__*/ (0, $ayMG0.jsx)(\"td\", {\n                                                                                        children: sub.isContinuous ? `Yes (${sub.blockSize}p)` : 'No'\n                                                                                    }),\n                                                                                    /*#__PURE__*/ (0, $ayMG0.jsx)(\"td\", {\n                                                                                        children: /*#__PURE__*/ (0, $ayMG0.jsxs)(\"div\", {\n                                                                                            className: \"action-buttons\",\n                                                                                            children: [\n                                                                                                /*#__PURE__*/ (0, $ayMG0.jsx)(\"button\", {\n                                                                                                    className: \"btn-icon btn-icon-primary\",\n                                                                                                    onClick: ()=>editSubject(sub),\n                                                                                                    title: \"Edit\",\n                                                                                                    children: \"\\u270F\\uFE0F\"\n                                                                                                }),\n                                                                                                /*#__PURE__*/ (0, $ayMG0.jsx)(\"button\", {\n                                                                                                    className: \"btn-icon btn-icon-danger\",\n                                                                                                    onClick: ()=>deleteSubject(sub.id),\n                                                                                                    title: \"Delete\",\n                                                                                                    children: \"\\uD83D\\uDDD1\\uFE0F\"\n                                                                                                })\n                                                                                            ]\n                                                                                        })\n                                                                                    })\n                                                                                ]\n                                                                            }, sub.id))\n                                                                    })\n                                                                ]\n                                                            })\n                                                        })\n                                                    ]\n                                                }, cls.id);\n                                            })\n                                        }),\n                                        /*#__PURE__*/ (0, $ayMG0.jsx)(\"button\", {\n                                            className: \"btn btn-success btn-sm\",\n                                            onClick: ()=>{\n                                                setShowAddSubjectForm(true);\n                                                resetSubjectForm();\n                                            },\n                                            style: {\n                                                marginTop: '15px'\n                                            },\n                                            children: \"Add Subject\"\n                                        })\n                                    ]\n                                }),\n                                showAddSubjectForm && /*#__PURE__*/ (0, $ayMG0.jsxs)(\"div\", {\n                                    className: \"card\",\n                                    ref: subjectFormRef,\n                                    children: [\n                                        /*#__PURE__*/ (0, $ayMG0.jsx)(\"h3\", {\n                                            children: newSubject.id ? 'Edit Subject' : 'Add New Subject'\n                                        }),\n                                        newSubject.className && /*#__PURE__*/ (0, $ayMG0.jsx)((0, $4XiCD.default), {\n                                            className: newSubject.className,\n                                            subjects: subjects\n                                        }),\n                                        /*#__PURE__*/ (0, $ayMG0.jsxs)(\"div\", {\n                                            className: \"grid-2\",\n                                            children: [\n                                                /*#__PURE__*/ (0, $ayMG0.jsxs)(\"div\", {\n                                                    className: \"form-group\",\n                                                    children: [\n                                                        /*#__PURE__*/ (0, $ayMG0.jsx)(\"label\", {\n                                                            children: \"Select Class\"\n                                                        }),\n                                                        /*#__PURE__*/ (0, $ayMG0.jsxs)(\"select\", {\n                                                            value: newSubject.className,\n                                                            onChange: (e)=>setNewSubject({\n                                                                    ...newSubject,\n                                                                    className: e.target.value\n                                                                }),\n                                                            children: [\n                                                                /*#__PURE__*/ (0, $ayMG0.jsx)(\"option\", {\n                                                                    value: \"\",\n                                                                    children: \"-- Select Class --\"\n                                                                }),\n                                                                classes.map((cls)=>/*#__PURE__*/ (0, $ayMG0.jsx)(\"option\", {\n                                                                        value: cls.name,\n                                                                        children: cls.name\n                                                                    }, cls.id))\n                                                            ]\n                                                        })\n                                                    ]\n                                                }),\n                                                /*#__PURE__*/ (0, $ayMG0.jsxs)(\"div\", {\n                                                    className: \"form-group\",\n                                                    children: [\n                                                        /*#__PURE__*/ (0, $ayMG0.jsx)(\"label\", {\n                                                            children: \"Subject Name\"\n                                                        }),\n                                                        /*#__PURE__*/ (0, $ayMG0.jsx)(\"input\", {\n                                                            type: \"text\",\n                                                            value: newSubject.name,\n                                                            onChange: (e)=>setNewSubject({\n                                                                    ...newSubject,\n                                                                    name: e.target.value\n                                                                }),\n                                                            placeholder: \"DBMS, AI Lab, etc.\"\n                                                        })\n                                                    ]\n                                                }),\n                                                /*#__PURE__*/ (0, $ayMG0.jsxs)(\"div\", {\n                                                    className: \"form-group\",\n                                                    children: [\n                                                        /*#__PURE__*/ (0, $ayMG0.jsx)(\"label\", {\n                                                            children: \"Subject Type\"\n                                                        }),\n                                                        /*#__PURE__*/ (0, $ayMG0.jsxs)(\"select\", {\n                                                            value: newSubject.subjectType,\n                                                            onChange: (e)=>setNewSubject({\n                                                                    ...newSubject,\n                                                                    subjectType: e.target.value\n                                                                }),\n                                                            children: [\n                                                                /*#__PURE__*/ (0, $ayMG0.jsx)(\"option\", {\n                                                                    value: \"Core\",\n                                                                    children: \"Core\"\n                                                                }),\n                                                                /*#__PURE__*/ (0, $ayMG0.jsx)(\"option\", {\n                                                                    value: \"Elective\",\n                                                                    children: \"Elective\"\n                                                                }),\n                                                                /*#__PURE__*/ (0, $ayMG0.jsx)(\"option\", {\n                                                                    value: \"Lab\",\n                                                                    children: \"Lab\"\n                                                                }),\n                                                                /*#__PURE__*/ (0, $ayMG0.jsx)(\"option\", {\n                                                                    value: \"Other\",\n                                                                    children: \"Other\"\n                                                                })\n                                                            ]\n                                                        })\n                                                    ]\n                                                }),\n                                                /*#__PURE__*/ (0, $ayMG0.jsxs)(\"div\", {\n                                                    className: \"form-group\",\n                                                    children: [\n                                                        /*#__PURE__*/ (0, $ayMG0.jsx)(\"label\", {\n                                                            children: \"Hours per Week\"\n                                                        }),\n                                                        /*#__PURE__*/ (0, $ayMG0.jsx)(\"input\", {\n                                                            type: \"number\",\n                                                            min: \"1\",\n                                                            max: \"30\",\n                                                            value: newSubject.hoursPerWeek,\n                                                            onChange: (e)=>setNewSubject({\n                                                                    ...newSubject,\n                                                                    hoursPerWeek: parseInt(e.target.value) || 6\n                                                                })\n                                                        })\n                                                    ]\n                                                }),\n                                                /*#__PURE__*/ (0, $ayMG0.jsxs)(\"div\", {\n                                                    className: \"form-group\",\n                                                    children: [\n                                                        /*#__PURE__*/ (0, $ayMG0.jsx)(\"label\", {\n                                                            children: \"Teacher\"\n                                                        }),\n                                                        /*#__PURE__*/ (0, $ayMG0.jsxs)(\"select\", {\n                                                            value: newSubject.teacher,\n                                                            onChange: (e)=>setNewSubject({\n                                                                    ...newSubject,\n                                                                    teacher: e.target.value\n                                                                }),\n                                                            children: [\n                                                                /*#__PURE__*/ (0, $ayMG0.jsx)(\"option\", {\n                                                                    value: \"\",\n                                                                    children: \"-- Select Teacher --\"\n                                                                }),\n                                                                teachers.map((t)=>/*#__PURE__*/ (0, $ayMG0.jsx)(\"option\", {\n                                                                        value: t.name,\n                                                                        children: t.name\n                                                                    }, t.id))\n                                                            ]\n                                                        })\n                                                    ]\n                                                })\n                                            ]\n                                        }),\n                                        /*#__PURE__*/ (0, $ayMG0.jsxs)(\"div\", {\n                                            className: \"checkbox-group\",\n                                            children: [\n                                                /*#__PURE__*/ (0, $ayMG0.jsx)(\"input\", {\n                                                    type: \"checkbox\",\n                                                    id: \"continuous\",\n                                                    checked: newSubject.isContinuous,\n                                                    onChange: (e)=>setNewSubject({\n                                                            ...newSubject,\n                                                            isContinuous: e.target.checked\n                                                        })\n                                                }),\n                                                /*#__PURE__*/ (0, $ayMG0.jsx)(\"label\", {\n                                                    htmlFor: \"continuous\",\n                                                    style: {\n                                                        marginBottom: 0\n                                                    },\n                                                    children: \"Continuous Period (Lab)\"\n                                                })\n                                            ]\n                                        }),\n                                        newSubject.isContinuous && /*#__PURE__*/ (0, $ayMG0.jsxs)(\"div\", {\n                                            className: \"form-group\",\n                                            children: [\n                                                /*#__PURE__*/ (0, $ayMG0.jsx)(\"label\", {\n                                                    children: \"Block Size\"\n                                                }),\n                                                /*#__PURE__*/ (0, $ayMG0.jsxs)(\"select\", {\n                                                    value: newSubject.blockSize,\n                                                    onChange: (e)=>setNewSubject({\n                                                            ...newSubject,\n                                                            blockSize: parseInt(e.target.value)\n                                                        }),\n                                                    children: [\n                                                        /*#__PURE__*/ (0, $ayMG0.jsx)(\"option\", {\n                                                            value: \"2\",\n                                                            children: \"2 Periods\"\n                                                        }),\n                                                        /*#__PURE__*/ (0, $ayMG0.jsx)(\"option\", {\n                                                            value: \"3\",\n                                                            children: \"3 Periods\"\n                                                        })\n                                                    ]\n                                                })\n                                            ]\n                                        }),\n                                        /*#__PURE__*/ (0, $ayMG0.jsxs)(\"div\", {\n                                            className: \"button-group\",\n                                            children: [\n                                                /*#__PURE__*/ (0, $ayMG0.jsx)(\"button\", {\n                                                    className: \"btn btn-primary\",\n                                                    onClick: addOrUpdateSubject,\n                                                    children: newSubject.id ? 'Save Changes' : 'Add Subject'\n                                                }),\n                                                /*#__PURE__*/ (0, $ayMG0.jsx)(\"button\", {\n                                                    className: \"btn btn-secondary\",\n                                                    onClick: ()=>{\n                                                        resetSubjectForm();\n                                                        setShowAddSubjectForm(false);\n                                                    },\n                                                    children: \"Cancel\"\n                                                })\n                                            ]\n                                        })\n                                    ]\n                                })\n                            ]\n                        }),\n                        /*#__PURE__*/ (0, $ayMG0.jsxs)(\"div\", {\n                            className: \"section\",\n                            id: \"generate-section\",\n                            children: [\n                                /*#__PURE__*/ (0, $ayMG0.jsxs)(\"div\", {\n                                    className: \"section-header\",\n                                    children: [\n                                        /*#__PURE__*/ (0, $ayMG0.jsx)(\"span\", {\n                                            className: \"section-icon\",\n                                            children: \"\\u26A1\"\n                                        }),\n                                        /*#__PURE__*/ (0, $ayMG0.jsx)(\"h2\", {\n                                            className: \"section-title\",\n                                            children: \"Generate Timetable\"\n                                        })\n                                    ]\n                                }),\n                                /*#__PURE__*/ (0, $ayMG0.jsxs)(\"div\", {\n                                    className: \"card\",\n                                    children: [\n                                        /*#__PURE__*/ (0, $ayMG0.jsx)(\"h3\", {\n                                            children: \"Ready to Generate\"\n                                        }),\n                                        /*#__PURE__*/ (0, $ayMG0.jsxs)(\"div\", {\n                                            className: \"stats-grid\",\n                                            children: [\n                                                /*#__PURE__*/ (0, $ayMG0.jsxs)(\"div\", {\n                                                    className: \"stat-card stat-primary\",\n                                                    children: [\n                                                        /*#__PURE__*/ (0, $ayMG0.jsx)(\"div\", {\n                                                            className: \"stat-label\",\n                                                            children: \"Classes\"\n                                                        }),\n                                                        /*#__PURE__*/ (0, $ayMG0.jsx)(\"div\", {\n                                                            className: \"stat-value\",\n                                                            children: classes.length\n                                                        })\n                                                    ]\n                                                }),\n                                                /*#__PURE__*/ (0, $ayMG0.jsxs)(\"div\", {\n                                                    className: \"stat-card stat-success\",\n                                                    children: [\n                                                        /*#__PURE__*/ (0, $ayMG0.jsx)(\"div\", {\n                                                            className: \"stat-label\",\n                                                            children: \"Teachers\"\n                                                        }),\n                                                        /*#__PURE__*/ (0, $ayMG0.jsx)(\"div\", {\n                                                            className: \"stat-value\",\n                                                            children: teachers.length\n                                                        })\n                                                    ]\n                                                }),\n                                                /*#__PURE__*/ (0, $ayMG0.jsxs)(\"div\", {\n                                                    className: \"stat-card stat-warning\",\n                                                    children: [\n                                                        /*#__PURE__*/ (0, $ayMG0.jsx)(\"div\", {\n                                                            className: \"stat-label\",\n                                                            children: \"Subjects\"\n                                                        }),\n                                                        /*#__PURE__*/ (0, $ayMG0.jsx)(\"div\", {\n                                                            className: \"stat-value\",\n                                                            children: subjects.length\n                                                        })\n                                                    ]\n                                                })\n                                            ]\n                                        }),\n                                        /*#__PURE__*/ (0, $ayMG0.jsx)(\"button\", {\n                                            className: \"btn btn-success btn-lg\",\n                                            onClick: generateTimetable,\n                                            disabled: loading,\n                                            children: loading ? 'Generating...' : 'Generate Timetable'\n                                        })\n                                    ]\n                                })\n                            ]\n                        }),\n                        timetable && /*#__PURE__*/ (0, $ayMG0.jsxs)(\"div\", {\n                            className: \"section\",\n                            id: \"view-timetables\",\n                            children: [\n                                /*#__PURE__*/ (0, $ayMG0.jsxs)(\"div\", {\n                                    className: \"section-header\",\n                                    children: [\n                                        /*#__PURE__*/ (0, $ayMG0.jsx)(\"span\", {\n                                            className: \"section-icon\",\n                                            children: \"\\uD83D\\uDCCA\"\n                                        }),\n                                        /*#__PURE__*/ (0, $ayMG0.jsx)(\"h2\", {\n                                            className: \"section-title\",\n                                            children: \"Generated Timetables\"\n                                        })\n                                    ]\n                                }),\n                                /*#__PURE__*/ (0, $ayMG0.jsxs)(\"div\", {\n                                    className: \"card\",\n                                    children: [\n                                        /*#__PURE__*/ (0, $ayMG0.jsx)(\"h3\", {\n                                            children: \"Class Timetables\"\n                                        }),\n                                        [\n                                            ...classes\n                                        ].sort((a, b)=>a.name.localeCompare(b.name)).map((cls)=>/*#__PURE__*/ (0, $ayMG0.jsxs)(\"div\", {\n                                                className: \"timetable-container\",\n                                                id: `timetable-export-${cls.id}`,\n                                                children: [\n                                                    /*#__PURE__*/ (0, $ayMG0.jsx)(\"h4\", {\n                                                        className: \"timetable-title\",\n                                                        children: cls.name\n                                                    }),\n                                                    /*#__PURE__*/ (0, $ayMG0.jsx)(\"div\", {\n                                                        className: \"timetable-scroll\",\n                                                        children: /*#__PURE__*/ (0, $ayMG0.jsx)((0, $e3nvF.default), {\n                                                            timetable: timetable.classTimetables,\n                                                            className: cls.name\n                                                        })\n                                                    }),\n                                                    /*#__PURE__*/ (0, $ayMG0.jsxs)(\"div\", {\n                                                        className: \"timetable-actions no-print no-export\",\n                                                        children: [\n                                                            /*#__PURE__*/ (0, $ayMG0.jsx)(\"button\", {\n                                                                className: \"btn btn-primary btn-sm\",\n                                                                onClick: ()=>(0, $gqAsg.exportToPDF)(`timetable-export-${cls.id}`, `${cls.name}_Timetable.pdf`, {\n                                                                        title: cls.name\n                                                                    }),\n                                                                children: \"Download PDF\"\n                                                            }),\n                                                            /*#__PURE__*/ (0, $ayMG0.jsx)(\"button\", {\n                                                                className: \"btn btn-danger btn-sm\",\n                                                                onClick: ()=>deleteClassTimetable(cls.name),\n                                                                title: `Delete ${cls.name} timetable`,\n                                                                children: \"\\uD83D\\uDDD1\\uFE0F Delete\"\n                                                            })\n                                                        ]\n                                                    })\n                                                ]\n                                            }, cls.id))\n                                    ]\n                                }),\n                                /*#__PURE__*/ (0, $ayMG0.jsxs)(\"div\", {\n                                    className: \"card\",\n                                    children: [\n                                        /*#__PURE__*/ (0, $ayMG0.jsx)(\"h3\", {\n                                            children: \"Staff-wise Timetables\"\n                                        }),\n                                        [\n                                            ...teachers\n                                        ].sort((a, b)=>a.name.localeCompare(b.name)).map((teacher)=>/*#__PURE__*/ (0, $ayMG0.jsxs)(\"div\", {\n                                                className: \"timetable-container\",\n                                                id: `staff-timetable-export-${teacher.id}`,\n                                                children: [\n                                                    /*#__PURE__*/ (0, $ayMG0.jsxs)(\"h4\", {\n                                                        className: \"timetable-title\",\n                                                        children: [\n                                                            \"Teacher: \",\n                                                            teacher.name\n                                                        ]\n                                                    }),\n                                                    /*#__PURE__*/ (0, $ayMG0.jsx)(\"div\", {\n                                                        className: \"timetable-scroll\",\n                                                        children: /*#__PURE__*/ (0, $ayMG0.jsx)((0, $hyYFF.default), {\n                                                            timetable: timetable.staffTimetables,\n                                                            staffName: teacher.name\n                                                        })\n                                                    }),\n                                                    /*#__PURE__*/ (0, $ayMG0.jsx)(\"div\", {\n                                                        className: \"timetable-actions no-print no-export\",\n                                                        children: /*#__PURE__*/ (0, $ayMG0.jsx)(\"button\", {\n                                                            className: \"btn btn-primary btn-sm\",\n                                                            onClick: ()=>(0, $gqAsg.exportToPDF)(`staff-timetable-export-${teacher.id}`, `${teacher.name}_Timetable.pdf`, {\n                                                                    title: `Staff Timetable: ${teacher.name}`\n                                                                }),\n                                                            children: \"Download PDF\"\n                                                        })\n                                                    })\n                                                ]\n                                            }, teacher.id))\n                                    ]\n                                })\n                            ]\n                        })\n                    ]\n                }),\n                /*#__PURE__*/ (0, $ayMG0.jsx)((0, $2A5UH.ToastContainer), {\n                    toasts: toasts,\n                    onRemove: removeToast\n                })\n            ]\n        })\n    });\n}\n\n});\nparcelRegister(\"2A5UH\", function(module, exports) {\n\n$parcel$export(module.exports, \"ToastContainer\", () => $e0e81a01ed643521$export$f2815235e76a62b9);\n\nvar $ayMG0 = parcelRequire(\"ayMG0\");\nparcelRequire(\"acw62\");\nconst $e0e81a01ed643521$export$8d8dc7d5f743331b = ({ id: id, message: message, type: type, onRemove: onRemove, undoAction: undoAction })=>{\n    return /*#__PURE__*/ (0, $ayMG0.jsxs)(\"div\", {\n        style: {\n            padding: '12px 16px',\n            borderRadius: '8px',\n            marginBottom: '10px',\n            background: type === 'error' ? '#ff4444' : type === 'success' ? '#00C851' : '#ffbb33',\n            color: 'white',\n            display: 'flex',\n            alignItems: 'center',\n            justifyContent: 'space-between',\n            boxShadow: '0 4px 12px rgba(0,0,0,0.15)',\n            animation: 'slideIn 0.3s ease-out'\n        },\n        children: [\n            /*#__PURE__*/ (0, $ayMG0.jsx)(\"span\", {\n                children: message\n            }),\n            /*#__PURE__*/ (0, $ayMG0.jsxs)(\"div\", {\n                style: {\n                    display: 'flex',\n                    gap: '8px',\n                    marginLeft: '16px'\n                },\n                children: [\n                    undoAction && /*#__PURE__*/ (0, $ayMG0.jsx)(\"button\", {\n                        onClick: ()=>{\n                            if (typeof undoAction === 'function') undoAction();\n                            if (typeof onRemove === 'function') onRemove(id);\n                        },\n                        style: {\n                            background: 'white',\n                            color: type === 'success' ? '#00C851' : '#333',\n                            border: 'none',\n                            padding: '4px 12px',\n                            borderRadius: '4px',\n                            cursor: 'pointer',\n                            fontSize: '13px',\n                            fontWeight: '600'\n                        },\n                        children: \"UNDO\"\n                    }),\n                    /*#__PURE__*/ (0, $ayMG0.jsx)(\"button\", {\n                        onClick: ()=>{\n                            if (typeof onRemove === 'function') onRemove(id);\n                        },\n                        style: {\n                            background: 'transparent',\n                            border: 'none',\n                            color: 'white',\n                            cursor: 'pointer',\n                            fontSize: '18px',\n                            padding: '0 4px',\n                            lineHeight: '1'\n                        },\n                        title: \"Close\",\n                        children: \"\\xd7\"\n                    })\n                ]\n            })\n        ]\n    });\n};\nconst $e0e81a01ed643521$export$f2815235e76a62b9 = ({ toasts: toasts, onRemove: onRemove })=>{\n    return /*#__PURE__*/ (0, $ayMG0.jsx)(\"div\", {\n        style: {\n            position: 'fixed',\n            top: '20px',\n            right: '20px',\n            zIndex: 9999,\n            minWidth: '300px',\n            maxWidth: '500px'\n        },\n        children: toasts.map((toast)=>/*#__PURE__*/ (0, $ayMG0.jsx)($e0e81a01ed643521$export$8d8dc7d5f743331b, {\n                id: toast.id,\n                message: toast.message,\n                type: toast.type,\n                onRemove: onRemove,\n                undoAction: toast.undoAction\n            }, toast.id))\n    });\n};\n\n});\n\nparcelRegister(\"4XiCD\", function(module, exports) {\n\n$parcel$export(module.exports, \"default\", () => $511984d6a1a2608c$export$2e2bcd8739ae039);\n\nvar $ayMG0 = parcelRequire(\"ayMG0\");\nparcelRequire(\"acw62\");\nfunction $511984d6a1a2608c$export$2e2bcd8739ae039({ timetable: timetable, staff: staff }) {\n    if (!timetable || !timetable.staffTimetables) return null;\n    const teachers = staff.filter((s)=>s.role === 'staff');\n    return /*#__PURE__*/ (0, $ayMG0.jsxs)(\"div\", {\n        style: {\n            marginBottom: '30px'\n        },\n        children: [\n            /*#__PURE__*/ (0, $ayMG0.jsx)(\"h3\", {\n                style: {\n                    marginBottom: '15px'\n                },\n                children: \"\\uD83D\\uDCCA Staff Hours Summary\"\n            }),\n            /*#__PURE__*/ (0, $ayMG0.jsxs)(\"table\", {\n                className: \"data-table\",\n                children: [\n                    /*#__PURE__*/ (0, $ayMG0.jsx)(\"thead\", {\n                        children: /*#__PURE__*/ (0, $ayMG0.jsxs)(\"tr\", {\n                            children: [\n                                /*#__PURE__*/ (0, $ayMG0.jsx)(\"th\", {\n                                    children: \"Staff Name\"\n                                }),\n                                /*#__PURE__*/ (0, $ayMG0.jsx)(\"th\", {\n                                    children: \"Teaching Hours\"\n                                }),\n                                /*#__PURE__*/ (0, $ayMG0.jsx)(\"th\", {\n                                    children: \"Free Periods\"\n                                }),\n                                /*#__PURE__*/ (0, $ayMG0.jsx)(\"th\", {\n                                    children: \"Status\"\n                                })\n                            ]\n                        })\n                    }),\n                    /*#__PURE__*/ (0, $ayMG0.jsx)(\"tbody\", {\n                        children: teachers.map((teacher)=>{\n                            const staffTT = timetable.staffTimetables[teacher.name];\n                            if (!staffTT) return /*#__PURE__*/ (0, $ayMG0.jsxs)(\"tr\", {\n                                children: [\n                                    /*#__PURE__*/ (0, $ayMG0.jsx)(\"td\", {\n                                        children: teacher.name\n                                    }),\n                                    /*#__PURE__*/ (0, $ayMG0.jsx)(\"td\", {\n                                        children: \"0\"\n                                    }),\n                                    /*#__PURE__*/ (0, $ayMG0.jsx)(\"td\", {\n                                        children: \"30\"\n                                    }),\n                                    /*#__PURE__*/ (0, $ayMG0.jsx)(\"td\", {\n                                        children: \"\\u26A0\\uFE0F Not Assigned\"\n                                    })\n                                ]\n                            }, teacher.id);\n                            // Count teaching hours\n                            let teachingHours = 0;\n                            let freePeriods = 0;\n                            staffTT.forEach((day)=>{\n                                day.forEach((period)=>{\n                                    if (period && period.type !== 'free') teachingHours++;\n                                    else freePeriods++;\n                                });\n                            });\n                            const status = teachingHours >= 24 ? \"\\u2705 Full Load\" : teachingHours >= 18 ? \"\\u26A1 Good\" : teachingHours > 0 ? \"\\u26A0\\uFE0F Low Load\" : \"\\u274C No Classes\";\n                            return /*#__PURE__*/ (0, $ayMG0.jsxs)(\"tr\", {\n                                children: [\n                                    /*#__PURE__*/ (0, $ayMG0.jsx)(\"td\", {\n                                        children: teacher.name\n                                    }),\n                                    /*#__PURE__*/ (0, $ayMG0.jsxs)(\"td\", {\n                                        children: [\n                                            teachingHours,\n                                            \"/30\"\n                                        ]\n                                    }),\n                                    /*#__PURE__*/ (0, $ayMG0.jsxs)(\"td\", {\n                                        children: [\n                                            freePeriods,\n                                            \"/30\"\n                                        ]\n                                    }),\n                                    /*#__PURE__*/ (0, $ayMG0.jsx)(\"td\", {\n                                        children: status\n                                    })\n                                ]\n                            }, teacher.id);\n                        })\n                    })\n                ]\n            })\n        ]\n    });\n}\n\n});\n\nparcelRegister(\"e3nvF\", function(module, exports) {\n\n$parcel$export(module.exports, \"default\", () => $0e552b1b7a884617$export$2e2bcd8739ae039);\n\nvar $ayMG0 = parcelRequire(\"ayMG0\");\n\nvar $acw62 = parcelRequire(\"acw62\");\nconst $0e552b1b7a884617$var$DAYS = [\n    'Monday',\n    'Tuesday',\n    'Wednesday',\n    'Thursday',\n    'Friday'\n];\nfunction $0e552b1b7a884617$export$2e2bcd8739ae039({ timetable: timetable, className: className }) {\n    if (!timetable || !timetable[className]) return /*#__PURE__*/ (0, $ayMG0.jsx)(\"div\", {\n        style: {\n            padding: '40px',\n            textAlign: 'center',\n            color: '#64748b'\n        },\n        children: \"No timetable available\"\n    });\n    const grid = timetable[className];\n    // Debug code\n    console.log('TimetableGrid - className:', className);\n    console.log('TimetableGrid - grid:', grid);\n    console.log('TimetableGrid - grid is array?', Array.isArray(grid));\n    // Safety check: if grid is not an array or not nested properly\n    if (!Array.isArray(grid) || grid.length === 0) return /*#__PURE__*/ (0, $ayMG0.jsx)(\"div\", {\n        style: {\n            padding: '40px',\n            textAlign: 'center',\n            color: '#64748b'\n        },\n        children: \"Invalid timetable format\"\n    });\n    return /*#__PURE__*/ (0, $ayMG0.jsxs)(\"div\", {\n        id: \"timetable-export\",\n        className: \"timetable-grid\",\n        children: [\n            /*#__PURE__*/ (0, $ayMG0.jsx)(\"div\", {\n                className: \"timetable-header\",\n                children: \"Day/Period\"\n            }),\n            [\n                ...Array(6)\n            ].map((_, i)=>/*#__PURE__*/ (0, $ayMG0.jsxs)(\"div\", {\n                    className: \"timetable-header\",\n                    children: [\n                        \"P\",\n                        i + 1\n                    ]\n                }, i)),\n            $0e552b1b7a884617$var$DAYS.map((day, dayIndex)=>{\n                // Safety check for each day\n                if (!grid[dayIndex] || !Array.isArray(grid[dayIndex])) return null;\n                return /*#__PURE__*/ (0, $ayMG0.jsxs)((0, (/*@__PURE__*/$parcel$interopDefault($acw62))).Fragment, {\n                    children: [\n                        /*#__PURE__*/ (0, $ayMG0.jsx)(\"div\", {\n                            className: \"timetable-day\",\n                            children: day\n                        }),\n                        grid[dayIndex].map((slot, periodIndex)=>/*#__PURE__*/ (0, $ayMG0.jsx)(\"div\", {\n                                className: `timetable-cell subject-${slot && slot.type ? slot.type.toLowerCase() : 'free'}`,\n                                children: slot && slot.subject !== 'FREE' ? /*#__PURE__*/ (0, $ayMG0.jsxs)((0, $ayMG0.Fragment), {\n                                    children: [\n                                        /*#__PURE__*/ (0, $ayMG0.jsx)(\"div\", {\n                                            className: \"subject-name\",\n                                            children: slot.subject\n                                        }),\n                                        /*#__PURE__*/ (0, $ayMG0.jsx)(\"div\", {\n                                            className: \"teacher-name\",\n                                            children: slot.teacher\n                                        })\n                                    ]\n                                }) : /*#__PURE__*/ (0, $ayMG0.jsx)(\"div\", {\n                                    style: {\n                                        color: '#94a3b8'\n                                    },\n                                    children: \"FREE\"\n                                })\n                            }, periodIndex))\n                    ]\n                }, day);\n            })\n        ]\n    });\n}\n\n});\n\nparcelRegister(\"hyYFF\", function(module, exports) {\n\n$parcel$export(module.exports, \"default\", () => $81aa4954b90786d4$export$2e2bcd8739ae039);\n\nvar $ayMG0 = parcelRequire(\"ayMG0\");\nparcelRequire(\"acw62\");\nfunction $81aa4954b90786d4$export$2e2bcd8739ae039({ timetable: timetable, staffName: staffName }) {\n    const days = [\n        'Monday',\n        'Tuesday',\n        'Wednesday',\n        'Thursday',\n        'Friday'\n    ];\n    const periods = [\n        'P1',\n        'P2',\n        'P3',\n        'P4',\n        'P5',\n        'P6'\n    ];\n    const staffSchedule = timetable[staffName];\n    console.log('StaffTimetableGrid - Staff:', staffName);\n    console.log('StaffTimetableGrid - Available:', Object.keys(timetable));\n    if (!staffSchedule) return /*#__PURE__*/ (0, $ayMG0.jsxs)(\"div\", {\n        style: {\n            padding: '40px',\n            textAlign: 'center'\n        },\n        children: [\n            /*#__PURE__*/ (0, $ayMG0.jsx)(\"div\", {\n                style: {\n                    fontSize: '48px',\n                    marginBottom: '20px'\n                },\n                children: \"\\u26A0\\uFE0F\"\n            }),\n            /*#__PURE__*/ (0, $ayMG0.jsx)(\"h3\", {\n                children: \"No Timetable Found\"\n            }),\n            /*#__PURE__*/ (0, $ayMG0.jsxs)(\"p\", {\n                style: {\n                    color: '#64748b'\n                },\n                children: [\n                    'No timetable for \"',\n                    staffName,\n                    '\"'\n                ]\n            }),\n            /*#__PURE__*/ (0, $ayMG0.jsxs)(\"p\", {\n                style: {\n                    color: '#64748b',\n                    fontSize: '14px'\n                },\n                children: [\n                    \"Available: \",\n                    Object.keys(timetable).join(', ')\n                ]\n            })\n        ]\n    });\n    return /*#__PURE__*/ (0, $ayMG0.jsx)(\"div\", {\n        className: \"timetable-container\",\n        id: \"staff-timetable-export\",\n        children: /*#__PURE__*/ (0, $ayMG0.jsxs)(\"table\", {\n            className: \"timetable\",\n            children: [\n                /*#__PURE__*/ (0, $ayMG0.jsx)(\"thead\", {\n                    children: /*#__PURE__*/ (0, $ayMG0.jsxs)(\"tr\", {\n                        children: [\n                            /*#__PURE__*/ (0, $ayMG0.jsx)(\"th\", {\n                                className: \"day-header\",\n                                children: \"DAY/PERIOD\"\n                            }),\n                            periods.map((p)=>/*#__PURE__*/ (0, $ayMG0.jsx)(\"th\", {\n                                    className: \"period-header\",\n                                    children: p\n                                }, p))\n                        ]\n                    })\n                }),\n                /*#__PURE__*/ (0, $ayMG0.jsx)(\"tbody\", {\n                    children: days.map((day, dayIdx)=>/*#__PURE__*/ (0, $ayMG0.jsxs)(\"tr\", {\n                            children: [\n                                /*#__PURE__*/ (0, $ayMG0.jsx)(\"td\", {\n                                    className: \"day-cell\",\n                                    children: day\n                                }),\n                                periods.map((period, periodIdx)=>{\n                                    const slot = staffSchedule[dayIdx]?.[periodIdx];\n                                    const isFree = !slot || slot.type === 'free' || slot.subject === 'FREE';\n                                    return /*#__PURE__*/ (0, $ayMG0.jsx)(\"td\", {\n                                        className: `period-cell ${isFree ? 'free-period' : 'class-period'}`,\n                                        children: isFree ? /*#__PURE__*/ (0, $ayMG0.jsx)(\"div\", {\n                                            className: \"period-content free\",\n                                            children: /*#__PURE__*/ (0, $ayMG0.jsx)(\"span\", {\n                                                className: \"subject-name\",\n                                                children: \"FREE\"\n                                            })\n                                        }) : /*#__PURE__*/ (0, $ayMG0.jsxs)(\"div\", {\n                                            className: \"period-content\",\n                                            children: [\n                                                /*#__PURE__*/ (0, $ayMG0.jsx)(\"span\", {\n                                                    className: \"subject-name\",\n                                                    children: slot.subject\n                                                }),\n                                                /*#__PURE__*/ (0, $ayMG0.jsx)(\"span\", {\n                                                    className: \"class-name\",\n                                                    children: slot.class\n                                                })\n                                            ]\n                                        })\n                                    }, period);\n                                })\n                            ]\n                        }, day))\n                })\n            ]\n        })\n    });\n}\n\n});\n\nparcelRegister(\"bU9CP\", function(module, exports) {\n\n$parcel$export(module.exports, \"TimetableGenerator\", () => $a77c14b5958cefc4$export$21295ca23168aa6a);\n/**\r\n * TIMETABLE GENERATOR - Updated (labs max 2 periods/day + non-lab daily-first rule)\r\n * \r\n * Rules added:\r\n * - Labs: max 2 lab periods per CLASS per day (i.e. at most one 2-period lab block per day).\r\n * - For non-lab subjects with hoursPerWeek >= 5: attempt to place 1 hour on each day first.\r\n * - Non-lab subjects: avoid diagonal same (no p-1 / p+1 relative to previous day).\r\n * \r\n * Usage: instantiate with arrays: classes, staff, subjects\r\n * subject object example:\r\n * { name: \"AI\", className: \"AIML\", hoursPerWeek: 6, teacher: \"Ms. X\", isContinuous: false }\r\n * lab subject set: isContinuous: true (2-period blocks)\r\n */ class $a77c14b5958cefc4$export$21295ca23168aa6a {\n    constructor(classes, staff, subjects){\n        this.classes = classes || [];\n        this.staff = staff || [];\n        this.subjects = subjects || [];\n        this.classTimetables = {};\n        this.staffTimetables = {};\n        this.teacherSlots = {};\n        this.DAYS = [\n            'Monday',\n            'Tuesday',\n            'Wednesday',\n            'Thursday',\n            'Friday'\n        ];\n        this.PERIODS = 6;\n        this.TOTAL_HOURS = 30;\n        this.MAX_TEACHER_HOURS = 30;\n        this.globalLabDayCount = {};\n        this._seed = Date.now();\n        this.maxRetries = 5; // NEW: Add retry mechanism\n    }\n    _random() {\n        this._seed = (this._seed * 1664525 + 1013904223) % 4294967296;\n        return this._seed / 4294967296;\n    }\n    _shuffle(arr) {\n        const a = [\n            ...arr\n        ];\n        for(let i = a.length - 1; i > 0; i--){\n            const j = Math.floor(this._random() * (i + 1));\n            [a[i], a[j]] = [\n                a[j],\n                a[i]\n            ];\n        }\n        return a;\n    }\n    _pickRandomFromTopN(candidates, n = 5) {\n        if (!candidates.length) return null;\n        const topN = candidates.slice(0, Math.min(n, candidates.length));\n        return topN[Math.floor(this._random() * topN.length)];\n    }\n    _getBaseSubjectName(name = '') {\n        return name.replace(/\\s+lab$/i, '').trim().toLowerCase();\n    }\n    _isSameBase(a = '', b = '') {\n        return this._getBaseSubjectName(a) === this._getBaseSubjectName(b);\n    }\n    _zone(period) {\n        if (period <= 1) return 'Early';\n        if (period <= 3) return 'Mid';\n        return 'Late';\n    }\n    validate() {\n        const errors = [];\n        if (!this.classes.length) errors.push('No classes defined');\n        if (!this.staff.filter((s)=>s?.role === 'staff').length) errors.push('No staff defined');\n        if (!this.subjects.length) errors.push('No subjects defined');\n        for (const cls of this.classes){\n            const clsSubjects = this.subjects.filter((s)=>s?.className === cls.name);\n            const total = clsSubjects.reduce((sum, s)=>sum + (s.hoursPerWeek || 0), 0);\n            if (total !== this.TOTAL_HOURS) errors.push(`Class \"$\\{cls.name}\": total hours $\\{total} != required $\\{this.TOTAL_HOURS}`);\n        }\n        const teacherHours = {};\n        for (const s of this.subjects)if (s.teacher && s.teacher !== '-') teacherHours[s.teacher] = (teacherHours[s.teacher] || 0) + (s.hoursPerWeek || 0);\n        for (const [t, h] of Object.entries(teacherHours))if (h > this.MAX_TEACHER_HOURS) errors.push(`Teacher \"$\\{t}\" overload: $\\{h}h > $\\{this.MAX_TEACHER_HOURS}h`);\n        return errors.length ? {\n            valid: false,\n            errors: errors\n        } : {\n            valid: true\n        };\n    }\n    // NEW: Calculate class complexity score for sorting\n    _getClassComplexity(className) {\n        const clsSubjects = this.subjects.filter((s)=>s.className === className);\n        const labCount = clsSubjects.filter((s)=>s.isContinuous).length;\n        const uniqueTeachers = new Set(clsSubjects.map((s)=>s.teacher)).size;\n        // Higher score = more complex (process first)\n        return labCount * 10 + uniqueTeachers * 5 + clsSubjects.length;\n    }\n    generate() {\n        console.log('TimetableGenerator: start generate');\n        const v = this.validate();\n        if (!v.valid) {\n            console.error('Validation failed:', v.errors);\n            return {\n                success: false,\n                error: v.errors.join('; ')\n            };\n        }\n        // NEW: Try generation with retries\n        for(let attempt = 0; attempt < this.maxRetries; attempt++){\n            console.log(`Generation attempt $\\{attempt + 1}/$\\{this.maxRetries}`);\n            // Reset seed for each attempt\n            this._seed = Date.now() + attempt * 1000;\n            // Initialize structures\n            this.classTimetables = {};\n            this.teacherSlots = {};\n            this.globalLabDayCount = {};\n            this.classes.forEach((c)=>this.classTimetables[c.name] = this.DAYS.map(()=>Array(this.PERIODS).fill(null)));\n            this.staff.forEach((s)=>this.teacherSlots[s.name] = {});\n            this.DAYS.forEach((d)=>this.globalLabDayCount[d] = 0);\n            // NEW: Sort classes by complexity (most complex first)\n            const sortedClasses = [\n                ...this.classes\n            ].sort((a, b)=>{\n                return this._getClassComplexity(b.name) - this._getClassComplexity(a.name);\n            });\n            let ok = true;\n            for (const cls of sortedClasses){\n                console.log('Generating for class', cls.name);\n                const success = this._generateForClass(cls.name);\n                if (!success) {\n                    console.error(`Failed to generate for class $\\{cls.name} (attempt $\\{attempt + 1})`);\n                    ok = false;\n                    break;\n                }\n            }\n            if (ok) {\n                this._buildStaffTimetables();\n                this._validateTeacherConflicts();\n                console.log(\"\\u2713 Generation successful!\");\n                return {\n                    success: true,\n                    classTimetables: this.classTimetables,\n                    staffTimetables: this.staffTimetables\n                };\n            }\n        }\n        console.error('Failed to generate timetable after all attempts');\n        return {\n            success: false,\n            error: 'Unable to generate valid timetable after multiple attempts'\n        };\n    }\n    _buildStaffTimetables() {\n        this.staffTimetables = {};\n        for (const s of this.staff){\n            if (!s?.name) continue;\n            this.staffTimetables[s.name] = this.DAYS.map(()=>Array(this.PERIODS).fill({\n                    subject: 'FREE',\n                    class: '-',\n                    type: 'free'\n                }));\n        }\n        for (const [clsName, tt] of Object.entries(this.classTimetables))tt.forEach((row, dayIdx)=>{\n            row.forEach((slot, period)=>{\n                if (slot && slot.teacher && slot.teacher !== '-' && this.staffTimetables[slot.teacher]) this.staffTimetables[slot.teacher][dayIdx][period] = {\n                    subject: slot.subject,\n                    class: clsName,\n                    type: slot.type || 'core'\n                };\n            });\n        });\n    }\n    _validateTeacherConflicts() {\n        let conflicts = 0;\n        for (const [teacher, slots] of Object.entries(this.teacherSlots)){\n            const counts = {};\n            for (const k of Object.keys(slots)){\n                counts[k] = (counts[k] || 0) + 1;\n                if (counts[k] > 1) {\n                    console.error(`Teacher conflict: $\\{teacher} at $\\{k}`);\n                    conflicts++;\n                }\n            }\n        }\n        if (!conflicts) console.log('No teacher conflicts');\n    }\n    _generateForClass(className) {\n        const subjects = this.subjects.filter((s)=>s.className === className);\n        if (!subjects.length) return true;\n        const labs = subjects.filter((s)=>!!s.isContinuous);\n        const theory = subjects.filter((s)=>!s.isContinuous);\n        const tt = this.classTimetables[className];\n        const tracking = {\n            daysUsed: {},\n            dayPeriodMap: {},\n            periodWeeklyCount: {},\n            zonesUsed: {},\n            hoursPlaced: {},\n            lastPeriod: {},\n            subjectBaseDays: {}\n        };\n        for (const s of theory){\n            tracking.daysUsed[s.name] = new Set();\n            tracking.dayPeriodMap[s.name] = {};\n            tracking.periodWeeklyCount[s.name] = Array(this.PERIODS).fill(0);\n            tracking.zonesUsed[s.name] = new Set();\n            tracking.hoursPlaced[s.name] = 0;\n            tracking.lastPeriod[s.name] = -1;\n            const baseName = this._getBaseSubjectName(s.name);\n            tracking.subjectBaseDays[baseName] = tracking.subjectBaseDays[baseName] || new Set();\n        }\n        const labTracking = {\n            daysUsedByLab: {},\n            periodsUsedByLab: {},\n            blockUsageCount: {},\n            hoursPlaced: {},\n            lastDayIdx: {}\n        };\n        const classLabDayCount = {};\n        for(let d = 0; d < this.DAYS.length; d++)classLabDayCount[d] = 0;\n        for (const lab of labs){\n            labTracking.daysUsedByLab[lab.name] = new Set();\n            labTracking.periodsUsedByLab[lab.name] = new Set();\n            labTracking.blockUsageCount[lab.name] = {};\n            labTracking.hoursPlaced[lab.name] = 0;\n            labTracking.lastDayIdx[lab.name] = -1;\n        }\n        // PHASE A: Place labs\n        for (const lab of labs){\n            const hours = lab.hoursPerWeek || 0;\n            const blocks = Math.floor(hours / 2);\n            for(let b = 0; b < blocks; b++){\n                const ok = this._placeLabBlock_withMaxPerDay(className, lab, tt, labTracking, classLabDayCount);\n                if (!ok) {\n                    console.error(`Impossible to place lab block for $\\{lab.name} in class $\\{className}`);\n                    return false;\n                }\n                labTracking.hoursPlaced[lab.name] += 2;\n            }\n            if (hours % 2 === 1) {\n                const okSingle = this._placeLabSingle_withMaxPerDay(className, lab, tt, labTracking, classLabDayCount);\n                if (okSingle) labTracking.hoursPlaced[lab.name] += 1;\n                else console.warn(`Single lab hour could not be placed immediately for $\\{lab.name} (class $\\{className})`);\n            }\n        }\n        // PHASE B: Non-lab distribution\n        const dailyFirst = theory.filter((s)=>(s.hoursPerWeek || 0) >= 5);\n        const otherTheory = theory.filter((s)=>(s.hoursPerWeek || 0) < 5);\n        for (const subj of dailyFirst)for(let dayIdx = 0; dayIdx < this.DAYS.length; dayIdx++){\n            if (tracking.hoursPlaced[subj.name] >= subj.hoursPerWeek) break;\n            const res = this._placeTheoryDayPriority(className, subj, tt, tracking, labTracking, dayIdx);\n            if (res) tracking.hoursPlaced[subj.name] += 1;\n        }\n        const lowFirstSorted = [\n            ...otherTheory\n        ].sort((a, b)=>(a.hoursPerWeek || 0) - (b.hoursPerWeek || 0));\n        for (const s of lowFirstSorted){\n            let attempts = 0;\n            while(tracking.hoursPlaced[s.name] < (s.hoursPerWeek || 0) && attempts < 150){\n                const ok = this._placeTheorySpread(className, s, tt, tracking, labTracking);\n                if (!ok) attempts++;\n                else tracking.hoursPlaced[s.name]++;\n            }\n        }\n        const remainingSubjects = [\n            ...dailyFirst,\n            ...theory.filter((s)=>(s.hoursPerWeek || 0) > 5 && !dailyFirst.includes(s))\n        ].sort((a, b)=>(b.hoursPerWeek || 0) - (a.hoursPerWeek || 0));\n        for (const s of remainingSubjects){\n            let attempts = 0;\n            while(tracking.hoursPlaced[s.name] < (s.hoursPerWeek || 0) && attempts < 400){\n                const ok = this._placeTheorySpread(className, s, tt, tracking, labTracking) || this._placeTheoryRelaxed(className, s, tt, tracking, labTracking) || this._placeTheoryForce(className, s, tt, tracking, labTracking);\n                if (!ok) attempts++;\n                else tracking.hoursPlaced[s.name]++;\n            }\n            // Ultra desperate phase with multiple attempts\n            while(tracking.hoursPlaced[s.name] < (s.hoursPerWeek || 0)){\n                const ultra = this._ultraDesperatePlace(className, s, tt, tracking, labTracking);\n                if (!ultra) {\n                    console.error(`IMPOSSIBLE: No free slots for $\\{s.name} (class $\\{className})`);\n                    return false;\n                }\n                tracking.hoursPlaced[s.name]++;\n            }\n        }\n        const placed = this._countPlacedHours(className);\n        if (placed !== this.TOTAL_HOURS) {\n            console.error(`Class $\\{className} final hours $\\{placed} != $\\{this.TOTAL_HOURS}`);\n            return false;\n        }\n        return true;\n    }\n    _countPlacedHours(className) {\n        const tt = this.classTimetables[className];\n        let cnt = 0;\n        for(let d = 0; d < this.DAYS.length; d++){\n            for(let p = 0; p < this.PERIODS; p++)if (tt[d][p]) cnt++;\n        }\n        return cnt;\n    }\n    _placeLabBlock_withMaxPerDay(className, lab, tt, labTracking, classLabDayCount) {\n        const teacher = lab.teacher;\n        const candidates = [];\n        for (const dayIdx of this._shuffle([\n            0,\n            1,\n            2,\n            3,\n            4\n        ])){\n            const currentLabPeriods = classLabDayCount[dayIdx] || 0;\n            if (currentLabPeriods >= 2) continue;\n            for (const startP of this._shuffle([\n                0,\n                1,\n                2,\n                3,\n                4\n            ])){\n                if (startP > this.PERIODS - 2) continue;\n                if (tt[dayIdx][startP] || tt[dayIdx][startP + 1]) continue;\n                const slot1 = `$\\{this.DAYS[dayIdx]}-P$\\{startP+1}`;\n                const slot2 = `$\\{this.DAYS[dayIdx]}-P$\\{startP+2}`;\n                if (this.teacherSlots[teacher]?.[slot1] || this.teacherSlots[teacher]?.[slot2]) continue;\n                if (labTracking.daysUsedByLab[lab.name].has(dayIdx)) continue;\n                let score = 100;\n                if (!labTracking.daysUsedByLab[lab.name].has(dayIdx)) score += 80;\n                const blockKey = `P$\\{startP+1}-P$\\{startP+2}`;\n                const blockUse = labTracking.blockUsageCount[lab.name][blockKey] || 0;\n                if (blockUse === 0) score += 60;\n                else score -= blockUse * 50;\n                const dayName = this.DAYS[dayIdx];\n                const global = this.globalLabDayCount[dayName] || 0;\n                score += (2 - global) * 20;\n                candidates.push({\n                    dayIdx: dayIdx,\n                    startP: startP,\n                    score: score,\n                    blockKey: blockKey\n                });\n            }\n        }\n        if (!candidates.length) return false;\n        candidates.sort((a, b)=>b.score - a.score);\n        const pick = this._pickRandomFromTopN(candidates, 6);\n        if (!pick) return false;\n        tt[pick.dayIdx][pick.startP] = {\n            subject: lab.name,\n            teacher: teacher,\n            type: lab.subjectType || 'lab',\n            isLab: true\n        };\n        tt[pick.dayIdx][pick.startP + 1] = {\n            subject: lab.name,\n            teacher: teacher,\n            type: lab.subjectType || 'lab',\n            isLab: true,\n            isLabContinuation: true\n        };\n        const slot1 = `$\\{this.DAYS[pick.dayIdx]}-P$\\{pick.startP+1}`;\n        const slot2 = `$\\{this.DAYS[pick.dayIdx]}-P$\\{pick.startP+2}`;\n        if (!this.teacherSlots[teacher]) this.teacherSlots[teacher] = {};\n        this.teacherSlots[teacher][slot1] = className;\n        this.teacherSlots[teacher][slot2] = className;\n        labTracking.daysUsedByLab[lab.name].add(pick.dayIdx);\n        labTracking.periodsUsedByLab[lab.name].add(pick.startP);\n        labTracking.blockUsageCount[lab.name][pick.blockKey] = (labTracking.blockUsageCount[lab.name][pick.blockKey] || 0) + 1;\n        labTracking.lastDayIdx[lab.name] = pick.dayIdx;\n        classLabDayCount[pick.dayIdx] = (classLabDayCount[pick.dayIdx] || 0) + 2;\n        this.globalLabDayCount[this.DAYS[pick.dayIdx]] = (this.globalLabDayCount[this.DAYS[pick.dayIdx]] || 0) + 1;\n        return true;\n    }\n    _placeLabSingle_withMaxPerDay(className, lab, tt, labTracking, classLabDayCount) {\n        const teacher = lab.teacher;\n        const candidates = [];\n        for (const dayIdx of this._shuffle([\n            0,\n            1,\n            2,\n            3,\n            4\n        ])){\n            const current = classLabDayCount[dayIdx] || 0;\n            if (current + 1 > 2) continue;\n            for (const p of this._shuffle([\n                0,\n                1,\n                2,\n                3,\n                4,\n                5\n            ])){\n                if (tt[dayIdx][p]) continue;\n                const slot = `$\\{this.DAYS[dayIdx]}-P$\\{p+1}`;\n                if (this.teacherSlots[teacher]?.[slot]) continue;\n                if (labTracking.daysUsedByLab[lab.name].has(dayIdx)) continue;\n                let score = 80;\n                if (!labTracking.daysUsedByLab[lab.name].has(dayIdx)) score += 40;\n                candidates.push({\n                    dayIdx: dayIdx,\n                    p: p,\n                    score: score\n                });\n            }\n        }\n        if (!candidates.length) return false;\n        candidates.sort((a, b)=>b.score - a.score);\n        const pick = this._pickRandomFromTopN(candidates, 6);\n        if (!pick) return false;\n        tt[pick.dayIdx][pick.p] = {\n            subject: lab.name,\n            teacher: teacher,\n            type: lab.subjectType || 'lab',\n            isLab: true,\n            isLabSingle: true\n        };\n        const slotKey = `$\\{this.DAYS[pick.dayIdx]}-P$\\{pick.p+1}`;\n        if (!this.teacherSlots[teacher]) this.teacherSlots[teacher] = {};\n        this.teacherSlots[teacher][slotKey] = className;\n        labTracking.daysUsedByLab[lab.name].add(pick.dayIdx);\n        labTracking.periodsUsedByLab[lab.name].add(pick.p);\n        classLabDayCount[pick.dayIdx] = (classLabDayCount[pick.dayIdx] || 0) + 1;\n        this.globalLabDayCount[this.DAYS[pick.dayIdx]] = (this.globalLabDayCount[this.DAYS[pick.dayIdx]] || 0) + 1;\n        return true;\n    }\n    _placeTheoryDayPriority(className, subj, tt, tracking, labTracking, dayIdxArg) {\n        const teacher = subj.teacher;\n        const dayIdx = dayIdxArg;\n        const dayName = this.DAYS[dayIdx];\n        const candidates = [];\n        for (const p of this._shuffle([\n            0,\n            1,\n            2,\n            3,\n            4,\n            5\n        ])){\n            if (tt[dayIdx][p]) continue;\n            const slotKey = `$\\{dayName}-P$\\{p+1}`;\n            if (this.teacherSlots[teacher]?.[slotKey]) continue;\n            if (p > 0 && tt[dayIdx][p - 1] && this._isSameBase(tt[dayIdx][p - 1].subject, subj.name)) continue;\n            if (p < this.PERIODS - 1 && tt[dayIdx][p + 1] && this._isSameBase(tt[dayIdx][p + 1].subject, subj.name)) continue;\n            if (dayIdx > 0 && tracking.dayPeriodMap[subj.name]?.[dayIdx - 1] === p) continue;\n            const prevP = tracking.dayPeriodMap[subj.name]?.[dayIdx - 1];\n            if (prevP !== undefined && prevP !== null) {\n                if (p === prevP - 1 || p === prevP + 1) continue;\n            }\n            let score = 100;\n            if (!tracking.periodWeeklyCount[subj.name]) tracking.periodWeeklyCount[subj.name] = Array(this.PERIODS).fill(0);\n            const useCount = tracking.periodWeeklyCount[subj.name][p] || 0;\n            score += useCount === 0 ? 60 : -30 * useCount;\n            if (p >= 1 && p <= 4) score += 10;\n            candidates.push({\n                dayIdx: dayIdx,\n                p: p,\n                score: score,\n                dayName: dayName\n            });\n        }\n        if (!candidates.length) return false;\n        candidates.sort((a, b)=>b.score - a.score);\n        const pick = this._pickRandomFromTopN(candidates, 6);\n        if (!pick) return false;\n        tt[pick.dayIdx][pick.p] = {\n            subject: subj.name,\n            teacher: teacher,\n            type: subj.subjectType || 'core'\n        };\n        const slotKey = `$\\{this.DAYS[pick.dayIdx]}-P$\\{pick.p+1}`;\n        if (!this.teacherSlots[teacher]) this.teacherSlots[teacher] = {};\n        this.teacherSlots[teacher][slotKey] = className;\n        tracking.daysUsed[subj.name].add(pick.dayIdx);\n        tracking.dayPeriodMap[subj.name][pick.dayIdx] = pick.p;\n        tracking.periodWeeklyCount[subj.name][pick.p] = (tracking.periodWeeklyCount[subj.name][pick.p] || 0) + 1;\n        tracking.zonesUsed[subj.name].add(this._zone(pick.p));\n        tracking.lastPeriod[subj.name] = pick.p;\n        tracking.subjectBaseDays[this._getBaseSubjectName(subj.name)].add(pick.dayIdx);\n        return true;\n    }\n    _placeTheorySpread(className, subj, tt, tracking, labTracking) {\n        const teacher = subj.teacher;\n        const candidates = [];\n        for (const dayIdx of this._shuffle([\n            0,\n            1,\n            2,\n            3,\n            4\n        ]))for (const p of this._shuffle([\n            0,\n            1,\n            2,\n            3,\n            4,\n            5\n        ])){\n            if (tt[dayIdx][p]) continue;\n            const slotKey = `$\\{this.DAYS[dayIdx]}-P$\\{p+1}`;\n            if (this.teacherSlots[teacher]?.[slotKey]) continue;\n            if (p > 0 && tt[dayIdx][p - 1] && this._isSameBase(tt[dayIdx][p - 1].subject, subj.name)) continue;\n            if (p < this.PERIODS - 1 && tt[dayIdx][p + 1] && this._isSameBase(tt[dayIdx][p + 1].subject, subj.name)) continue;\n            if (dayIdx > 0 && tracking.dayPeriodMap[subj.name]?.[dayIdx - 1] === p) continue;\n            const prevP = tracking.dayPeriodMap[subj.name]?.[dayIdx - 1];\n            if (prevP !== undefined && prevP !== null) {\n                if (p === prevP - 1 || p === prevP + 1) continue;\n            }\n            if ((tracking.periodWeeklyCount[subj.name][p] || 0) >= 2) continue;\n            let score = 100;\n            if (!tracking.daysUsed[subj.name].has(dayIdx)) score += 50;\n            const z = this._zone(p);\n            if (!tracking.zonesUsed[subj.name].has(z)) score += 40;\n            const periodUsed = tracking.periodWeeklyCount[subj.name][p] || 0;\n            score += periodUsed === 0 ? 60 : -40 * periodUsed;\n            candidates.push({\n                dayIdx: dayIdx,\n                p: p,\n                score: score\n            });\n        }\n        if (!candidates.length) return false;\n        candidates.sort((a, b)=>b.score - a.score);\n        const pick = this._pickRandomFromTopN(candidates, 7);\n        if (!pick) return false;\n        tt[pick.dayIdx][pick.p] = {\n            subject: subj.name,\n            teacher: teacher,\n            type: subj.subjectType || 'core'\n        };\n        const slotKey = `$\\{this.DAYS[pick.dayIdx]}-P$\\{pick.p+1}`;\n        if (!this.teacherSlots[teacher]) this.teacherSlots[teacher] = {};\n        this.teacherSlots[teacher][slotKey] = className;\n        tracking.daysUsed[subj.name].add(pick.dayIdx);\n        tracking.dayPeriodMap[subj.name][pick.dayIdx] = pick.p;\n        tracking.periodWeeklyCount[subj.name][pick.p] = (tracking.periodWeeklyCount[subj.name][pick.p] || 0) + 1;\n        tracking.zonesUsed[subj.name].add(this._zone(pick.p));\n        tracking.lastPeriod[subj.name] = pick.p;\n        tracking.subjectBaseDays[this._getBaseSubjectName(subj.name)].add(pick.dayIdx);\n        return true;\n    }\n    _placeTheoryRelaxed(className, subj, tt, tracking, labTracking) {\n        const teacher = subj.teacher;\n        const candidates = [];\n        for (const dayIdx of this._shuffle([\n            0,\n            1,\n            2,\n            3,\n            4\n        ]))for (const p of this._shuffle([\n            0,\n            1,\n            2,\n            3,\n            4,\n            5\n        ])){\n            if (tt[dayIdx][p]) continue;\n            const slotKey = `$\\{this.DAYS[dayIdx]}-P$\\{p+1}`;\n            if (this.teacherSlots[teacher]?.[slotKey]) continue;\n            if (p > 0 && tt[dayIdx][p - 1] && this._isSameBase(tt[dayIdx][p - 1].subject, subj.name)) continue;\n            if (p < this.PERIODS - 1 && tt[dayIdx][p + 1] && this._isSameBase(tt[dayIdx][p + 1].subject, subj.name)) continue;\n            const prevP = tracking.dayPeriodMap[subj.name]?.[dayIdx - 1];\n            if (prevP !== undefined && prevP !== null) {\n                if (p === prevP - 1 || p === prevP + 1) continue;\n            }\n            if ((tracking.periodWeeklyCount[subj.name][p] || 0) >= 3) continue;\n            let score = 70;\n            if (!tracking.daysUsed[subj.name].has(dayIdx)) score += 40;\n            const z = this._zone(p);\n            if (!tracking.zonesUsed[subj.name].has(z)) score += 30;\n            score += tracking.periodWeeklyCount[subj.name][p] ? -20 : 40;\n            candidates.push({\n                dayIdx: dayIdx,\n                p: p,\n                score: score\n            });\n        }\n        if (!candidates.length) return false;\n        candidates.sort((a, b)=>b.score - a.score);\n        const pick = this._pickRandomFromTopN(candidates, 9);\n        if (!pick) return false;\n        tt[pick.dayIdx][pick.p] = {\n            subject: subj.name,\n            teacher: teacher,\n            type: subj.subjectType || 'core'\n        };\n        const slotKey = `$\\{this.DAYS[pick.dayIdx]}-P$\\{pick.p+1}`;\n        if (!this.teacherSlots[teacher]) this.teacherSlots[teacher] = {};\n        this.teacherSlots[teacher][slotKey] = className;\n        tracking.daysUsed[subj.name].add(pick.dayIdx);\n        tracking.dayPeriodMap[subj.name][pick.dayIdx] = pick.p;\n        tracking.periodWeeklyCount[subj.name][pick.p] = (tracking.periodWeeklyCount[subj.name][pick.p] || 0) + 1;\n        tracking.zonesUsed[subj.name].add(this._zone(pick.p));\n        tracking.lastPeriod[subj.name] = pick.p;\n        tracking.subjectBaseDays[this._getBaseSubjectName(subj.name)].add(pick.dayIdx);\n        return true;\n    }\n    _placeTheoryForce(className, subj, tt, tracking, labTracking) {\n        const teacher = subj.teacher;\n        for(let dayIdx = 0; dayIdx < 5; dayIdx++)for(let p = 0; p < this.PERIODS; p++){\n            if (tt[dayIdx][p]) continue;\n            const slotKey = `$\\{this.DAYS[dayIdx]}-P$\\{p+1}`;\n            if (this.teacherSlots[teacher]?.[slotKey]) continue;\n            if (p > 0 && tt[dayIdx][p - 1] && this._isSameBase(tt[dayIdx][p - 1].subject, subj.name)) continue;\n            if (p < this.PERIODS - 1 && tt[dayIdx][p + 1] && this._isSameBase(tt[dayIdx][p + 1].subject, subj.name)) continue;\n            const prevP = tracking.dayPeriodMap[subj.name]?.[dayIdx - 1];\n            if (prevP !== undefined && prevP !== null) {\n                if (p === prevP - 1 || p === prevP + 1) continue;\n            }\n            tt[dayIdx][p] = {\n                subject: subj.name,\n                teacher: teacher,\n                type: subj.subjectType || 'core'\n            };\n            if (!this.teacherSlots[teacher]) this.teacherSlots[teacher] = {};\n            this.teacherSlots[teacher][slotKey] = className;\n            tracking.daysUsed[subj.name].add(dayIdx);\n            tracking.dayPeriodMap[subj.name][dayIdx] = p;\n            tracking.periodWeeklyCount[subj.name][p] = (tracking.periodWeeklyCount[subj.name][p] || 0) + 1;\n            tracking.zonesUsed[subj.name].add(this._zone(p));\n            tracking.lastPeriod[subj.name] = p;\n            tracking.subjectBaseDays[this._getBaseSubjectName(subj.name)].add(dayIdx);\n            return true;\n        }\n        return false;\n    }\n    // FIXED: Completely relaxed ultra desperate placement\n    _ultraDesperatePlace(className, subj, tt, tracking, labTracking) {\n        const teacher = subj.teacher;\n        // First pass: Try with minimal constraints\n        for(let dayIdx = 0; dayIdx < 5; dayIdx++)for(let p = 0; p < this.PERIODS; p++){\n            if (tt[dayIdx][p]) continue;\n            const slotKey = `$\\{this.DAYS[dayIdx]}-P$\\{p+1}`;\n            if (this.teacherSlots[teacher]?.[slotKey]) continue;\n            // Only check adjacent same base (still avoid back-to-back)\n            if (p > 0 && tt[dayIdx][p - 1] && this._isSameBase(tt[dayIdx][p - 1].subject, subj.name)) continue;\n            if (p < this.PERIODS - 1 && tt[dayIdx][p + 1] && this._isSameBase(tt[dayIdx][p + 1].subject, subj.name)) continue;\n            tt[dayIdx][p] = {\n                subject: subj.name,\n                teacher: teacher,\n                type: subj.subjectType || 'core',\n                isUltra: true\n            };\n            if (!this.teacherSlots[teacher]) this.teacherSlots[teacher] = {};\n            this.teacherSlots[teacher][slotKey] = className;\n            tracking.daysUsed[subj.name].add(dayIdx);\n            tracking.dayPeriodMap[subj.name][dayIdx] = p;\n            tracking.periodWeeklyCount[subj.name][p] = (tracking.periodWeeklyCount[subj.name][p] || 0) + 1;\n            tracking.zonesUsed[subj.name].add(this._zone(p));\n            tracking.lastPeriod[subj.name] = p;\n            tracking.subjectBaseDays[this._getBaseSubjectName(subj.name)].add(dayIdx);\n            return true;\n        }\n        // Second pass: Completely desperate - only check teacher conflicts and slot availability\n        for(let dayIdx = 0; dayIdx < 5; dayIdx++)for(let p = 0; p < this.PERIODS; p++){\n            if (tt[dayIdx][p]) continue;\n            const slotKey = `$\\{this.DAYS[dayIdx]}-P$\\{p+1}`;\n            if (this.teacherSlots[teacher]?.[slotKey]) continue;\n            // Place without any other constraints\n            tt[dayIdx][p] = {\n                subject: subj.name,\n                teacher: teacher,\n                type: subj.subjectType || 'core',\n                isUltra: true\n            };\n            if (!this.teacherSlots[teacher]) this.teacherSlots[teacher] = {};\n            this.teacherSlots[teacher][slotKey] = className;\n            tracking.daysUsed[subj.name].add(dayIdx);\n            tracking.dayPeriodMap[subj.name][dayIdx] = p;\n            tracking.periodWeeklyCount[subj.name][p] = (tracking.periodWeeklyCount[subj.name][p] || 0) + 1;\n            tracking.zonesUsed[subj.name].add(this._zone(p));\n            tracking.lastPeriod[subj.name] = p;\n            tracking.subjectBaseDays[this._getBaseSubjectName(subj.name)].add(dayIdx);\n            return true;\n        }\n        return false;\n    }\n}\n\n});\n\n\n\n//# sourceMappingURL=AdminDashboard.4cb81e05.js.map\n","import { useState, useEffect, useRef } from 'react';\nimport AnimatedBackground from './AnimatedBackground';\nimport { ToastContainer } from './Toast';\nimport HoursTracker from './HoursTracker';\nimport TimetableGrid from './timetableGrid';\nimport StaffTimetableGrid from './StaffTimetableGrid';\nimport { exportToPDF } from '../utils/pdfUtils';\nimport { TimetableGenerator } from '../utils/timetableGenerator';\nimport { auth, db } from '../utils/firebase';\nimport { createUserWithEmailAndPassword, updatePassword, signInWithEmailAndPassword } from 'firebase/auth';\nimport {\n  collection,\n  addDoc,\n  getDocs,\n  deleteDoc,\n  updateDoc,\n  doc,\n  setDoc,\n} from 'firebase/firestore';\n\nexport default function AdminDashboard({ user, onLogout }) {\n  const [classes, setClasses] = useState([]);\n  const [staff, setStaff] = useState([]);\n  const [subjects, setSubjects] = useState([]);\n  const [timetable, setTimetable] = useState(null);\n  const [toasts, setToasts] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [showAddStaffForm, setShowAddStaffForm] = useState(false);\n  const [showAddSubjectForm, setShowAddSubjectForm] = useState(false);\n  const [showAddClassForm, setShowAddClassForm] = useState(false);\n  const [activeTab, setActiveTab] = useState('classes');\n\n  useEffect(() => {\n    window.scrollTo({ top: 0, left: 0, behavior: 'auto' });\n  }, []);\n\n  const staffFormRef = useRef(null);\n  const subjectFormRef = useRef(null);\n\n  const [newClass, setNewClass] = useState({ name: '', hallNumber: '' });\n  const [newStaff, setNewStaff] = useState({\n    id: null,\n    name: '',\n    username: '',\n    password: '',\n    freePeriodMode: 'auto',\n    manualFreePeriods: 0\n  });\n  const [newSubject, setNewSubject] = useState({\n    id: null,\n    className: '',\n    name: '',\n    subjectType: 'Core',\n    hoursPerWeek: 6,\n    isContinuous: false,\n    blockSize: 2,\n    teacher: ''\n  });\n\n  const teachers = staff.filter(s => s.role === \"staff\");\n\n  const showToast = (message, type, duration = 3000, undoAction = null) => {\n    const newToast = { message, type, id: Date.now(), undoAction };\n    setToasts(prev => [...prev, newToast]);\n    setTimeout(() => removeToast(newToast.id), duration);\n  };\n\n  const removeToast = (id) => {\n    setToasts(prev => prev.filter(t => t.id !== id));\n  };\n\n  const convertFlatToNested = (flatTimetable) => {\n    if (!flatTimetable) return null;\n    const nested = {};\n\n    Object.keys(flatTimetable).forEach(key => {\n      const slots = flatTimetable[key];\n      if (Array.isArray(slots) && slots.length > 0 && Array.isArray(slots[0])) {\n        nested[key] = slots;\n      } else if (Array.isArray(slots)) {\n        const days = [[], [], [], [], []];\n        slots.forEach(slot => {\n          if (slot && typeof slot.day === 'number' && typeof slot.period === 'number') {\n            if (!days[slot.day]) days[slot.day] = [];\n            days[slot.day][slot.period] = {\n              subject: slot.subject,\n              teacher: slot.teacher,\n              class: slot.class,\n              type: slot.type\n            };\n          }\n        });\n\n        days.forEach((day, idx) => {\n          if (!days[idx]) days[idx] = [];\n          for (let p = 0; p < 6; p++) {\n            if (!days[idx][p]) {\n              days[idx][p] = slots[0]?.class !== undefined\n                ? { subject: 'FREE', class: '-', type: 'free' }\n                : null;\n            }\n          }\n        });\n\n        nested[key] = days;\n      }\n    });\n\n    return nested;\n  };\n\n  const fetchData = async () => {\n    setLoading(true);\n    try {\n      const [cls, st, sb, tt] = await Promise.all([\n        getDocs(collection(db, 'classes')),\n        getDocs(collection(db, 'staff')),\n        getDocs(collection(db, 'subjects')),\n        getDocs(collection(db, 'timetable'))\n      ]);\n\n      setClasses(cls.docs.map(doc => ({ id: doc.id, ...doc.data() })));\n      setStaff(st.docs.map(doc => ({ id: doc.id, ...doc.data() })));\n      setSubjects(sb.docs.map(doc => ({ id: doc.id, ...doc.data() })));\n\n      if (!tt.empty) {\n        const ttData = tt.docs[0].data();\n        const convertedData = {\n          classTimetables: convertFlatToNested(ttData.classTimetables),\n          staffTimetables: convertFlatToNested(ttData.staffTimetables)\n        };\n        setTimetable(convertedData);\n      }\n    } catch (error) {\n      showToast(' Error loading data: ' + error.message, 'error');\n      console.error(error);\n    }\n    setLoading(false);\n  };\n\n  useEffect(() => {\n    fetchData();\n  }, []);\n\n  const restoreFromUndo = async (undoItem) => {\n    try {\n      if (undoItem.type === 'class') {\n        const { id, ...classData } = undoItem.data;\n        await setDoc(doc(db, 'classes', id), classData);\n      } else if (undoItem.type === 'staff') {\n        const { id, ...staffData } = undoItem.data;\n        await setDoc(doc(db, 'staff', id), staffData);\n        if (undoItem.data.firebaseUid) {\n          await setDoc(doc(db, 'users', undoItem.data.firebaseUid), {\n            name: undoItem.data.name,\n            username: undoItem.data.username,\n            role: 'staff'\n          });\n        }\n      } else if (undoItem.type === 'subject') {\n        const { id, ...subjectData } = undoItem.data;\n        await setDoc(doc(db, 'subjects', id), subjectData);\n      } else if (undoItem.type === 'classTimetable') {\n        // Restore class timetable\n        const updatedClassTimetables = {\n          ...timetable.classTimetables,\n          [undoItem.className]: undoItem.data\n        };\n\n        const ttRef = collection(db, 'timetable');\n        const existing = await getDocs(ttRef);\n\n        if (!existing.empty) {\n          await updateDoc(doc(db, 'timetable', existing.docs[0].id), {\n            classTimetables: updatedClassTimetables\n          });\n        }\n\n        setTimetable({\n          ...timetable,\n          classTimetables: updatedClassTimetables\n        });\n      }\n    \n      await fetchData();\n      showToast(' Data restored!', 'success');\n    } catch (error) {\n      console.error('Restore error:', error);\n      showToast(' Restore failed: ' + error.message, 'error');\n    }\n  };\n\n  const addClass = async () => {\n    if (!newClass.name) return showToast(\"Enter class name\", \"error\");\n    if (classes.find(c => c.name === newClass.name && !newClass.id))\n      return showToast(\"Class already exists\", \"error\");\n\n    try {\n      if (newClass.id) {\n        await updateDoc(doc(db, 'classes', newClass.id), {\n          name: newClass.name,\n          hallNumber: newClass.hallNumber\n        });\n        setClasses(classes.map(c => c.id === newClass.id ? { id: newClass.id, ...newClass } : c));\n        showToast(\" Class updated!\", \"success\");\n      } else {\n        const docRef = await addDoc(collection(db, 'classes'), {\n          name: newClass.name,\n          hallNumber: newClass.hallNumber || ''\n        });\n        setClasses([...classes, { id: docRef.id, name: newClass.name, hallNumber: newClass.hallNumber || '' }]);\n        showToast(\" Class added!\", \"success\");\n      }\n      setNewClass({ name: '', hallNumber: '' });\n      setShowAddClassForm(false);\n    } catch (error) {\n      showToast(\" Operation failed\", \"error\");\n    }\n  };\n\n  const editClass = (cls) => {\n    setNewClass({ id: cls.id, name: cls.name, hallNumber: cls.hallNumber || '' });\n    setShowAddClassForm(true);\n    window.scrollTo({ top: 0, behavior: 'smooth' });\n  };\n\n  const deleteClass = async (id) => {\n    if (!window.confirm(\"Delete this class?\")) return;\n    try {\n      const classToDelete = classes.find(c => c.id === id);\n      if (!classToDelete) return;\n      const undoItem = { type: 'class', data: { ...classToDelete } };\n      await deleteDoc(doc(db, 'classes', id));\n      setClasses(classes.filter(c => c.id !== id));\n      showToast(' Class deleted', 'success', 5000, () => restoreFromUndo(undoItem));\n    } catch (error) {\n      console.error('Delete error:', error);\n      showToast(\" Failed to delete\", \"error\");\n    }\n  };\n\n  const addOrUpdateStaff = async () => {\n    if (!newStaff.name || !newStaff.username)\n      return showToast(\"Fill all required fields\", \"error\");\n\n    try {\n      if (newStaff.id) {\n        const staffToUpdate = staff.find(s => s.id === newStaff.id);\n        const { password, ...updateData } = newStaff;\n\n        const firestoreUpdateData = {\n          name: updateData.name,\n          freePeriodMode: updateData.freePeriodMode,\n          manualFreePeriods: updateData.manualFreePeriods\n        };\n\n        if (staffToUpdate.username !== updateData.username) {\n          firestoreUpdateData.username = updateData.username;\n        }\n\n        await updateDoc(doc(db, 'staff', newStaff.id), firestoreUpdateData);\n\n        if (staffToUpdate.firebaseUid) {\n          await updateDoc(doc(db, 'users', staffToUpdate.firebaseUid), {\n            name: newStaff.name,\n            username: newStaff.username,\n            role: 'staff'\n          });\n        }\n\n        if (password && password.trim()) {\n          await updateDoc(doc(db, 'staff', newStaff.id), {\n            tempPassword: password,\n            passwordLastChanged: new Date().toISOString(),\n            needsPasswordChange: true\n          });\n          showToast(\" Temporary password set. Share it with staff.\", \"success\");\n        } else {\n          showToast(\" Staff updated!\", \"success\");\n        }\n\n        setStaff(staff.map(s => s.id === newStaff.id ? { ...s, ...firestoreUpdateData } : s));\n        resetStaffForm();\n        setShowAddStaffForm(false);\n        return;\n      }\n\n      if (!newStaff.password) return showToast(\"Password required\", \"error\");\n      const email = `${newStaff.username}@timetable.com`;\n      const userCredential = await createUserWithEmailAndPassword(auth, email, newStaff.password);\n      const uid = userCredential.user.uid;\n\n      const staffData = {\n        name: newStaff.name,\n        username: newStaff.username,\n        freePeriodMode: newStaff.freePeriodMode,\n        manualFreePeriods: newStaff.manualFreePeriods,\n        role: \"staff\",\n        firebaseUid: uid,\n      };\n\n      const docRef = await addDoc(collection(db, 'staff'), staffData);\n      await setDoc(doc(db, 'users', uid), {\n        name: newStaff.name,\n        username: newStaff.username,\n        role: 'staff'\n      });\n\n      setStaff([...staff, { id: docRef.id, ...staffData }]);\n      resetStaffForm();\n      setShowAddStaffForm(false);\n      showToast(\" Staff added!\", \"success\");\n    } catch (error) {\n      showToast(\" Operation failed: \" + error.message, \"error\");\n      console.error(error);\n    }\n  };\n\n  const editStaff = (staffMember) => {\n    setNewStaff({ ...staffMember, password: '' });\n    setShowAddStaffForm(true);\n    setTimeout(() => {\n      staffFormRef.current?.scrollIntoView({ behavior: 'smooth', block: 'center' });\n    }, 100);\n  };\n\n  const resetStaffForm = () => {\n    setNewStaff({\n      id: null,\n      name: '',\n      username: '',\n      password: '',\n      freePeriodMode: 'auto',\n      manualFreePeriods: 0\n    });\n  };\n\n  const deleteStaff = async (id) => {\n    if (!window.confirm(\"Delete this staff member?\")) return;\n    try {\n      const staffToDelete = staff.find(s => s.id === id);\n      if (!staffToDelete) return;\n      const undoItem = { type: 'staff', data: { ...staffToDelete } };\n      await deleteDoc(doc(db, 'staff', id));\n      if (staffToDelete.firebaseUid) {\n        await deleteDoc(doc(db, 'users', staffToDelete.firebaseUid));\n      }\n      setStaff(staff.filter(x => x.id !== id));\n      showToast(' Staff deleted', 'success', 5000, () => restoreFromUndo(undoItem));\n    } catch (error) {\n      console.error('Delete staff error:', error);\n      showToast(' Failed to delete', 'error');\n    }\n  };\n\n  const addOrUpdateSubject = async () => {\n    if (!newSubject.className || !newSubject.name || !newSubject.teacher)\n      return showToast(\"Fill all required fields\", \"error\");\n\n    try {\n      const subjectData = {\n        className: newSubject.className,\n        name: newSubject.name,\n        subjectType: newSubject.subjectType,\n        hoursPerWeek: newSubject.hoursPerWeek,\n        isContinuous: newSubject.isContinuous,\n        blockSize: newSubject.blockSize,\n        teacher: newSubject.teacher\n      };\n\n      if (newSubject.id) {\n        await updateDoc(doc(db, 'subjects', newSubject.id), subjectData);\n        setSubjects(subjects.map(s => s.id === newSubject.id ? { id: newSubject.id, ...subjectData } : s));\n        showToast(\" Subject updated!\", \"success\");\n      } else {\n        const docRef = await addDoc(collection(db, 'subjects'), subjectData);\n        setSubjects([...subjects, { id: docRef.id, ...subjectData }]);\n        showToast(\" Subject added!\", \"success\");\n      }\n\n      resetSubjectForm();\n      setShowAddSubjectForm(false);\n    } catch (error) {\n      showToast(\" Operation failed\", \"error\");\n      console.error(error);\n    }\n  };\n\n  const editSubject = (subject) => {\n    setNewSubject({\n      id: subject.id,\n      className: subject.className,\n      name: subject.name,\n      subjectType: subject.subjectType,\n      hoursPerWeek: subject.hoursPerWeek,\n      isContinuous: subject.isContinuous || false,\n      blockSize: subject.blockSize || 2,\n      teacher: subject.teacher\n    });\n    setShowAddSubjectForm(true);\n    setTimeout(() => {\n      subjectFormRef.current?.scrollIntoView({ behavior: 'smooth', block: 'center' });\n    }, 100);\n  };\n\n  const resetSubjectForm = () => {\n    setNewSubject({\n      id: null,\n      className: '',\n      name: '',\n      subjectType: 'Core',\n      hoursPerWeek: 6,\n      isContinuous: false,\n      blockSize: 2,\n      teacher: ''\n    });\n  };\n\n  const deleteSubject = async (id) => {\n    if (!window.confirm(\"Delete this subject?\")) return;\n    try {\n      const subjectToDelete = subjects.find(s => s.id === id);\n      if (!subjectToDelete) return;\n      const undoItem = { type: 'subject', data: { ...subjectToDelete } };\n      await deleteDoc(doc(db, 'subjects', id));\n      setSubjects(subjects.filter(s => s.id !== id));\n      showToast(' Subject deleted', 'success', 5000, () => restoreFromUndo(undoItem));\n    } catch (error) {\n      console.error('Delete subject error:', error);\n      showToast(' Failed to delete', 'error');\n    }\n  };\n\n\n  // Delete Class Timetable (like class/staff/subject delete)\n  const deleteClassTimetable = async (className) => {\n    if (!window.confirm(`Delete timetable for ${className}?\\nThis will only delete the class timetable, not staff timetables.`)) return;\n\n    try {\n      if (!timetable || !timetable.classTimetables || !timetable.classTimetables[className]) {\n        return showToast('Timetable not found', 'error');\n      }\n\n      // Save for undo\n      const deletedTimetableData = timetable.classTimetables[className];\n      const undoItem = {\n        type: 'classTimetable',\n        className: className,\n        data: deletedTimetableData\n      };\n\n      // Remove from timetable\n      const updatedClassTimetables = { ...timetable.classTimetables };\n      delete updatedClassTimetables[className];\n\n      // Update Firebase\n      const ttRef = collection(db, 'timetable');\n      const existing = await getDocs(ttRef);\n\n      if (!existing.empty) {\n        await updateDoc(doc(db, 'timetable', existing.docs[0].id), {\n          classTimetables: updatedClassTimetables\n        });\n      }\n\n      // Update state\n      setTimetable({\n        ...timetable,\n        classTimetables: updatedClassTimetables\n      });\n\n      showToast(`Timetable for ${className} deleted`, 'success', 5000, () => restoreFromUndo(undoItem));\n    } catch (error) {\n      console.error('Delete timetable error:', error);\n      showToast('Failed to delete timetable', 'error');\n    }\n  };\n\n  const generateTimetable = async () => {\n    setLoading(true);\n    try {\n      const generator = new TimetableGenerator(\n        classes,\n        staff.filter(s => s.role === 'staff'),\n        subjects\n      );\n\n      const validation = generator.validate();\n      if (!validation.valid) {\n        showToast(' Validation: ' + validation.errors[0], 'error');\n        setLoading(false);\n        return;\n      }\n\n      const result = generator.generate();\n\n      if (result.success) {\n        const serializableClassTimetables = {};\n        const serializableStaffTimetables = {};\n\n        Object.keys(result.classTimetables).forEach(className => {\n          serializableClassTimetables[className] = result.classTimetables[className].map((day, dayIndex) => {\n            return day.map((period, periodIndex) => ({\n              day: dayIndex,\n              period: periodIndex,\n              subject: period?.subject || null,\n              teacher: period?.teacher || null,\n              type: period?.type || null\n            }));\n          }).flat();\n        });\n\n        Object.keys(result.staffTimetables).forEach(staffName => {\n          serializableStaffTimetables[staffName] = result.staffTimetables[staffName].map((day, dayIndex) => {\n            return day.map((period, periodIndex) => ({\n              day: dayIndex,\n              period: periodIndex,\n              subject: period?.subject || null,\n              class: period?.class || null,\n              type: period?.type || null\n            }));\n          }).flat();\n        });\n\n        const timetableData = {\n          classTimetables: serializableClassTimetables,\n          staffTimetables: serializableStaffTimetables,\n          generatedAt: new Date().toISOString()\n        };\n\n        const ttRef = collection(db, 'timetable');\n        const existing = await getDocs(ttRef);\n\n        if (!existing.empty) {\n          await updateDoc(doc(db, 'timetable', existing.docs[0].id), timetableData);\n        } else {\n          await addDoc(ttRef, timetableData);\n        }\n\n        const teacherList = staff.filter(s => s.role === 'staff');\n        for (const teacher of teacherList) {\n          const staffTT = serializableStaffTimetables[teacher.name];\n          if (staffTT) {\n            await setDoc(doc(db, 'staffTimetables', teacher.id), {\n              staffName: teacher.name,\n              timetable: staffTT,\n              generatedAt: new Date().toISOString()\n            });\n          }\n        }\n\n        const displayClassTimetables = {};\n        Object.keys(serializableClassTimetables).forEach(className => {\n          const days = [[], [], [], [], []];\n          serializableClassTimetables[className].forEach(slot => {\n            if (!days[slot.day]) days[slot.day] = [];\n            days[slot.day][slot.period] = {\n              subject: slot.subject,\n              teacher: slot.teacher,\n              type: slot.type\n            };\n          });\n\n          days.forEach((day, idx) => {\n            if (!days[idx]) days[idx] = [];\n            for (let p = 0; p < 6; p++) {\n              if (!days[idx][p]) days[idx][p] = null;\n            }\n          });\n\n          displayClassTimetables[className] = days;\n        });\n\n        const displayStaffTimetables = {};\n        Object.keys(serializableStaffTimetables).forEach(staffName => {\n          const days = [[], [], [], [], []];\n          serializableStaffTimetables[staffName].forEach(slot => {\n            if (!days[slot.day]) days[slot.day] = [];\n            days[slot.day][slot.period] = {\n              subject: slot.subject,\n              class: slot.class,\n              type: slot.type\n            };\n          });\n\n          days.forEach((day, idx) => {\n            if (!days[idx]) days[idx] = [];\n            for (let p = 0; p < 6; p++) {\n              if (!days[idx][p]) {\n                days[idx][p] = { subject: 'FREE', class: '-', type: 'free' };\n              }\n            }\n          });\n\n          displayStaffTimetables[staffName] = days;\n        });\n\n        setTimetable({\n          classTimetables: displayClassTimetables,\n          staffTimetables: displayStaffTimetables\n        });\n\n        setActiveTab('results');\n\n        showToast(' Timetable generated & saved!', 'success');\n\n        setTimeout(() => {\n          document.getElementById('view-timetables')?.scrollIntoView({ \n            behavior: 'smooth' \n          });\n        }, 300);\n\n      } else {\n        showToast(' Failed: ' + result.error, 'error');\n      }\n    } catch (error) {\n      showToast(' Error: ' + error.message, 'error');\n      console.error(error);\n    }\n    setLoading(false);\n  };\n\n  if (loading) {\n    return (\n      <AnimatedBackground variant=\"spiral\" colorScheme=\"gradient\" interactive={true}>\n        <div style={{ display: 'flex', flexDirection: 'column', justifyContent: 'center', alignItems: 'center', height: '100vh', color: 'white', fontSize: '24px', gap: '20px' }}>\n          <div className=\"spinner\"></div>\n          <div>Loading...</div>\n        </div>\n      </AnimatedBackground>\n    );\n  }\n\n  return (\n    <AnimatedBackground variant=\"spiral\" colorScheme=\"gradient\" interactive={true}>\n      <div className=\"min-h-screen relative z-10 text-white\">\n        <div className=\"header-content\">\n          <h1 className=\"text-white\">Admin Dashboard</h1>\n          <div className=\"header-actions\">\n            <button className=\"btn btn-danger btn-sm\" onClick={onLogout}>\n              Logout\n            </button>\n          </div>\n        </div>\n\n        <div className=\"segmented-nav\">\n          <button\n            className={`segmented-item ${activeTab === 'classes' ? 'active' : ''}`}\n            onClick={() => { setActiveTab('classes'); document.getElementById('classes-section')?.scrollIntoView({ behavior: 'smooth' }); }}\n          >\n            Classes\n          </button>\n          <button\n            className={`segmented-item ${activeTab === 'staff' ? 'active' : ''}`}\n            onClick={() => { setActiveTab('staff'); document.getElementById('staff-section')?.scrollIntoView({ behavior: 'smooth' }); }}\n          >\n            Staff\n          </button>\n          <button\n            className={`segmented-item ${activeTab === 'subjects' ? 'active' : ''}`}\n            onClick={() => { setActiveTab('subjects'); document.getElementById('subject-section')?.scrollIntoView({ behavior: 'smooth' }); }}\n          >\n            Subjects\n          </button>\n          <button\n            className={`segmented-item ${activeTab === 'generate' ? 'active' : ''}`}\n            onClick={() => { setActiveTab('generate'); document.getElementById('generate-section')?.scrollIntoView({ behavior: 'smooth' }); }}\n          >\n            Generate\n          </button>\n          <button\n            className={`segmented-item ${activeTab === 'results' ? 'active' : ''}`}\n            onClick={() => { setActiveTab('results'); document.getElementById('view-timetables')?.scrollIntoView({ behavior: 'smooth' }); }}\n          >\n            Results\n          </button>\n        </div>\n\n        <div className=\"content\">\n          <div className=\"section\" id=\"classes-section\">\n            <div className=\"section-header\">\n              <span className=\"section-icon\"></span>\n              <h2 className=\"section-title\">Manage Classes</h2>\n            </div>\n\n            <div className=\"card\">\n              <h3>Existing Classes ({classes.length})</h3>\n              {classes.length === 0 ? (\n                <p style={{ color: '#64748b', textAlign: 'center', padding: '20px' }}>No classes added yet</p>\n              ) : (\n                <>\n                  {(() => {\n                    const sorted = [...classes].sort((a, b) => a.name.localeCompare(b.name));\n                    return sorted.map((cls) => {\n                      const classSubjects = subjects.filter(s => s.className === cls.name);\n                      const totalHours = classSubjects.reduce((sum, s) => sum + s.hoursPerWeek, 0);\n                      const progress = (totalHours / 30) * 100;\n\n                      return (\n                        <div key={cls.id} style={{ marginBottom: '30px' }}>\n                          <div style={{ marginBottom: '8px', display: 'flex', alignItems: 'center', justifyContent: 'space-between', gap: '10px', color: '#1e293b', flexWrap: 'wrap' }}>\n                            <h4 style={{ margin: 0, display: 'flex', alignItems: 'center', gap: '8px' }}>\n                              Class <strong>{cls.name}</strong>\n                            </h4>\n                            <div style={{ display: 'flex', alignItems: 'center', gap: '16px', color: '#64748b', fontWeight: 600 }}>\n                              <span>{totalHours}/30 hours</span>\n                              <span>{Math.max(30 - totalHours, 0)}h remaining</span>\n                            </div>\n                          </div>\n\n                          <div style={{ width: '100%', height: '8px', backgroundColor: '#e2e8f0', borderRadius: '4px', overflow: 'hidden', marginBottom: '15px' }}>\n                            <div style={{ height: '100%', width: `${Math.min(progress, 100)}%`, backgroundColor: totalHours === 30 ? '#10b981' : '#f59e0b', transition: 'width 0.3s ease' }}></div>\n                          </div>\n\n                          <div className=\"desktop-table\">\n                            <table>\n                              <thead>\n                                <tr>\n                                  <th>Hall Number</th>\n                                  <th>Subjects</th>\n                                  <th>Hours</th>\n                                  <th>Actions</th>\n                                </tr>\n                              </thead>\n                              <tbody>\n                                <tr>\n                                  <td>{cls.hallNumber || '-'}</td>\n                                  <td>{classSubjects.length}</td>\n                                  <td>\n                                    <span className={`badge ${totalHours === 30 ? 'badge-success' : 'badge-danger'}`}>\n                                      {totalHours}/30h\n                                    </span>\n                                  </td>\n                                  <td>\n                                    <div className=\"action-buttons\">\n                                      <button className=\"btn-icon btn-icon-primary\" onClick={() => editClass(cls)} title=\"Edit\"></button>\n                                      <button className=\"btn-icon btn-icon-danger\" onClick={() => deleteClass(cls.id)} title=\"Delete\"></button>\n                                    </div>\n                                  </td>\n                                </tr>\n                              </tbody>\n                            </table>\n                          </div>\n                        </div>\n                      );\n                    });\n                  })()}\n                </>\n              )}\n\n              <button className=\"btn btn-success btn-sm\" onClick={() => { setShowAddClassForm(true); setNewClass({ id: null, name: '', hallNumber: '' }); }} style={{ marginTop: '15px' }}>\n                Add Class\n              </button>\n            </div>\n\n            {showAddClassForm && (\n              <div className=\"card\">\n                <h3>{newClass.id ? 'Edit Class' : 'Add New Class'}</h3>\n                <div className=\"grid-2\">\n                  <div className=\"form-group\">\n                    <label>Class Name</label>\n                    <input\n                      type=\"text\"\n                      value={newClass.name}\n                      onChange={(e) => setNewClass({ ...newClass, name: e.target.value.toUpperCase() })}\n                      placeholder=\"CS3A, EE2B\"\n                    />\n                  </div>\n                  <div className=\"form-group\">\n                    <label>Hall Number (Optional)</label>\n                    <input\n                      type=\"text\"\n                      value={newClass.hallNumber}\n                      onChange={(e) => setNewClass({ ...newClass, hallNumber: e.target.value })}\n                      placeholder=\"Hall 101\"\n                    />\n                  </div>\n                </div>\n                <div style={{ display: 'flex', gap: '10px' }}>\n                  <button className=\"btn btn-primary\" onClick={addClass}>\n                    {newClass.id ? 'Update Class' : 'Add Class'}\n                  </button>\n                  <button className=\"btn btn-secondary\" onClick={() => { setNewClass({ name: '', hallNumber: '' }); setShowAddClassForm(false); }}>\n                    Cancel\n                  </button>\n                </div>\n              </div>\n            )}\n          </div>\n\n          <div className=\"section\" id=\"staff-section\">\n            <div className=\"section-header\">\n              <span className=\"section-icon\"></span>\n              <h2 className=\"section-title\">Manage Staff</h2>\n            </div>\n\n            <div className=\"card\">\n              <h3>Existing Staff ({teachers.length})</h3>\n              {teachers.length === 0 ? (\n                <p style={{ color: '#64748b', textAlign: 'center', padding: '20px' }}>No staff added yet</p>\n              ) : (\n                <div className=\"desktop-table\">\n                  <table>\n                    <thead>\n                      <tr>\n                        <th>S.No</th>\n                        <th>Name</th>\n                        <th>Username</th>\n                        <th>Free Periods</th>\n                        <th>Actions</th>\n                      </tr>\n                    </thead>\n                    <tbody>\n                      {teachers.map((s, idx) => (\n                        <tr key={s.id}>\n                          <td><span className=\"staff-badge\">S{idx + 1}</span></td>\n                          <td><strong>{s.name}</strong></td>\n                          <td>{s.username}</td>\n                          <td>\n                            {s.freePeriodMode === 'manual' \n                              ? `Manual (${s.manualFreePeriods} free periods)` \n                              : 'Auto'}\n                          </td>\n                          <td>\n                            <div className=\"action-buttons\">\n                              <button className=\"btn-icon btn-icon-primary\" onClick={() => editStaff(s)} title=\"Edit\"></button>\n                              <button className=\"btn-icon btn-icon-danger\" onClick={() => deleteStaff(s.id)} title=\"Delete\"></button>\n                            </div>\n                          </td>\n                        </tr>\n                      ))}\n                    </tbody>\n                  </table>\n                </div>\n              )}\n\n              <button className=\"btn btn-success btn-sm\" onClick={() => { setShowAddStaffForm(true); resetStaffForm(); }} style={{ marginTop: '15px' }}>\n                Add Staff\n              </button>\n            </div>\n\n            {showAddStaffForm && (\n              <div className=\"card\" ref={staffFormRef}>\n                <h3>{newStaff.id ? 'Edit Staff' : 'Add New Staff'}</h3>\n                <div className=\"grid-2\">\n                  <div className=\"form-group\">\n                    <label>Full Name</label>\n                    <input\n                      type=\"text\"\n                      placeholder=\"Dr. John Doe\"\n                      value={newStaff.name}\n                      onChange={(e) => setNewStaff({ ...newStaff, name: e.target.value })}\n                    />\n                  </div>\n                  <div className=\"form-group\">\n                    <label>Username</label>\n                    <input\n                      type=\"text\"\n                      placeholder=\"john\"\n                      value={newStaff.username}\n                      onChange={(e) => setNewStaff({ ...newStaff, username: e.target.value })}\n                    />\n                  </div>\n                  <div className=\"form-group\">\n                    <label>{newStaff.id ? 'New Password (Optional)' : 'Password'}</label>\n                    <input\n                      type=\"password\"\n                      placeholder={newStaff.id ? 'Leave blank to keep current' : 'Enter password'}\n                      value={newStaff.password}\n                      onChange={(e) => setNewStaff({ ...newStaff, password: e.target.value })}\n                    />\n                    {newStaff.id && (\n                      <small style={{ color: '#64748b', display: 'block', marginTop: '4px' }}>\n                        Staff can use new password immediately on next login\n                      </small>\n                    )}\n                  </div>\n                  <div className=\"form-group\">\n                    <label>Free Period Mode</label>\n                    <select value={newStaff.freePeriodMode} onChange={(e) => setNewStaff({ ...newStaff, freePeriodMode: e.target.value })}>\n                      <option value=\"auto\">Auto</option>\n                      <option value=\"manual\">Manual</option>\n                    </select>\n                  </div>\n                  {newStaff.freePeriodMode === 'manual' && (\n                    <div className=\"form-group\">\n                      <label>Free Periods per Week</label>\n                      <input\n                        type=\"number\"\n                        min=\"0\"\n                        max=\"30\"\n                        value={newStaff.manualFreePeriods}\n                        onChange={(e) => setNewStaff({ ...newStaff, manualFreePeriods: parseInt(e.target.value) || 0 })}\n                      />\n                    </div>\n                  )}\n                </div>\n                <div className=\"button-group\">\n                  <button className=\"btn btn-primary\" onClick={addOrUpdateStaff}>\n                    {newStaff.id ? 'Save Changes' : 'Add Staff'}\n                  </button>\n                  <button className=\"btn btn-secondary\" onClick={() => { resetStaffForm(); setShowAddStaffForm(false); }}>\n                    Cancel\n                  </button>\n                </div>\n              </div>\n            )}\n          </div>\n\n          <div className=\"section\" id=\"subject-section\">\n            <div className=\"section-header\">\n              <span className=\"section-icon\"></span>\n              <h2 className=\"section-title\">Manage Subjects</h2>\n            </div>\n\n            <div className=\"card\">\n              <h3>Existing Subjects ({subjects.length})</h3>\n              {subjects.length === 0 ? (\n                <p style={{ color: '#64748b', textAlign: 'center', padding: '20px' }}>No subjects added yet</p>\n              ) : (\n                <>\n                  {classes.map(cls => {\n                    const classSubjects = subjects.filter(s => s.className === cls.name);\n                    if (classSubjects.length === 0) return null;\n\n                    const totalHours = classSubjects.reduce((sum, s) => sum + s.hoursPerWeek, 0);\n                    const progress = (totalHours / 30) * 100;\n\n                    return (\n                      <div key={cls.id} style={{ marginBottom: '30px' }}>\n                        <div style={{ marginBottom: '8px', display: 'flex', alignItems: 'center', justifyContent: 'space-between', gap: '10px', color: '#1e293b', flexWrap: 'wrap' }}>\n                          <h4 style={{ margin: 0, display: 'flex', alignItems: 'center', gap: '8px' }}>\n                            Class <strong>{cls.name}</strong>\n                          </h4>\n                          <div style={{ display: 'flex', alignItems: 'center', gap: '16px', color: '#64748b', fontWeight: 600 }}>\n                            <span>{totalHours}/30 hours</span>\n                            <span>{Math.max(30 - totalHours, 0)}h remaining</span>\n                          </div>\n                        </div>\n\n                        <div style={{ width: '100%', height: '8px', backgroundColor: '#e2e8f0', borderRadius: '4px', overflow: 'hidden', marginBottom: '15px' }}>\n                          <div style={{ height: '100%', width: `${Math.min(progress, 100)}%`, backgroundColor: totalHours === 30 ? '#10b981' : '#f59e0b', transition: 'width 0.3s ease' }}></div>\n                        </div>\n\n                        <div className=\"desktop-table\">\n                          <table>\n                            <thead>\n                              <tr>\n                                <th>Subject</th>\n                                <th>Type</th>\n                                <th>Hours</th>\n                                <th>Teacher</th>\n                                <th>Continuous</th>\n                                <th>Actions</th>\n                              </tr>\n                            </thead>\n                            <tbody>\n                              {classSubjects.map(sub => (\n                                <tr key={sub.id}>\n                                  <td><strong>{sub.name}</strong></td>\n                                  <td>{sub.subjectType}</td>\n                                  <td>{sub.hoursPerWeek}h</td>\n                                  <td>{sub.teacher}</td>\n                                  <td>{sub.isContinuous ? `Yes (${sub.blockSize}p)` : 'No'}</td>\n                                  <td>\n                                    <div className=\"action-buttons\">\n                                      <button className=\"btn-icon btn-icon-primary\" onClick={() => editSubject(sub)} title=\"Edit\"></button>\n                                      <button className=\"btn-icon btn-icon-danger\" onClick={() => deleteSubject(sub.id)} title=\"Delete\"></button>\n                                    </div>\n                                  </td>\n                                </tr>\n                              ))}\n                            </tbody>\n                          </table>\n                        </div>\n                      </div>\n                    );\n                  })}\n                </>\n              )}\n\n              <button className=\"btn btn-success btn-sm\" onClick={() => { setShowAddSubjectForm(true); resetSubjectForm(); }} style={{ marginTop: '15px' }}>\n                Add Subject\n              </button>\n            </div>\n\n            {showAddSubjectForm && (\n              <div className=\"card\" ref={subjectFormRef}>\n                <h3>{newSubject.id ? 'Edit Subject' : 'Add New Subject'}</h3>\n                {newSubject.className && <HoursTracker className={newSubject.className} subjects={subjects} />}\n                <div className=\"grid-2\">\n                  <div className=\"form-group\">\n                    <label>Select Class</label>\n                    <select value={newSubject.className} onChange={(e) => setNewSubject({ ...newSubject, className: e.target.value })}>\n                      <option value=\"\">-- Select Class --</option>\n                      {classes.map(cls => (\n                        <option key={cls.id} value={cls.name}>{cls.name}</option>\n                      ))}\n                    </select>\n                  </div>\n                  <div className=\"form-group\">\n                    <label>Subject Name</label>\n                    <input\n                      type=\"text\"\n                      value={newSubject.name}\n                      onChange={(e) => setNewSubject({ ...newSubject, name: e.target.value })}\n                      placeholder=\"DBMS, AI Lab, etc.\"\n                    />\n                  </div>\n                  <div className=\"form-group\">\n                    <label>Subject Type</label>\n                    <select value={newSubject.subjectType} onChange={(e) => setNewSubject({ ...newSubject, subjectType: e.target.value })}>\n                      <option value=\"Core\">Core</option>\n                      <option value=\"Elective\">Elective</option>\n                      <option value=\"Lab\">Lab</option>\n                      <option value=\"Other\">Other</option>\n                    </select>\n                  </div>\n                  <div className=\"form-group\">\n                    <label>Hours per Week</label>\n                    <input\n                      type=\"number\"\n                      min=\"1\"\n                      max=\"30\"\n                      value={newSubject.hoursPerWeek}\n                      onChange={(e) => setNewSubject({ ...newSubject, hoursPerWeek: parseInt(e.target.value) || 6 })}\n                    />\n                  </div>\n                  <div className=\"form-group\">\n                    <label>Teacher</label>\n                    <select value={newSubject.teacher} onChange={(e) => setNewSubject({ ...newSubject, teacher: e.target.value })}>\n                      <option value=\"\">-- Select Teacher --</option>\n                      {teachers.map(t => (\n                        <option key={t.id} value={t.name}>{t.name}</option>\n                      ))}\n                    </select>\n                  </div>\n                </div>\n                <div className=\"checkbox-group\">\n                  <input\n                    type=\"checkbox\"\n                    id=\"continuous\"\n                    checked={newSubject.isContinuous}\n                    onChange={(e) => setNewSubject({ ...newSubject, isContinuous: e.target.checked })}\n                  />\n                  <label htmlFor=\"continuous\" style={{ marginBottom: 0 }}>\n                    Continuous Period (Lab)\n                  </label>\n                </div>\n                {newSubject.isContinuous && (\n                  <div className=\"form-group\">\n                    <label>Block Size</label>\n                    <select value={newSubject.blockSize} onChange={(e) => setNewSubject({ ...newSubject, blockSize: parseInt(e.target.value) })}>\n                      <option value=\"2\">2 Periods</option>\n                      <option value=\"3\">3 Periods</option>\n                    </select>\n                  </div>\n                )}\n                <div className=\"button-group\">\n                  <button className=\"btn btn-primary\" onClick={addOrUpdateSubject}>\n                    {newSubject.id ? 'Save Changes' : 'Add Subject'}\n                  </button>\n                  <button className=\"btn btn-secondary\" onClick={() => { resetSubjectForm(); setShowAddSubjectForm(false); }}>\n                    Cancel\n                  </button>\n                </div>\n              </div>\n            )}\n          </div>\n\n          <div className=\"section\" id=\"generate-section\">\n            <div className=\"section-header\">\n              <span className=\"section-icon\"></span>\n              <h2 className=\"section-title\">Generate Timetable</h2>\n            </div>\n            <div className=\"card\">\n              <h3>Ready to Generate</h3>\n              <div className=\"stats-grid\">\n                <div className=\"stat-card stat-primary\">\n                  <div className=\"stat-label\">Classes</div>\n                  <div className=\"stat-value\">{classes.length}</div>\n                </div>\n                <div className=\"stat-card stat-success\">\n                  <div className=\"stat-label\">Teachers</div>\n                  <div className=\"stat-value\">{teachers.length}</div>\n                </div>\n                <div className=\"stat-card stat-warning\">\n                  <div className=\"stat-label\">Subjects</div>\n                  <div className=\"stat-value\">{subjects.length}</div>\n                </div>\n              </div>\n              <button className=\"btn btn-success btn-lg\" onClick={generateTimetable} disabled={loading}>\n                {loading ? 'Generating...' : 'Generate Timetable'}\n              </button>\n            </div>\n          </div>\n\n          {timetable && (\n            <div className=\"section\" id=\"view-timetables\">\n              <div className=\"section-header\">\n                <span className=\"section-icon\"></span>\n                <h2 className=\"section-title\">Generated Timetables</h2>\n              </div>\n\n              <div className=\"card\">\n                <h3>Class Timetables</h3>\n                {[...classes].sort((a, b) => a.name.localeCompare(b.name)).map(cls => (\n                  <div key={cls.id} className=\"timetable-container\" id={`timetable-export-${cls.id}`}>\n                    <h4 className=\"timetable-title\">{cls.name}</h4>\n                    <div className=\"timetable-scroll\">\n                      <TimetableGrid timetable={timetable.classTimetables} className={cls.name} />\n                    </div>\n                    <div className=\"timetable-actions no-print no-export\">\n                      <button\n                        className=\"btn btn-primary btn-sm\"\n                        onClick={() => exportToPDF(`timetable-export-${cls.id}`, `${cls.name}_Timetable.pdf`, { title: cls.name })}\n                      >\n                        Download PDF\n                      </button>\n                      <button \n                        className=\"btn btn-danger btn-sm\" \n                        onClick={() => deleteClassTimetable(cls.name)}\n                        title={`Delete ${cls.name} timetable`}\n                      >\n                         Delete\n                      </button>\n                    </div>\n                  </div>\n                ))}\n              </div>\n\n              <div className=\"card\">\n                <h3>Staff-wise Timetables</h3>\n                {[...teachers].sort((a, b) => a.name.localeCompare(b.name)).map(teacher => (\n                  <div key={teacher.id} className=\"timetable-container\" id={`staff-timetable-export-${teacher.id}`}>\n                    <h4 className=\"timetable-title\">Teacher: {teacher.name}</h4>\n                    <div className=\"timetable-scroll\">\n                      <StaffTimetableGrid timetable={timetable.staffTimetables} staffName={teacher.name} />\n                    </div>\n                    <div className=\"timetable-actions no-print no-export\">\n                      <button\n                        className=\"btn btn-primary btn-sm\"\n                        onClick={() => exportToPDF(`staff-timetable-export-${teacher.id}`, `${teacher.name}_Timetable.pdf`, { title: `Staff Timetable: ${teacher.name}` })}\n                      >\n                        Download PDF\n                      </button>\n                    </div>\n                  </div>\n                ))}\n              </div>\n            </div>\n          )}\n        </div>\n\n        <ToastContainer toasts={toasts} onRemove={removeToast} />\n      </div>\n    </AnimatedBackground>\n  );\n}","import React from 'react';\r\nexport const Toast = ({ id, message, type, onRemove, undoAction }) => {\r\n  return (\r\n    <div\r\n      style={{\r\n        padding: '12px 16px',\r\n        borderRadius: '8px',\r\n        marginBottom: '10px',\r\n        background: type === 'error' ? '#ff4444' : type === 'success' ? '#00C851' : '#ffbb33',\r\n        color: 'white',\r\n        display: 'flex',\r\n        alignItems: 'center',\r\n        justifyContent: 'space-between',\r\n        boxShadow: '0 4px 12px rgba(0,0,0,0.15)',\r\n        animation: 'slideIn 0.3s ease-out'\r\n      }}\r\n    >\r\n      <span>{message}</span>\r\n      <div style={{ display: 'flex', gap: '8px', marginLeft: '16px' }}>\r\n        {undoAction && (\r\n          <button\r\n            onClick={() => {\r\n              if (typeof undoAction === 'function') {\r\n                undoAction();\r\n              }\r\n              if (typeof onRemove === 'function') {\r\n                onRemove(id);\r\n              }\r\n            }}\r\n            style={{\r\n              background: 'white',\r\n              color: type === 'success' ? '#00C851' : '#333',\r\n              border: 'none',\r\n              padding: '4px 12px',\r\n              borderRadius: '4px',\r\n              cursor: 'pointer',\r\n              fontSize: '13px',\r\n              fontWeight: '600'\r\n            }}\r\n          >\r\n            UNDO\r\n          </button>\r\n        )}\r\n        <button\r\n          onClick={() => {\r\n            if (typeof onRemove === 'function') {\r\n              onRemove(id);\r\n            }\r\n          }}\r\n          style={{\r\n            background: 'transparent',\r\n            border: 'none',\r\n            color: 'white',\r\n            cursor: 'pointer',\r\n            fontSize: '18px',\r\n            padding: '0 4px',\r\n            lineHeight: '1'\r\n          }}\r\n          title=\"Close\"\r\n        >\r\n          \r\n        </button>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport const ToastContainer = ({ toasts, onRemove }) => {\r\n  return (\r\n    <div\r\n      style={{\r\n        position: 'fixed',\r\n        top: '20px',\r\n        right: '20px',\r\n        zIndex: 9999,\r\n        minWidth: '300px',\r\n        maxWidth: '500px'\r\n      }}\r\n    >\r\n      {toasts.map(toast => (\r\n        <Toast\r\n          key={toast.id}\r\n          id={toast.id}\r\n          message={toast.message}\r\n          type={toast.type}\r\n          onRemove={onRemove}\r\n          undoAction={toast.undoAction}\r\n        />\r\n      ))}\r\n    </div>\r\n  );\r\n};","import React from 'react';\r\n\r\nexport default function HoursTracker({ timetable, staff }) {\r\n  if (!timetable || !timetable.staffTimetables) {\r\n    return null;\r\n  }\r\n\r\n  const teachers = staff.filter(s => s.role === 'staff');\r\n\r\n  return (\r\n    <div style={{ marginBottom: '30px' }}>\r\n      <h3 style={{ marginBottom: '15px' }}> Staff Hours Summary</h3>\r\n      <table className=\"data-table\">\r\n        <thead>\r\n          <tr>\r\n            <th>Staff Name</th>\r\n            <th>Teaching Hours</th>\r\n            <th>Free Periods</th>\r\n            <th>Status</th>\r\n          </tr>\r\n        </thead>\r\n        <tbody>\r\n          {teachers.map((teacher) => {\r\n            const staffTT = timetable.staffTimetables[teacher.name];\r\n            if (!staffTT) {\r\n              return (\r\n                <tr key={teacher.id}>\r\n                  <td>{teacher.name}</td>\r\n                  <td>0</td>\r\n                  <td>30</td>\r\n                  <td> Not Assigned</td>\r\n                </tr>\r\n              );\r\n            }\r\n\r\n            // Count teaching hours\r\n            let teachingHours = 0;\r\n            let freePeriods = 0;\r\n\r\n            staffTT.forEach(day => {\r\n              day.forEach(period => {\r\n                if (period && period.type !== 'free') {\r\n                  teachingHours++;\r\n                } else {\r\n                  freePeriods++;\r\n                }\r\n              });\r\n            });\r\n\r\n            const status = teachingHours >= 24 ? ' Full Load' :\r\n                          teachingHours >= 18 ? ' Good' :\r\n                          teachingHours > 0 ? ' Low Load' :\r\n                          ' No Classes';\r\n\r\n            return (\r\n              <tr key={teacher.id}>\r\n                <td>{teacher.name}</td>\r\n                <td>{teachingHours}/30</td>\r\n                <td>{freePeriods}/30</td>\r\n                <td>{status}</td>\r\n              </tr>\r\n            );\r\n          })}\r\n        </tbody>\r\n      </table>\r\n    </div>\r\n  );\r\n}","import React from 'react';\r\n\r\nconst DAYS = ['Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday'];\r\n\r\nexport default function TimetableGrid({ timetable, className }) {\r\n    if (!timetable || !timetable[className]) {\r\n        return (\r\n            <div style={{padding: '40px', textAlign: 'center', color: '#64748b'}}>\r\n                No timetable available\r\n            </div>\r\n        );\r\n    }\r\n\r\n    const grid = timetable[className];\r\n\r\n    // Debug code\r\n    console.log('TimetableGrid - className:', className);\r\n    console.log('TimetableGrid - grid:', grid);\r\n    console.log('TimetableGrid - grid is array?', Array.isArray(grid));\r\n\r\n    // Safety check: if grid is not an array or not nested properly\r\n    if (!Array.isArray(grid) || grid.length === 0) {\r\n        return (\r\n            <div style={{padding: '40px', textAlign: 'center', color: '#64748b'}}>\r\n                Invalid timetable format\r\n            </div>\r\n        );\r\n    }\r\n\r\n    return (\r\n        <div id=\"timetable-export\" className=\"timetable-grid\">\r\n            <div className=\"timetable-header\">Day/Period</div>\r\n            {[...Array(6)].map((_, i) => (\r\n                <div key={i} className=\"timetable-header\">P{i + 1}</div>\r\n            ))}\r\n\r\n            {DAYS.map((day, dayIndex) => {\r\n                // Safety check for each day\r\n                if (!grid[dayIndex] || !Array.isArray(grid[dayIndex])) {\r\n                    return null;\r\n                }\r\n\r\n                return (\r\n                    <React.Fragment key={day}>\r\n                        <div className=\"timetable-day\">{day}</div>\r\n                        {grid[dayIndex].map((slot, periodIndex) => (\r\n                            <div \r\n                                key={periodIndex} \r\n                                className={`timetable-cell subject-${slot && slot.type ? slot.type.toLowerCase() : 'free'}`}\r\n                            >\r\n                                {slot && slot.subject !== 'FREE' ? (\r\n                                    <>\r\n                                        <div className=\"subject-name\">{slot.subject}</div>\r\n                                        <div className=\"teacher-name\">{slot.teacher}</div>\r\n                                    </>\r\n                                ) : (\r\n                                    <div style={{ color: '#94a3b8' }}>FREE</div>\r\n                                )}\r\n                            </div>\r\n                        ))}\r\n                    </React.Fragment>\r\n                );\r\n            })}\r\n        </div>\r\n    );\r\n}\r\n","import React from 'react';\r\n\r\nexport default function StaffTimetableGrid({ timetable, staffName }) {\r\n    const days = ['Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday'];\r\n    const periods = ['P1', 'P2', 'P3', 'P4', 'P5', 'P6'];\r\n\r\n    const staffSchedule = timetable[staffName];\r\n\r\n    console.log('StaffTimetableGrid - Staff:', staffName);\r\n    console.log('StaffTimetableGrid - Available:', Object.keys(timetable));\r\n\r\n    if (!staffSchedule) {\r\n        return (\r\n            <div style={{ padding: '40px', textAlign: 'center' }}>\r\n                <div style={{ fontSize: '48px', marginBottom: '20px' }}></div>\r\n                <h3>No Timetable Found</h3>\r\n                <p style={{color: '#64748b'}}>No timetable for \"{staffName}\"</p>\r\n                <p style={{color: '#64748b', fontSize: '14px'}}>Available: {Object.keys(timetable).join(', ')}</p>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    return (\r\n        <div className=\"timetable-container\" id=\"staff-timetable-export\">\r\n            <table className=\"timetable\">\r\n                <thead>\r\n                    <tr>\r\n                        <th className=\"day-header\">DAY/PERIOD</th>\r\n                        {periods.map(p => <th key={p} className=\"period-header\">{p}</th>)}\r\n                    </tr>\r\n                </thead>\r\n                <tbody>\r\n                    {days.map((day, dayIdx) => (\r\n                        <tr key={day}>\r\n                            <td className=\"day-cell\">{day}</td>\r\n                            {periods.map((period, periodIdx) => {\r\n                                const slot = staffSchedule[dayIdx]?.[periodIdx];\r\n                                const isFree = !slot || slot.type === 'free' || slot.subject === 'FREE';\r\n\r\n                                return (\r\n                                    <td key={period} className={`period-cell ${isFree ? 'free-period' : 'class-period'}`}>\r\n                                        {isFree ? (\r\n                                            <div className=\"period-content free\">\r\n                                                <span className=\"subject-name\">FREE</span>\r\n                                            </div>\r\n                                        ) : (\r\n                                            <div className=\"period-content\">\r\n                                                <span className=\"subject-name\">{slot.subject}</span>\r\n                                                <span className=\"class-name\">{slot.class}</span>\r\n                                            </div>\r\n                                        )}\r\n                                    </td>\r\n                                );\r\n                            })}\r\n                        </tr>\r\n                    ))}\r\n                </tbody>\r\n            </table>\r\n        </div>\r\n    );\r\n}","/**\r\n * TIMETABLE GENERATOR - Updated (labs max 2 periods/day + non-lab daily-first rule)\r\n * \r\n * Rules added:\r\n * - Labs: max 2 lab periods per CLASS per day (i.e. at most one 2-period lab block per day).\r\n * - For non-lab subjects with hoursPerWeek >= 5: attempt to place 1 hour on each day first.\r\n * - Non-lab subjects: avoid diagonal same (no p-1 / p+1 relative to previous day).\r\n * \r\n * Usage: instantiate with arrays: classes, staff, subjects\r\n * subject object example:\r\n * { name: \"AI\", className: \"AIML\", hoursPerWeek: 6, teacher: \"Ms. X\", isContinuous: false }\r\n * lab subject set: isContinuous: true (2-period blocks)\r\n */\r\n\r\nexport class TimetableGenerator {\r\n  constructor(classes, staff, subjects) {\r\n    this.classes = classes || [];\r\n    this.staff = staff || [];\r\n    this.subjects = subjects || [];\r\n    this.classTimetables = {};\r\n    this.staffTimetables = {};\r\n    this.teacherSlots = {};\r\n    this.DAYS = ['Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday'];\r\n    this.PERIODS = 6;\r\n    this.TOTAL_HOURS = 30;\r\n    this.MAX_TEACHER_HOURS = 30;\r\n    this.globalLabDayCount = {};\r\n    this._seed = Date.now();\r\n    this.maxRetries = 5; // NEW: Add retry mechanism\r\n  }\r\n\r\n  _random() {\r\n    this._seed = (this._seed * 1664525 + 1013904223) % 4294967296;\r\n    return this._seed / 4294967296;\r\n  }\r\n\r\n  _shuffle(arr) {\r\n    const a = [...arr];\r\n    for (let i = a.length - 1; i > 0; i--) {\r\n      const j = Math.floor(this._random() * (i + 1));\r\n      [a[i], a[j]] = [a[j], a[i]];\r\n    }\r\n    return a;\r\n  }\r\n\r\n  _pickRandomFromTopN(candidates, n = 5) {\r\n    if (!candidates.length) return null;\r\n    const topN = candidates.slice(0, Math.min(n, candidates.length));\r\n    return topN[Math.floor(this._random() * topN.length)];\r\n  }\r\n\r\n  _getBaseSubjectName(name = '') {\r\n    return name.replace(/\\s+lab$/i, '').trim().toLowerCase();\r\n  }\r\n\r\n  _isSameBase(a = '', b = '') {\r\n    return this._getBaseSubjectName(a) === this._getBaseSubjectName(b);\r\n  }\r\n\r\n  _zone(period) {\r\n    if (period <= 1) return 'Early';\r\n    if (period <= 3) return 'Mid';\r\n    return 'Late';\r\n  }\r\n\r\n  validate() {\r\n    const errors = [];\r\n    if (!this.classes.length) errors.push('No classes defined');\r\n    if (!this.staff.filter(s => s?.role === 'staff').length) errors.push('No staff defined');\r\n    if (!this.subjects.length) errors.push('No subjects defined');\r\n\r\n    for (const cls of this.classes) {\r\n      const clsSubjects = this.subjects.filter(s => s?.className === cls.name);\r\n      const total = clsSubjects.reduce((sum, s) => sum + (s.hoursPerWeek || 0), 0);\r\n      if (total !== this.TOTAL_HOURS) {\r\n        errors.push(`Class \"$\\{cls.name}\": total hours $\\{total} != required $\\{this.TOTAL_HOURS}`);\r\n      }\r\n    }\r\n\r\n    const teacherHours = {};\r\n    for (const s of this.subjects) {\r\n      if (s.teacher && s.teacher !== '-') {\r\n        teacherHours[s.teacher] = (teacherHours[s.teacher] || 0) + (s.hoursPerWeek || 0);\r\n      }\r\n    }\r\n\r\n    for (const [t, h] of Object.entries(teacherHours)) {\r\n      if (h > this.MAX_TEACHER_HOURS) {\r\n        errors.push(`Teacher \"$\\{t}\" overload: $\\{h}h > $\\{this.MAX_TEACHER_HOURS}h`);\r\n      }\r\n    }\r\n\r\n    return errors.length ? { valid: false, errors } : { valid: true };\r\n  }\r\n\r\n  // NEW: Calculate class complexity score for sorting\r\n  _getClassComplexity(className) {\r\n    const clsSubjects = this.subjects.filter(s => s.className === className);\r\n    const labCount = clsSubjects.filter(s => s.isContinuous).length;\r\n    const uniqueTeachers = new Set(clsSubjects.map(s => s.teacher)).size;\r\n\r\n    // Higher score = more complex (process first)\r\n    return labCount * 10 + uniqueTeachers * 5 + clsSubjects.length;\r\n  }\r\n\r\n  generate() {\r\n    console.log('TimetableGenerator: start generate');\r\n    const v = this.validate();\r\n    if (!v.valid) {\r\n      console.error('Validation failed:', v.errors);\r\n      return { success: false, error: v.errors.join('; ') };\r\n    }\r\n\r\n    // NEW: Try generation with retries\r\n    for (let attempt = 0; attempt < this.maxRetries; attempt++) {\r\n      console.log(`Generation attempt $\\{attempt + 1}/$\\{this.maxRetries}`);\r\n\r\n      // Reset seed for each attempt\r\n      this._seed = Date.now() + attempt * 1000;\r\n\r\n      // Initialize structures\r\n      this.classTimetables = {};\r\n      this.teacherSlots = {};\r\n      this.globalLabDayCount = {};\r\n\r\n      this.classes.forEach(c => (this.classTimetables[c.name] = this.DAYS.map(() => Array(this.PERIODS).fill(null))));\r\n      this.staff.forEach(s => (this.teacherSlots[s.name] = {}));\r\n      this.DAYS.forEach(d => (this.globalLabDayCount[d] = 0));\r\n\r\n      // NEW: Sort classes by complexity (most complex first)\r\n      const sortedClasses = [...this.classes].sort((a, b) => {\r\n        return this._getClassComplexity(b.name) - this._getClassComplexity(a.name);\r\n      });\r\n\r\n      let ok = true;\r\n      for (const cls of sortedClasses) {\r\n        console.log('Generating for class', cls.name);\r\n        const success = this._generateForClass(cls.name);\r\n        if (!success) {\r\n          console.error(`Failed to generate for class $\\{cls.name} (attempt $\\{attempt + 1})`);\r\n          ok = false;\r\n          break;\r\n        }\r\n      }\r\n\r\n      if (ok) {\r\n        this._buildStaffTimetables();\r\n        this._validateTeacherConflicts();\r\n        console.log(' Generation successful!');\r\n        return { success: true, classTimetables: this.classTimetables, staffTimetables: this.staffTimetables };\r\n      }\r\n    }\r\n\r\n    console.error('Failed to generate timetable after all attempts');\r\n    return { success: false, error: 'Unable to generate valid timetable after multiple attempts' };\r\n  }\r\n\r\n  _buildStaffTimetables() {\r\n    this.staffTimetables = {};\r\n    for (const s of this.staff) {\r\n      if (!s?.name) continue;\r\n      this.staffTimetables[s.name] = this.DAYS.map(() => Array(this.PERIODS).fill({ subject: 'FREE', class: '-', type: 'free' }));\r\n    }\r\n\r\n    for (const [clsName, tt] of Object.entries(this.classTimetables)) {\r\n      tt.forEach((row, dayIdx) => {\r\n        row.forEach((slot, period) => {\r\n          if (slot && slot.teacher && slot.teacher !== '-' && this.staffTimetables[slot.teacher]) {\r\n            this.staffTimetables[slot.teacher][dayIdx][period] = {\r\n              subject: slot.subject,\r\n              class: clsName,\r\n              type: slot.type || 'core'\r\n            };\r\n          }\r\n        });\r\n      });\r\n    }\r\n  }\r\n\r\n  _validateTeacherConflicts() {\r\n    let conflicts = 0;\r\n    for (const [teacher, slots] of Object.entries(this.teacherSlots)) {\r\n      const counts = {};\r\n      for (const k of Object.keys(slots)) {\r\n        counts[k] = (counts[k] || 0) + 1;\r\n        if (counts[k] > 1) {\r\n          console.error(`Teacher conflict: $\\{teacher} at $\\{k}`);\r\n          conflicts++;\r\n        }\r\n      }\r\n    }\r\n    if (!conflicts) console.log('No teacher conflicts');\r\n  }\r\n\r\n  _generateForClass(className) {\r\n    const subjects = this.subjects.filter(s => s.className === className);\r\n    if (!subjects.length) return true;\r\n\r\n    const labs = subjects.filter(s => !!s.isContinuous);\r\n    const theory = subjects.filter(s => !s.isContinuous);\r\n    const tt = this.classTimetables[className];\r\n\r\n    const tracking = {\r\n      daysUsed: {},\r\n      dayPeriodMap: {},\r\n      periodWeeklyCount: {},\r\n      zonesUsed: {},\r\n      hoursPlaced: {},\r\n      lastPeriod: {},\r\n      subjectBaseDays: {}\r\n    };\r\n\r\n    for (const s of theory) {\r\n      tracking.daysUsed[s.name] = new Set();\r\n      tracking.dayPeriodMap[s.name] = {};\r\n      tracking.periodWeeklyCount[s.name] = Array(this.PERIODS).fill(0);\r\n      tracking.zonesUsed[s.name] = new Set();\r\n      tracking.hoursPlaced[s.name] = 0;\r\n      tracking.lastPeriod[s.name] = -1;\r\n      const baseName = this._getBaseSubjectName(s.name);\r\n      tracking.subjectBaseDays[baseName] = tracking.subjectBaseDays[baseName] || new Set();\r\n    }\r\n\r\n    const labTracking = {\r\n      daysUsedByLab: {},\r\n      periodsUsedByLab: {},\r\n      blockUsageCount: {},\r\n      hoursPlaced: {},\r\n      lastDayIdx: {}\r\n    };\r\n\r\n    const classLabDayCount = {};\r\n    for (let d = 0; d < this.DAYS.length; d++) classLabDayCount[d] = 0;\r\n\r\n    for (const lab of labs) {\r\n      labTracking.daysUsedByLab[lab.name] = new Set();\r\n      labTracking.periodsUsedByLab[lab.name] = new Set();\r\n      labTracking.blockUsageCount[lab.name] = {};\r\n      labTracking.hoursPlaced[lab.name] = 0;\r\n      labTracking.lastDayIdx[lab.name] = -1;\r\n    }\r\n\r\n    // PHASE A: Place labs\r\n    for (const lab of labs) {\r\n      const hours = lab.hoursPerWeek || 0;\r\n      const blocks = Math.floor(hours / 2);\r\n\r\n      for (let b = 0; b < blocks; b++) {\r\n        const ok = this._placeLabBlock_withMaxPerDay(className, lab, tt, labTracking, classLabDayCount);\r\n        if (!ok) {\r\n          console.error(`Impossible to place lab block for $\\{lab.name} in class $\\{className}`);\r\n          return false;\r\n        }\r\n        labTracking.hoursPlaced[lab.name] += 2;\r\n      }\r\n\r\n      if (hours % 2 === 1) {\r\n        const okSingle = this._placeLabSingle_withMaxPerDay(className, lab, tt, labTracking, classLabDayCount);\r\n        if (okSingle) {\r\n          labTracking.hoursPlaced[lab.name] += 1;\r\n        } else {\r\n          console.warn(`Single lab hour could not be placed immediately for $\\{lab.name} (class $\\{className})`);\r\n        }\r\n      }\r\n    }\r\n\r\n    // PHASE B: Non-lab distribution\r\n    const dailyFirst = theory.filter(s => (s.hoursPerWeek || 0) >= 5);\r\n    const otherTheory = theory.filter(s => (s.hoursPerWeek || 0) < 5);\r\n\r\n    for (const subj of dailyFirst) {\r\n      for (let dayIdx = 0; dayIdx < this.DAYS.length; dayIdx++) {\r\n        if (tracking.hoursPlaced[subj.name] >= subj.hoursPerWeek) break;\r\n        const res = this._placeTheoryDayPriority(className, subj, tt, tracking, labTracking, dayIdx);\r\n        if (res) tracking.hoursPlaced[subj.name] += 1;\r\n      }\r\n    }\r\n\r\n    const lowFirstSorted = [...otherTheory].sort((a, b) => (a.hoursPerWeek || 0) - (b.hoursPerWeek || 0));\r\n    for (const s of lowFirstSorted) {\r\n      let attempts = 0;\r\n      while (tracking.hoursPlaced[s.name] < (s.hoursPerWeek || 0) && attempts < 150) {\r\n        const ok = this._placeTheorySpread(className, s, tt, tracking, labTracking);\r\n        if (!ok) attempts++;\r\n        else tracking.hoursPlaced[s.name]++;\r\n      }\r\n    }\r\n\r\n    const remainingSubjects = [...dailyFirst, ...theory.filter(s => (s.hoursPerWeek || 0) > 5 && !dailyFirst.includes(s))]\r\n      .sort((a,b) => (b.hoursPerWeek || 0) - (a.hoursPerWeek || 0));\r\n\r\n    for (const s of remainingSubjects) {\r\n      let attempts = 0;\r\n      while (tracking.hoursPlaced[s.name] < (s.hoursPerWeek || 0) && attempts < 400) {\r\n        const ok = this._placeTheorySpread(className, s, tt, tracking, labTracking)\r\n          || this._placeTheoryRelaxed(className, s, tt, tracking, labTracking)\r\n          || this._placeTheoryForce(className, s, tt, tracking, labTracking);\r\n        if (!ok) attempts++;\r\n        else tracking.hoursPlaced[s.name]++;\r\n      }\r\n\r\n      // Ultra desperate phase with multiple attempts\r\n      while (tracking.hoursPlaced[s.name] < (s.hoursPerWeek || 0)) {\r\n        const ultra = this._ultraDesperatePlace(className, s, tt, tracking, labTracking);\r\n        if (!ultra) {\r\n          console.error(`IMPOSSIBLE: No free slots for $\\{s.name} (class $\\{className})`);\r\n          return false;\r\n        }\r\n        tracking.hoursPlaced[s.name]++;\r\n      }\r\n    }\r\n\r\n    const placed = this._countPlacedHours(className);\r\n    if (placed !== this.TOTAL_HOURS) {\r\n      console.error(`Class $\\{className} final hours $\\{placed} != $\\{this.TOTAL_HOURS}`);\r\n      return false;\r\n    }\r\n\r\n    return true;\r\n  }\r\n\r\n  _countPlacedHours(className) {\r\n    const tt = this.classTimetables[className];\r\n    let cnt = 0;\r\n    for (let d = 0; d < this.DAYS.length; d++) {\r\n      for (let p = 0; p < this.PERIODS; p++) {\r\n        if (tt[d][p]) cnt++;\r\n      }\r\n    }\r\n    return cnt;\r\n  }\r\n\r\n  _placeLabBlock_withMaxPerDay(className, lab, tt, labTracking, classLabDayCount) {\r\n    const teacher = lab.teacher;\r\n    const candidates = [];\r\n\r\n    for (const dayIdx of this._shuffle([0,1,2,3,4])) {\r\n      const currentLabPeriods = classLabDayCount[dayIdx] || 0;\r\n      if (currentLabPeriods >= 2) continue;\r\n\r\n      for (const startP of this._shuffle([0,1,2,3,4])) {\r\n        if (startP > this.PERIODS - 2) continue;\r\n        if (tt[dayIdx][startP] || tt[dayIdx][startP+1]) continue;\r\n\r\n        const slot1 = `$\\{this.DAYS[dayIdx]}-P$\\{startP+1}`;\r\n        const slot2 = `$\\{this.DAYS[dayIdx]}-P$\\{startP+2}`;\r\n        if (this.teacherSlots[teacher]?.[slot1] || this.teacherSlots[teacher]?.[slot2]) continue;\r\n        if (labTracking.daysUsedByLab[lab.name].has(dayIdx)) continue;\r\n\r\n        let score = 100;\r\n        if (!labTracking.daysUsedByLab[lab.name].has(dayIdx)) score += 80;\r\n\r\n        const blockKey = `P$\\{startP+1}-P$\\{startP+2}`;\r\n        const blockUse = labTracking.blockUsageCount[lab.name][blockKey] || 0;\r\n        if (blockUse === 0) score += 60;\r\n        else score -= blockUse * 50;\r\n\r\n        const dayName = this.DAYS[dayIdx];\r\n        const global = this.globalLabDayCount[dayName] || 0;\r\n        score += (2 - global) * 20;\r\n\r\n        candidates.push({ dayIdx, startP, score, blockKey });\r\n      }\r\n    }\r\n\r\n    if (!candidates.length) return false;\r\n\r\n    candidates.sort((a,b) => b.score - a.score);\r\n    const pick = this._pickRandomFromTopN(candidates, 6);\r\n    if (!pick) return false;\r\n\r\n    tt[pick.dayIdx][pick.startP] = { subject: lab.name, teacher, type: lab.subjectType || 'lab', isLab: true };\r\n    tt[pick.dayIdx][pick.startP+1] = { subject: lab.name, teacher, type: lab.subjectType || 'lab', isLab: true, isLabContinuation: true };\r\n\r\n    const slot1 = `$\\{this.DAYS[pick.dayIdx]}-P$\\{pick.startP+1}`;\r\n    const slot2 = `$\\{this.DAYS[pick.dayIdx]}-P$\\{pick.startP+2}`;\r\n    if (!this.teacherSlots[teacher]) this.teacherSlots[teacher] = {};\r\n    this.teacherSlots[teacher][slot1] = className;\r\n    this.teacherSlots[teacher][slot2] = className;\r\n\r\n    labTracking.daysUsedByLab[lab.name].add(pick.dayIdx);\r\n    labTracking.periodsUsedByLab[lab.name].add(pick.startP);\r\n    labTracking.blockUsageCount[lab.name][pick.blockKey] = (labTracking.blockUsageCount[lab.name][pick.blockKey] || 0) + 1;\r\n    labTracking.lastDayIdx[lab.name] = pick.dayIdx;\r\n\r\n    classLabDayCount[pick.dayIdx] = (classLabDayCount[pick.dayIdx] || 0) + 2;\r\n    this.globalLabDayCount[this.DAYS[pick.dayIdx]] = (this.globalLabDayCount[this.DAYS[pick.dayIdx]] || 0) + 1;\r\n\r\n    return true;\r\n  }\r\n\r\n  _placeLabSingle_withMaxPerDay(className, lab, tt, labTracking, classLabDayCount) {\r\n    const teacher = lab.teacher;\r\n    const candidates = [];\r\n\r\n    for (const dayIdx of this._shuffle([0,1,2,3,4])) {\r\n      const current = classLabDayCount[dayIdx] || 0;\r\n      if (current + 1 > 2) continue;\r\n\r\n      for (const p of this._shuffle([0,1,2,3,4,5])) {\r\n        if (tt[dayIdx][p]) continue;\r\n\r\n        const slot = `$\\{this.DAYS[dayIdx]}-P$\\{p+1}`;\r\n        if (this.teacherSlots[teacher]?.[slot]) continue;\r\n        if (labTracking.daysUsedByLab[lab.name].has(dayIdx)) continue;\r\n\r\n        let score = 80;\r\n        if (!labTracking.daysUsedByLab[lab.name].has(dayIdx)) score += 40;\r\n\r\n        candidates.push({ dayIdx, p, score });\r\n      }\r\n    }\r\n\r\n    if (!candidates.length) return false;\r\n\r\n    candidates.sort((a,b) => b.score - a.score);\r\n    const pick = this._pickRandomFromTopN(candidates, 6);\r\n    if (!pick) return false;\r\n\r\n    tt[pick.dayIdx][pick.p] = { subject: lab.name, teacher, type: lab.subjectType || 'lab', isLab: true, isLabSingle: true };\r\n\r\n    const slotKey = `$\\{this.DAYS[pick.dayIdx]}-P$\\{pick.p+1}`;\r\n    if (!this.teacherSlots[teacher]) this.teacherSlots[teacher] = {};\r\n    this.teacherSlots[teacher][slotKey] = className;\r\n\r\n    labTracking.daysUsedByLab[lab.name].add(pick.dayIdx);\r\n    labTracking.periodsUsedByLab[lab.name].add(pick.p);\r\n\r\n    classLabDayCount[pick.dayIdx] = (classLabDayCount[pick.dayIdx] || 0) + 1;\r\n    this.globalLabDayCount[this.DAYS[pick.dayIdx]] = (this.globalLabDayCount[this.DAYS[pick.dayIdx]] || 0) + 1;\r\n\r\n    return true;\r\n  }\r\n\r\n  _placeTheoryDayPriority(className, subj, tt, tracking, labTracking, dayIdxArg) {\r\n    const teacher = subj.teacher;\r\n    const dayIdx = dayIdxArg;\r\n    const dayName = this.DAYS[dayIdx];\r\n    const candidates = [];\r\n\r\n    for (const p of this._shuffle([0,1,2,3,4,5])) {\r\n      if (tt[dayIdx][p]) continue;\r\n\r\n      const slotKey = `$\\{dayName}-P$\\{p+1}`;\r\n      if (this.teacherSlots[teacher]?.[slotKey]) continue;\r\n\r\n      if (p > 0 && tt[dayIdx][p-1] && this._isSameBase(tt[dayIdx][p-1].subject, subj.name)) continue;\r\n      if (p < this.PERIODS -1 && tt[dayIdx][p+1] && this._isSameBase(tt[dayIdx][p+1].subject, subj.name)) continue;\r\n\r\n      if (dayIdx > 0 && tracking.dayPeriodMap[subj.name]?.[dayIdx-1] === p) continue;\r\n\r\n      const prevP = tracking.dayPeriodMap[subj.name]?.[dayIdx-1];\r\n      if (prevP !== undefined && prevP !== null) {\r\n        if (p === prevP - 1 || p === prevP + 1) continue;\r\n      }\r\n\r\n      let score = 100;\r\n      if (!tracking.periodWeeklyCount[subj.name]) {\r\n        tracking.periodWeeklyCount[subj.name] = Array(this.PERIODS).fill(0);\r\n      }\r\n      const useCount = tracking.periodWeeklyCount[subj.name][p] || 0;\r\n      score += (useCount === 0 ? 60 : -30 * useCount);\r\n      if (p >= 1 && p <= 4) score += 10;\r\n\r\n      candidates.push({ dayIdx, p, score, dayName });\r\n    }\r\n\r\n    if (!candidates.length) return false;\r\n\r\n    candidates.sort((a,b) => b.score - a.score);\r\n    const pick = this._pickRandomFromTopN(candidates, 6);\r\n    if (!pick) return false;\r\n\r\n    tt[pick.dayIdx][pick.p] = { subject: subj.name, teacher, type: subj.subjectType || 'core' };\r\n\r\n    const slotKey = `$\\{this.DAYS[pick.dayIdx]}-P$\\{pick.p+1}`;\r\n    if (!this.teacherSlots[teacher]) this.teacherSlots[teacher] = {};\r\n    this.teacherSlots[teacher][slotKey] = className;\r\n\r\n    tracking.daysUsed[subj.name].add(pick.dayIdx);\r\n    tracking.dayPeriodMap[subj.name][pick.dayIdx] = pick.p;\r\n    tracking.periodWeeklyCount[subj.name][pick.p] = (tracking.periodWeeklyCount[subj.name][pick.p] || 0) + 1;\r\n    tracking.zonesUsed[subj.name].add(this._zone(pick.p));\r\n    tracking.lastPeriod[subj.name] = pick.p;\r\n    tracking.subjectBaseDays[this._getBaseSubjectName(subj.name)].add(pick.dayIdx);\r\n\r\n    return true;\r\n  }\r\n\r\n  _placeTheorySpread(className, subj, tt, tracking, labTracking) {\r\n    const teacher = subj.teacher;\r\n    const candidates = [];\r\n\r\n    for (const dayIdx of this._shuffle([0,1,2,3,4])) {\r\n      for (const p of this._shuffle([0,1,2,3,4,5])) {\r\n        if (tt[dayIdx][p]) continue;\r\n\r\n        const slotKey = `$\\{this.DAYS[dayIdx]}-P$\\{p+1}`;\r\n        if (this.teacherSlots[teacher]?.[slotKey]) continue;\r\n\r\n        if (p > 0 && tt[dayIdx][p-1] && this._isSameBase(tt[dayIdx][p-1].subject, subj.name)) continue;\r\n        if (p < this.PERIODS -1 && tt[dayIdx][p+1] && this._isSameBase(tt[dayIdx][p+1].subject, subj.name)) continue;\r\n\r\n        if (dayIdx > 0 && tracking.dayPeriodMap[subj.name]?.[dayIdx-1] === p) continue;\r\n\r\n        const prevP = tracking.dayPeriodMap[subj.name]?.[dayIdx-1];\r\n        if (prevP !== undefined && prevP !== null) {\r\n          if (p === prevP - 1 || p === prevP + 1) continue;\r\n        }\r\n\r\n        if ((tracking.periodWeeklyCount[subj.name][p] || 0) >= 2) continue;\r\n\r\n        let score = 100;\r\n        if (!tracking.daysUsed[subj.name].has(dayIdx)) score += 50;\r\n\r\n        const z = this._zone(p);\r\n        if (!tracking.zonesUsed[subj.name].has(z)) score += 40;\r\n\r\n        const periodUsed = tracking.periodWeeklyCount[subj.name][p] || 0;\r\n        score += periodUsed === 0 ? 60 : -40 * periodUsed;\r\n\r\n        candidates.push({ dayIdx, p, score });\r\n      }\r\n    }\r\n\r\n    if (!candidates.length) return false;\r\n\r\n    candidates.sort((a,b) => b.score - a.score);\r\n    const pick = this._pickRandomFromTopN(candidates, 7);\r\n    if (!pick) return false;\r\n\r\n    tt[pick.dayIdx][pick.p] = { subject: subj.name, teacher, type: subj.subjectType || 'core' };\r\n\r\n    const slotKey = `$\\{this.DAYS[pick.dayIdx]}-P$\\{pick.p+1}`;\r\n    if (!this.teacherSlots[teacher]) this.teacherSlots[teacher] = {};\r\n    this.teacherSlots[teacher][slotKey] = className;\r\n\r\n    tracking.daysUsed[subj.name].add(pick.dayIdx);\r\n    tracking.dayPeriodMap[subj.name][pick.dayIdx] = pick.p;\r\n    tracking.periodWeeklyCount[subj.name][pick.p] = (tracking.periodWeeklyCount[subj.name][pick.p] || 0) + 1;\r\n    tracking.zonesUsed[subj.name].add(this._zone(pick.p));\r\n    tracking.lastPeriod[subj.name] = pick.p;\r\n    tracking.subjectBaseDays[this._getBaseSubjectName(subj.name)].add(pick.dayIdx);\r\n\r\n    return true;\r\n  }\r\n\r\n  _placeTheoryRelaxed(className, subj, tt, tracking, labTracking) {\r\n    const teacher = subj.teacher;\r\n    const candidates = [];\r\n\r\n    for (const dayIdx of this._shuffle([0,1,2,3,4])) {\r\n      for (const p of this._shuffle([0,1,2,3,4,5])) {\r\n        if (tt[dayIdx][p]) continue;\r\n\r\n        const slotKey = `$\\{this.DAYS[dayIdx]}-P$\\{p+1}`;\r\n        if (this.teacherSlots[teacher]?.[slotKey]) continue;\r\n\r\n        if (p > 0 && tt[dayIdx][p-1] && this._isSameBase(tt[dayIdx][p-1].subject, subj.name)) continue;\r\n        if (p < this.PERIODS -1 && tt[dayIdx][p+1] && this._isSameBase(tt[dayIdx][p+1].subject, subj.name)) continue;\r\n\r\n        const prevP = tracking.dayPeriodMap[subj.name]?.[dayIdx-1];\r\n        if (prevP !== undefined && prevP !== null) {\r\n          if (p === prevP - 1 || p === prevP + 1) continue;\r\n        }\r\n\r\n        if ((tracking.periodWeeklyCount[subj.name][p] || 0) >= 3) continue;\r\n\r\n        let score = 70;\r\n        if (!tracking.daysUsed[subj.name].has(dayIdx)) score += 40;\r\n\r\n        const z = this._zone(p);\r\n        if (!tracking.zonesUsed[subj.name].has(z)) score += 30;\r\n        score += (tracking.periodWeeklyCount[subj.name][p] ? -20 : 40);\r\n\r\n        candidates.push({ dayIdx, p, score });\r\n      }\r\n    }\r\n\r\n    if (!candidates.length) return false;\r\n\r\n    candidates.sort((a,b) => b.score - a.score);\r\n    const pick = this._pickRandomFromTopN(candidates, 9);\r\n    if (!pick) return false;\r\n\r\n    tt[pick.dayIdx][pick.p] = { subject: subj.name, teacher, type: subj.subjectType || 'core' };\r\n\r\n    const slotKey = `$\\{this.DAYS[pick.dayIdx]}-P$\\{pick.p+1}`;\r\n    if (!this.teacherSlots[teacher]) this.teacherSlots[teacher] = {};\r\n    this.teacherSlots[teacher][slotKey] = className;\r\n\r\n    tracking.daysUsed[subj.name].add(pick.dayIdx);\r\n    tracking.dayPeriodMap[subj.name][pick.dayIdx] = pick.p;\r\n    tracking.periodWeeklyCount[subj.name][pick.p] = (tracking.periodWeeklyCount[subj.name][pick.p] || 0) + 1;\r\n    tracking.zonesUsed[subj.name].add(this._zone(pick.p));\r\n    tracking.lastPeriod[subj.name] = pick.p;\r\n    tracking.subjectBaseDays[this._getBaseSubjectName(subj.name)].add(pick.dayIdx);\r\n\r\n    return true;\r\n  }\r\n\r\n  _placeTheoryForce(className, subj, tt, tracking, labTracking) {\r\n    const teacher = subj.teacher;\r\n\r\n    for (let dayIdx = 0; dayIdx < 5; dayIdx++) {\r\n      for (let p = 0; p < this.PERIODS; p++) {\r\n        if (tt[dayIdx][p]) continue;\r\n\r\n        const slotKey = `$\\{this.DAYS[dayIdx]}-P$\\{p+1}`;\r\n        if (this.teacherSlots[teacher]?.[slotKey]) continue;\r\n\r\n        if (p > 0 && tt[dayIdx][p-1] && this._isSameBase(tt[dayIdx][p-1].subject, subj.name)) continue;\r\n        if (p < this.PERIODS -1 && tt[dayIdx][p+1] && this._isSameBase(tt[dayIdx][p+1].subject, subj.name)) continue;\r\n\r\n        const prevP = tracking.dayPeriodMap[subj.name]?.[dayIdx-1];\r\n        if (prevP !== undefined && prevP !== null) {\r\n          if (p === prevP - 1 || p === prevP + 1) continue;\r\n        }\r\n\r\n        tt[dayIdx][p] = { subject: subj.name, teacher, type: subj.subjectType || 'core' };\r\n\r\n        if (!this.teacherSlots[teacher]) this.teacherSlots[teacher] = {};\r\n        this.teacherSlots[teacher][slotKey] = className;\r\n\r\n        tracking.daysUsed[subj.name].add(dayIdx);\r\n        tracking.dayPeriodMap[subj.name][dayIdx] = p;\r\n        tracking.periodWeeklyCount[subj.name][p] = (tracking.periodWeeklyCount[subj.name][p] || 0) + 1;\r\n        tracking.zonesUsed[subj.name].add(this._zone(p));\r\n        tracking.lastPeriod[subj.name] = p;\r\n        tracking.subjectBaseDays[this._getBaseSubjectName(subj.name)].add(dayIdx);\r\n\r\n        return true;\r\n      }\r\n    }\r\n\r\n    return false;\r\n  }\r\n\r\n  // FIXED: Completely relaxed ultra desperate placement\r\n  _ultraDesperatePlace(className, subj, tt, tracking, labTracking) {\r\n    const teacher = subj.teacher;\r\n\r\n    // First pass: Try with minimal constraints\r\n    for (let dayIdx = 0; dayIdx < 5; dayIdx++) {\r\n      for (let p = 0; p < this.PERIODS; p++) {\r\n        if (tt[dayIdx][p]) continue;\r\n\r\n        const slotKey = `$\\{this.DAYS[dayIdx]}-P$\\{p+1}`;\r\n        if (this.teacherSlots[teacher]?.[slotKey]) continue;\r\n\r\n        // Only check adjacent same base (still avoid back-to-back)\r\n        if (p > 0 && tt[dayIdx][p-1] && this._isSameBase(tt[dayIdx][p-1].subject, subj.name)) continue;\r\n        if (p < this.PERIODS -1 && tt[dayIdx][p+1] && this._isSameBase(tt[dayIdx][p+1].subject, subj.name)) continue;\r\n\r\n        tt[dayIdx][p] = { subject: subj.name, teacher, type: subj.subjectType || 'core', isUltra: true };\r\n\r\n        if (!this.teacherSlots[teacher]) this.teacherSlots[teacher] = {};\r\n        this.teacherSlots[teacher][slotKey] = className;\r\n\r\n        tracking.daysUsed[subj.name].add(dayIdx);\r\n        tracking.dayPeriodMap[subj.name][dayIdx] = p;\r\n        tracking.periodWeeklyCount[subj.name][p] = (tracking.periodWeeklyCount[subj.name][p] || 0) + 1;\r\n        tracking.zonesUsed[subj.name].add(this._zone(p));\r\n        tracking.lastPeriod[subj.name] = p;\r\n        tracking.subjectBaseDays[this._getBaseSubjectName(subj.name)].add(dayIdx);\r\n\r\n        return true;\r\n      }\r\n    }\r\n\r\n    // Second pass: Completely desperate - only check teacher conflicts and slot availability\r\n    for (let dayIdx = 0; dayIdx < 5; dayIdx++) {\r\n      for (let p = 0; p < this.PERIODS; p++) {\r\n        if (tt[dayIdx][p]) continue;\r\n\r\n        const slotKey = `$\\{this.DAYS[dayIdx]}-P$\\{p+1}`;\r\n        if (this.teacherSlots[teacher]?.[slotKey]) continue;\r\n\r\n        // Place without any other constraints\r\n        tt[dayIdx][p] = { subject: subj.name, teacher, type: subj.subjectType || 'core', isUltra: true };\r\n\r\n        if (!this.teacherSlots[teacher]) this.teacherSlots[teacher] = {};\r\n        this.teacherSlots[teacher][slotKey] = className;\r\n\r\n        tracking.daysUsed[subj.name].add(dayIdx);\r\n        tracking.dayPeriodMap[subj.name][dayIdx] = p;\r\n        tracking.periodWeeklyCount[subj.name][p] = (tracking.periodWeeklyCount[subj.name][p] || 0) + 1;\r\n        tracking.zonesUsed[subj.name].add(this._zone(p));\r\n        tracking.lastPeriod[subj.name] = p;\r\n        tracking.subjectBaseDays[this._getBaseSubjectName(subj.name)].add(dayIdx);\r\n\r\n        return true;\r\n      }\r\n    }\r\n\r\n    return false;\r\n  }\r\n}\r\n"],"names":["$parcel$export","e","n","v","s","Object","defineProperty","get","set","enumerable","configurable","parcelRequire","$parcel$global","globalThis","parcelRegister","register","module","exports","value","$9b678cdbbac6dec2$export$2e2bcd8739ae039","$ayMG0","$acw62","$aOD4d","$2A5UH","$4XiCD","$e3nvF","$hyYFF","$gqAsg","$bU9CP","$fAZ67","$6AR8M","$ilpIi","user","onLogout","classes","setClasses","useState","staff","setStaff","subjects","setSubjects","timetable","setTimetable","toasts","setToasts","loading","setLoading","showAddStaffForm","setShowAddStaffForm","showAddSubjectForm","setShowAddSubjectForm","showAddClassForm","setShowAddClassForm","activeTab","setActiveTab","useEffect","window","scrollTo","top","left","behavior","staffFormRef","useRef","subjectFormRef","newClass","setNewClass","name","hallNumber","newStaff","setNewStaff","id","username","password","freePeriodMode","manualFreePeriods","newSubject","setNewSubject","className","subjectType","hoursPerWeek","isContinuous","blockSize","teacher","teachers","filter","role","showToast","message","type","duration","undoAction","newToast","Date","now","prev","setTimeout","removeToast","t","convertFlatToNested","flatTimetable","nested","keys","forEach","key","slots","Array","isArray","length","days","slot","day","period","subject","class","idx","p","undefined","fetchData","cls","st","sb","tt","Promise","all","getDocs","collection","db","docs","map","doc","data","empty","ttData","convertedData","classTimetables","staffTimetables","error","console","restoreFromUndo","undoItem","classData","setDoc","staffData","firebaseUid","subjectData","updatedClassTimetables","ttRef","existing","updateDoc","addClass","find","c","docRef","addDoc","deleteClass","confirm","classToDelete","deleteDoc","addOrUpdateStaff","staffToUpdate","updateData","firestoreUpdateData","trim","tempPassword","passwordLastChanged","toISOString","needsPasswordChange","resetStaffForm","email","uid","userCredential","createUserWithEmailAndPassword","auth","deleteStaff","staffToDelete","x","addOrUpdateSubject","resetSubjectForm","deleteSubject","subjectToDelete","deleteClassTimetable","deletedTimetableData","generateTimetable","generator","TimetableGenerator","validation","validate","valid","errors","result","generate","success","serializableClassTimetables","serializableStaffTimetables","dayIndex","periodIndex","flat","staffName","timetableData","generatedAt","staffTT","displayClassTimetables","displayStaffTimetables","document","getElementById","scrollIntoView","jsx","default","variant","colorScheme","interactive","children","jsxs","style","display","flexDirection","justifyContent","alignItems","height","color","fontSize","gap","onClick","textAlign","padding","Fragment","sorted","sort","a","b","localeCompare","classSubjects","totalHours","reduce","sum","progress","marginBottom","flexWrap","margin","fontWeight","Math","max","width","backgroundColor","borderRadius","overflow","min","transition","title","marginTop","onChange","target","toUpperCase","placeholder","current","block","ref","parseInt","sub","checked","htmlFor","disabled","exportToPDF","ToastContainer","onRemove","$e0e81a01ed643521$export$f2815235e76a62b9","$e0e81a01ed643521$export$8d8dc7d5f743331b","background","boxShadow","animation","marginLeft","border","cursor","lineHeight","position","right","zIndex","minWidth","maxWidth","toast","$511984d6a1a2608c$export$2e2bcd8739ae039","teachingHours","freePeriods","status","$0e552b1b7a884617$export$2e2bcd8739ae039","$0e552b1b7a884617$var$DAYS","grid","log","_","i","__esModule","toLowerCase","$81aa4954b90786d4$export$2e2bcd8739ae039","periods","staffSchedule","dayIdx","periodIdx","isFree","join","$a77c14b5958cefc4$export$21295ca23168aa6a","teacherSlots","DAYS","PERIODS","TOTAL_HOURS","MAX_TEACHER_HOURS","globalLabDayCount","_seed","maxRetries","_random","_shuffle","arr","j","floor","_pickRandomFromTopN","candidates","topN","slice","_getBaseSubjectName","replace","_isSameBase","_zone","push","total","clsSubjects","teacherHours","h","entries","_getClassComplexity","labCount","uniqueTeachers","Set","size","attempt","fill","d","sortedClasses","ok","_generateForClass","_buildStaffTimetables","_validateTeacherConflicts","clsName","row","conflicts","counts","k","labs","theory","tracking","daysUsed","dayPeriodMap","periodWeeklyCount","zonesUsed","hoursPlaced","lastPeriod","subjectBaseDays","baseName","labTracking","daysUsedByLab","periodsUsedByLab","blockUsageCount","lastDayIdx","classLabDayCount","lab","hours","blocks","_placeLabBlock_withMaxPerDay","_placeLabSingle_withMaxPerDay","warn","dailyFirst","otherTheory","subj","res","_placeTheoryDayPriority","attempts","_placeTheorySpread","includes","_placeTheoryRelaxed","_placeTheoryForce","_ultraDesperatePlace","_countPlacedHours","cnt","currentLabPeriods","startP","has","score","blockKey","blockUse","dayName","pick","isLab","isLabContinuation","add","isLabSingle","dayIdxArg","prevP","useCount","z","periodUsed","slotKey","isUltra"],"version":3,"file":"AdminDashboard.4cb81e05.js.map"}