{"mappings":"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","sources":["<anon>","src/components/StaffDashboard.jsx","src/components/StaffTimetableGrid.jsx"],"sourcesContent":["\nfunction $parcel$defineInteropFlag(a) {\n  Object.defineProperty(a, '__esModule', {value: true, configurable: true});\n}\n\nfunction $parcel$export(e, n, v, s) {\n  Object.defineProperty(e, n, {get: v, set: s, enumerable: true, configurable: true});\n}\n\nfunction $parcel$interopDefault(a) {\n  return a && a.__esModule ? a.default : a;\n}\n\n      var $parcel$global = globalThis;\n    var parcelRequire = $parcel$global[\"parcelRequire3f2f\"];\nvar parcelRegister = parcelRequire.register;\nparcelRegister(\"45vda\", function(module, exports) {\n\n$parcel$defineInteropFlag(module.exports);\n\n$parcel$export(module.exports, \"default\", () => $c55c51dd2de99fec$export$2e2bcd8739ae039);\n\nvar $ayMG0 = parcelRequire(\"ayMG0\");\n\nvar $acw62 = parcelRequire(\"acw62\");\n\nvar $aOD4d = parcelRequire(\"aOD4d\");\n\nvar $hyYFF = parcelRequire(\"hyYFF\");\n\nvar $iFlyT = parcelRequire(\"iFlyT\");\n\nvar $gqAsg = parcelRequire(\"gqAsg\");\nfunction $c55c51dd2de99fec$export$2e2bcd8739ae039({ user: user, onLogout: onLogout }) {\n    // FIX 1: Get the complete timetable object\n    const [timetableData] = (0, $acw62.useState)((0, $iFlyT.Storage).get('timetable'));\n    // FIX 2: Extract staffTimetables from the timetable object\n    const staffTimetables = timetableData?.staffTimetables || null;\n    return /*#__PURE__*/ (0, $ayMG0.jsxs)((0, $ayMG0.Fragment), {\n        children: [\n            /*#__PURE__*/ (0, $ayMG0.jsx)((0, $aOD4d.default), {}),\n            /*#__PURE__*/ (0, $ayMG0.jsx)(\"div\", {\n                className: \"header\",\n                children: /*#__PURE__*/ (0, $ayMG0.jsxs)(\"div\", {\n                    className: \"header-content\",\n                    children: [\n                        /*#__PURE__*/ (0, $ayMG0.jsx)(\"h1\", {\n                            children: \"\\uD83D\\uDC68\\u200D\\uD83C\\uDFEB Staff Dashboard\"\n                        }),\n                        /*#__PURE__*/ (0, $ayMG0.jsxs)(\"div\", {\n                            className: \"header-actions\",\n                            children: [\n                                /*#__PURE__*/ (0, $ayMG0.jsx)(\"button\", {\n                                    className: \"theme-toggle\",\n                                    children: \"\\uD83C\\uDF19\"\n                                }),\n                                /*#__PURE__*/ (0, $ayMG0.jsx)(\"button\", {\n                                    className: \"btn btn-danger btn-sm\",\n                                    onClick: onLogout,\n                                    children: \"Logout\"\n                                })\n                            ]\n                        })\n                    ]\n                })\n            }),\n            /*#__PURE__*/ (0, $ayMG0.jsx)(\"div\", {\n                className: \"content\",\n                children: /*#__PURE__*/ (0, $ayMG0.jsxs)(\"div\", {\n                    className: \"section\",\n                    children: [\n                        /*#__PURE__*/ (0, $ayMG0.jsxs)(\"div\", {\n                            className: \"section-header\",\n                            children: [\n                                /*#__PURE__*/ (0, $ayMG0.jsx)(\"span\", {\n                                    className: \"section-icon\",\n                                    children: \"\\uD83D\\uDCC5\"\n                                }),\n                                /*#__PURE__*/ (0, $ayMG0.jsx)(\"h2\", {\n                                    className: \"section-title\",\n                                    children: \"My Timetable\"\n                                })\n                            ]\n                        }),\n                        /*#__PURE__*/ (0, $ayMG0.jsx)(\"div\", {\n                            className: \"card\",\n                            children: !staffTimetables ? /*#__PURE__*/ (0, $ayMG0.jsxs)(\"div\", {\n                                style: {\n                                    padding: '60px 20px',\n                                    textAlign: 'center'\n                                },\n                                children: [\n                                    /*#__PURE__*/ (0, $ayMG0.jsx)(\"div\", {\n                                        style: {\n                                            fontSize: '60px',\n                                            marginBottom: '20px'\n                                        },\n                                        children: \"\\uD83D\\uDCCB\"\n                                    }),\n                                    /*#__PURE__*/ (0, $ayMG0.jsx)(\"h3\", {\n                                        style: {\n                                            marginBottom: '10px',\n                                            color: '#1e293b'\n                                        },\n                                        children: \"No Timetable Generated\"\n                                    }),\n                                    /*#__PURE__*/ (0, $ayMG0.jsx)(\"p\", {\n                                        style: {\n                                            color: '#64748b'\n                                        },\n                                        children: \"Please contact the administrator to generate a timetable.\"\n                                    })\n                                ]\n                            }) : /*#__PURE__*/ (0, $ayMG0.jsxs)((0, $ayMG0.Fragment), {\n                                children: [\n                                    /*#__PURE__*/ (0, $ayMG0.jsx)((0, $hyYFF.default), {\n                                        timetable: staffTimetables,\n                                        staffName: user.name\n                                    }),\n                                    /*#__PURE__*/ (0, $ayMG0.jsxs)(\"div\", {\n                                        style: {\n                                            marginTop: '20px',\n                                            display: 'flex',\n                                            gap: '10px'\n                                        },\n                                        className: \"no-print\",\n                                        children: [\n                                            /*#__PURE__*/ (0, $ayMG0.jsx)(\"button\", {\n                                                className: \"btn btn-primary btn-sm\",\n                                                onClick: ()=>(0, $gqAsg.exportToPDF)('staff-timetable-export', `${user.name}_Timetable.pdf`),\n                                                children: \"\\uD83D\\uDCC4 Download PDF\"\n                                            }),\n                                            /*#__PURE__*/ (0, $ayMG0.jsx)(\"button\", {\n                                                className: \"btn btn-primary btn-sm\",\n                                                onClick: ()=>window.print(),\n                                                children: \"\\uD83D\\uDDA8\\uFE0F Print\"\n                                            })\n                                        ]\n                                    })\n                                ]\n                            })\n                        })\n                    ]\n                })\n            })\n        ]\n    });\n}\n\n});\nparcelRegister(\"hyYFF\", function(module, exports) {\n\n$parcel$export(module.exports, \"default\", () => $81aa4954b90786d4$export$2e2bcd8739ae039);\n\nvar $ayMG0 = parcelRequire(\"ayMG0\");\n\nvar $acw62 = parcelRequire(\"acw62\");\nconst $81aa4954b90786d4$var$DAYS = [\n    'Monday',\n    'Tuesday',\n    'Wednesday',\n    'Thursday',\n    'Friday'\n];\nfunction $81aa4954b90786d4$export$2e2bcd8739ae039({ timetable: timetable, staffName: staffName }) {\n    // Debug logging\n    console.log('=== StaffTimetableGrid Debug ===');\n    console.log('Received timetable:', timetable);\n    console.log('Received staffName:', staffName);\n    console.log('timetable keys:', timetable ? Object.keys(timetable) : 'timetable is null');\n    // Check if timetable exists\n    if (!timetable) {\n        console.warn('No timetable data received');\n        return /*#__PURE__*/ (0, $ayMG0.jsxs)(\"div\", {\n            style: {\n                padding: '40px',\n                textAlign: 'center',\n                color: '#64748b'\n            },\n            children: [\n                /*#__PURE__*/ (0, $ayMG0.jsx)(\"p\", {\n                    children: \"No timetable data available\"\n                }),\n                /*#__PURE__*/ (0, $ayMG0.jsx)(\"p\", {\n                    style: {\n                        fontSize: '14px',\n                        marginTop: '10px'\n                    },\n                    children: \"Please generate a timetable first from the Admin Dashboard\"\n                })\n            ]\n        });\n    }\n    // Check if staff timetable exists\n    if (!timetable[staffName]) {\n        console.warn(`No timetable found for staff: ${staffName}`);\n        console.log('Available staff timetables:', Object.keys(timetable));\n        return /*#__PURE__*/ (0, $ayMG0.jsxs)(\"div\", {\n            style: {\n                padding: '40px',\n                textAlign: 'center',\n                color: '#64748b'\n            },\n            children: [\n                /*#__PURE__*/ (0, $ayMG0.jsxs)(\"p\", {\n                    children: [\n                        \"No timetable available for \",\n                        staffName\n                    ]\n                }),\n                /*#__PURE__*/ (0, $ayMG0.jsx)(\"p\", {\n                    style: {\n                        fontSize: '14px',\n                        marginTop: '10px'\n                    },\n                    children: \"Timetable may not have been generated yet or you are not assigned any classes.\"\n                })\n            ]\n        });\n    }\n    const grid = timetable[staffName];\n    // Validate grid structure\n    console.log('Grid data:', grid);\n    console.log('Grid is array?', Array.isArray(grid));\n    console.log('Grid length:', grid ? grid.length : 0);\n    if (!Array.isArray(grid) || grid.length === 0) {\n        console.error('Invalid grid structure');\n        return /*#__PURE__*/ (0, $ayMG0.jsxs)(\"div\", {\n            style: {\n                padding: '40px',\n                textAlign: 'center',\n                color: '#64748b'\n            },\n            children: [\n                /*#__PURE__*/ (0, $ayMG0.jsx)(\"p\", {\n                    children: \"Invalid timetable format\"\n                }),\n                /*#__PURE__*/ (0, $ayMG0.jsx)(\"p\", {\n                    style: {\n                        fontSize: '14px',\n                        marginTop: '10px'\n                    },\n                    children: \"Please regenerate the timetable from Admin Dashboard\"\n                })\n            ]\n        });\n    }\n    console.log('Rendering timetable grid...');\n    return /*#__PURE__*/ (0, $ayMG0.jsxs)(\"div\", {\n        id: \"staff-timetable-export\",\n        className: \"timetable-grid\",\n        children: [\n            /*#__PURE__*/ (0, $ayMG0.jsx)(\"div\", {\n                className: \"timetable-header\",\n                children: \"Day/Period\"\n            }),\n            [\n                ...Array(6)\n            ].map((_, i)=>/*#__PURE__*/ (0, $ayMG0.jsxs)(\"div\", {\n                    className: \"timetable-header\",\n                    children: [\n                        \"P\",\n                        i + 1\n                    ]\n                }, i)),\n            $81aa4954b90786d4$var$DAYS.map((day, dayIndex)=>{\n                // Safety check for each day\n                if (!grid[dayIndex] || !Array.isArray(grid[dayIndex])) {\n                    console.warn(`Invalid data for day ${day} (index ${dayIndex})`);\n                    return null;\n                }\n                return /*#__PURE__*/ (0, $ayMG0.jsxs)((0, (/*@__PURE__*/$parcel$interopDefault($acw62))).Fragment, {\n                    children: [\n                        /*#__PURE__*/ (0, $ayMG0.jsx)(\"div\", {\n                            className: \"timetable-day\",\n                            children: day\n                        }),\n                        grid[dayIndex].map((slot, periodIndex)=>{\n                            // Safety check for slot\n                            if (!slot) return /*#__PURE__*/ (0, $ayMG0.jsx)(\"div\", {\n                                className: \"timetable-cell subject-free\",\n                                children: /*#__PURE__*/ (0, $ayMG0.jsx)(\"div\", {\n                                    style: {\n                                        color: '#94a3b8'\n                                    },\n                                    children: \"FREE\"\n                                })\n                            }, periodIndex);\n                            const subjectType = slot.type ? slot.type.toLowerCase() : 'free';\n                            const isFree = slot.subject === 'FREE' || !slot.subject;\n                            return /*#__PURE__*/ (0, $ayMG0.jsx)(\"div\", {\n                                className: `timetable-cell subject-${subjectType}`,\n                                children: !isFree ? /*#__PURE__*/ (0, $ayMG0.jsxs)((0, $ayMG0.Fragment), {\n                                    children: [\n                                        /*#__PURE__*/ (0, $ayMG0.jsx)(\"div\", {\n                                            className: \"subject-name\",\n                                            children: slot.subject\n                                        }),\n                                        /*#__PURE__*/ (0, $ayMG0.jsx)(\"div\", {\n                                            className: \"teacher-name\",\n                                            children: slot.class || '-'\n                                        })\n                                    ]\n                                }) : /*#__PURE__*/ (0, $ayMG0.jsx)(\"div\", {\n                                    style: {\n                                        color: '#94a3b8',\n                                        fontWeight: '500'\n                                    },\n                                    children: \"FREE\"\n                                })\n                            }, periodIndex);\n                        })\n                    ]\n                }, day);\n            })\n        ]\n    });\n}\n\n});\n\n\n\n//# sourceMappingURL=StaffDashboard.18bff46a.js.map\n","import React, { useState } from 'react';\r\nimport AnimatedBackground from './AnimatedBackground';\r\nimport StaffTimetableGrid from './StaffTimetableGrid';\r\nimport { Storage } from '../utils/storage';\r\nimport { exportToPDF } from '../utils/pdfUtils';\r\n\r\nexport default function StaffDashboard({ user, onLogout }) {\r\n    // FIX 1: Get the complete timetable object\r\n    const [timetableData] = useState(Storage.get('timetable'));\r\n\r\n    // FIX 2: Extract staffTimetables from the timetable object\r\n    const staffTimetables = timetableData?.staffTimetables || null;\r\n\r\n    return (\r\n        <>\r\n            <AnimatedBackground />\r\n            <div className=\"header\">\r\n                <div className=\"header-content\">\r\n                    <h1>üë®‚Äçüè´ Staff Dashboard</h1>\r\n                    <div className=\"header-actions\">\r\n                        <button className=\"theme-toggle\">üåô</button>\r\n                        <button className=\"btn btn-danger btn-sm\" onClick={onLogout}>\r\n                            Logout\r\n                        </button>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n            <div className=\"content\">\r\n                <div className=\"section\">\r\n                    <div className=\"section-header\">\r\n                        <span className=\"section-icon\">üìÖ</span>\r\n                        <h2 className=\"section-title\">My Timetable</h2>\r\n                    </div>\r\n\r\n                    <div className=\"card\">\r\n                        {!staffTimetables ? (\r\n                            <div style={{padding: '60px 20px', textAlign: 'center'}}>\r\n                                <div style={{fontSize: '60px', marginBottom: '20px'}}>üìã</div>\r\n                                <h3 style={{marginBottom: '10px', color: '#1e293b'}}>\r\n                                    No Timetable Generated\r\n                                </h3>\r\n                                <p style={{color: '#64748b'}}>\r\n                                    Please contact the administrator to generate a timetable.\r\n                                </p>\r\n                            </div>\r\n                        ) : (\r\n                            <>\r\n                                {/* FIX 3: Pass staffTimetables correctly */}\r\n                                <StaffTimetableGrid \r\n                                    timetable={staffTimetables} \r\n                                    staffName={user.name} \r\n                                />\r\n                                <div \r\n                                    style={{marginTop: '20px', display: 'flex', gap: '10px'}} \r\n                                    className=\"no-print\"\r\n                                >\r\n                                    <button \r\n                                        className=\"btn btn-primary btn-sm\"\r\n                                        onClick={() => exportToPDF(\r\n                                            'staff-timetable-export', \r\n                                            `${user.name}_Timetable.pdf`\r\n                                        )}\r\n                                    >\r\n                                        üìÑ Download PDF\r\n                                    </button>\r\n                                    <button \r\n                                        className=\"btn btn-primary btn-sm\"\r\n                                        onClick={() => window.print()}\r\n                                    >\r\n                                        üñ®Ô∏è Print\r\n                                    </button>\r\n                                </div>\r\n                            </>\r\n                        )}\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </>\r\n    );\r\n}","import React from 'react';\r\n\r\nconst DAYS = ['Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday'];\r\n\r\nexport default function StaffTimetableGrid({ timetable, staffName }) {\r\n    // Debug logging\r\n    console.log('=== StaffTimetableGrid Debug ===');\r\n    console.log('Received timetable:', timetable);\r\n    console.log('Received staffName:', staffName);\r\n    console.log('timetable keys:', timetable ? Object.keys(timetable) : 'timetable is null');\r\n\r\n    // Check if timetable exists\r\n    if (!timetable) {\r\n        console.warn('No timetable data received');\r\n        return (\r\n            <div style={{padding: '40px', textAlign: 'center', color: '#64748b'}}>\r\n                <p>No timetable data available</p>\r\n                <p style={{fontSize: '14px', marginTop: '10px'}}>\r\n                    Please generate a timetable first from the Admin Dashboard\r\n                </p>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    // Check if staff timetable exists\r\n    if (!timetable[staffName]) {\r\n        console.warn(`No timetable found for staff: ${staffName}`);\r\n        console.log('Available staff timetables:', Object.keys(timetable));\r\n        return (\r\n            <div style={{padding: '40px', textAlign: 'center', color: '#64748b'}}>\r\n                <p>No timetable available for {staffName}</p>\r\n                <p style={{fontSize: '14px', marginTop: '10px'}}>\r\n                    Timetable may not have been generated yet or you are not assigned any classes.\r\n                </p>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    const grid = timetable[staffName];\r\n\r\n    // Validate grid structure\r\n    console.log('Grid data:', grid);\r\n    console.log('Grid is array?', Array.isArray(grid));\r\n    console.log('Grid length:', grid ? grid.length : 0);\r\n\r\n    if (!Array.isArray(grid) || grid.length === 0) {\r\n        console.error('Invalid grid structure');\r\n        return (\r\n            <div style={{padding: '40px', textAlign: 'center', color: '#64748b'}}>\r\n                <p>Invalid timetable format</p>\r\n                <p style={{fontSize: '14px', marginTop: '10px'}}>\r\n                    Please regenerate the timetable from Admin Dashboard\r\n                </p>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    console.log('Rendering timetable grid...');\r\n\r\n    return (\r\n        <div id=\"staff-timetable-export\" className=\"timetable-grid\">\r\n            {/* Header Row */}\r\n            <div className=\"timetable-header\">Day/Period</div>\r\n            {[...Array(6)].map((_, i) => (\r\n                <div key={i} className=\"timetable-header\">P{i + 1}</div>\r\n            ))}\r\n\r\n            {/* Timetable Rows */}\r\n            {DAYS.map((day, dayIndex) => {\r\n                // Safety check for each day\r\n                if (!grid[dayIndex] || !Array.isArray(grid[dayIndex])) {\r\n                    console.warn(`Invalid data for day ${day} (index ${dayIndex})`);\r\n                    return null;\r\n                }\r\n\r\n                return (\r\n                    <React.Fragment key={day}>\r\n                        <div className=\"timetable-day\">{day}</div>\r\n                        {grid[dayIndex].map((slot, periodIndex) => {\r\n                            // Safety check for slot\r\n                            if (!slot) {\r\n                                return (\r\n                                    <div key={periodIndex} className=\"timetable-cell subject-free\">\r\n                                        <div style={{ color: '#94a3b8' }}>FREE</div>\r\n                                    </div>\r\n                                );\r\n                            }\r\n\r\n                            const subjectType = slot.type ? slot.type.toLowerCase() : 'free';\r\n                            const isFree = slot.subject === 'FREE' || !slot.subject;\r\n\r\n                            return (\r\n                                <div \r\n                                    key={periodIndex} \r\n                                    className={`timetable-cell subject-${subjectType}`}\r\n                                >\r\n                                    {!isFree ? (\r\n                                        <>\r\n                                            <div className=\"subject-name\">\r\n                                                {slot.subject}\r\n                                            </div>\r\n                                            <div className=\"teacher-name\">\r\n                                                {slot.class || '-'}\r\n                                            </div>\r\n                                        </>\r\n                                    ) : (\r\n                                        <div style={{ color: '#94a3b8', fontWeight: '500' }}>\r\n                                            FREE\r\n                                        </div>\r\n                                    )}\r\n                                </div>\r\n                            );\r\n                        })}\r\n                    </React.Fragment>\r\n                );\r\n            })}\r\n        </div>\r\n    );\r\n}"],"names":["$parcel$export","e","n","v","s","Object","defineProperty","get","set","enumerable","configurable","parcelRequire","$parcel$global","globalThis","parcelRegister","register","module","exports","value","$c55c51dd2de99fec$export$2e2bcd8739ae039","$ayMG0","$acw62","$aOD4d","$hyYFF","$iFlyT","$gqAsg","user","onLogout","timetableData","useState","Storage","staffTimetables","jsxs","Fragment","children","jsx","default","className","onClick","timetable","staffName","name","style","marginTop","display","gap","exportToPDF","window","print","padding","textAlign","fontSize","marginBottom","color","$81aa4954b90786d4$export$2e2bcd8739ae039","$81aa4954b90786d4$var$DAYS","console","log","keys","warn","grid","Array","isArray","length","id","map","_","i","day","dayIndex","a","__esModule","slot","periodIndex","subjectType","type","toLowerCase","isFree","subject","fontWeight","class","error"],"version":3,"file":"StaffDashboard.18bff46a.js.map"}