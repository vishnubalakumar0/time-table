function e(e,s,t,a){Object.defineProperty(e,s,{get:t,set:a,enumerable:!0,configurable:!0})}var s=globalThis.parcelRequireb79f,t=s.register;t("45vda",function(t,a){Object.defineProperty(t.exports,"__esModule",{value:!0,configurable:!0}),e(t.exports,"default",()=>m);var l=s("ayMG0"),n=s("acw62"),i=s("aOD4d"),r=s("hyYFF"),c=s("gqAsg"),d=s("fAZ67"),o=s("ilpIi");function m({user:e,onLogout:s}){let[t,a]=(0,n.useState)(null),[m,h]=(0,n.useState)(!0);return((0,n.useEffect)(()=>{(async()=>{try{let e=await (0,o.getDocs)((0,o.collection)(d.db,"timetable"));if(!e.empty){let s=e.docs[0].data(),t={};s.staffTimetables&&Object.keys(s.staffTimetables).forEach(e=>{let a=s.staffTimetables[e],l=[[],[],[],[],[]];a.forEach(e=>{e&&"number"==typeof e.day&&"number"==typeof e.period&&(l[e.day]||(l[e.day]=[]),l[e.day][e.period]={subject:e.subject,class:e.class,type:e.type})}),l.forEach((e,s)=>{l[s]||(l[s]=[]);for(let e=0;e<6;e++)l[s][e]||(l[s][e]={subject:"FREE",class:"-",type:"free"})}),t[e]=l}),a(t)}}catch(e){console.error("Error fetching timetable:",e)}finally{h(!1)}})()},[e]),m)?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(i.default,{}),(0,l.jsx)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"100vh"},children:(0,l.jsxs)("div",{style:{textAlign:"center"},children:[(0,l.jsx)("div",{style:{fontSize:"48px",marginBottom:"20px"},children:"‚è≥"}),(0,l.jsx)("h2",{children:"Loading..."})]})})]}):(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(i.default,{}),(0,l.jsx)("div",{className:"header",children:(0,l.jsxs)("div",{className:"header-content",children:[(0,l.jsx)("h1",{children:"üìò Staff Dashboard"}),e&&e.name&&(0,l.jsxs)("span",{className:"greeting",children:["üëã Welcome, ",e.name]}),(0,l.jsx)("div",{className:"header-actions",children:(0,l.jsx)("button",{className:"btn btn-danger btn-sm",onClick:s,children:"Logout"})})]})}),(0,l.jsx)("div",{className:"content",children:(0,l.jsxs)("div",{className:"section",children:[(0,l.jsxs)("div",{className:"section-header",children:[(0,l.jsx)("span",{className:"section-icon",children:"üìÖ"}),(0,l.jsx)("h2",{className:"section-title",children:"My Timetable"})]}),(0,l.jsx)("div",{className:"card",children:e&&e.name?t&&0!==Object.keys(t).length?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)("div",{className:"timetable-info",children:[(0,l.jsx)("h3",{children:"üìä Your Weekly Schedule"}),(0,l.jsx)("p",{children:"Your teaching timetable for the week"})]}),(0,l.jsx)(r.default,{timetable:t,staffName:e.name}),(0,l.jsxs)("div",{style:{marginTop:"20px",display:"flex",gap:"10px",justifyContent:"center"},className:"no-print",children:[(0,l.jsx)("button",{className:"btn btn-primary btn-sm",onClick:()=>(0,c.exportToPDF)("staff-timetable-export",`${e.name}_Timetable.pdf`),children:"üìÑ Download PDF"}),(0,l.jsx)("button",{className:"btn btn-primary btn-sm",onClick:()=>window.print(),children:"üñ®Ô∏è Print"})]})]}):(0,l.jsxs)("div",{style:{padding:"60px 20px",textAlign:"center"},children:[(0,l.jsx)("div",{style:{fontSize:"60px",marginBottom:"20px"},children:"üìã"}),(0,l.jsx)("h3",{children:"No Timetable Generated"}),(0,l.jsx)("p",{style:{color:"#64748b"},children:"Contact administrator to generate timetable"})]}):(0,l.jsxs)("div",{style:{padding:"60px 20px",textAlign:"center"},children:[(0,l.jsx)("div",{style:{fontSize:"60px",marginBottom:"20px"},children:"‚ö†Ô∏è"}),(0,l.jsx)("h3",{children:"User Information Missing"}),(0,l.jsx)("p",{style:{color:"#64748b"},children:"Please logout and login again"})]})})]})})]})}}),t("hyYFF",function(t,a){e(t.exports,"default",()=>n);var l=s("ayMG0");function n({timetable:e,staffName:s}){let t=["P1","P2","P3","P4","P5","P6"],a=e[s];return(console.log("StaffTimetableGrid - Staff:",s),console.log("StaffTimetableGrid - Available:",Object.keys(e)),a)?(0,l.jsx)("div",{className:"timetable-container",id:"staff-timetable-export",children:(0,l.jsxs)("table",{className:"timetable",children:[(0,l.jsx)("thead",{children:(0,l.jsxs)("tr",{children:[(0,l.jsx)("th",{className:"day-header",children:"DAY/PERIOD"}),t.map(e=>(0,l.jsx)("th",{className:"period-header",children:e},e))]})}),(0,l.jsx)("tbody",{children:["Monday","Tuesday","Wednesday","Thursday","Friday"].map((e,s)=>(0,l.jsxs)("tr",{children:[(0,l.jsx)("td",{className:"day-cell",children:e}),t.map((e,t)=>{let n=a[s]?.[t],i=!n||"free"===n.type||"FREE"===n.subject;return(0,l.jsx)("td",{className:`period-cell ${i?"free-period":"class-period"}`,children:i?(0,l.jsx)("div",{className:"period-content free",children:(0,l.jsx)("span",{className:"subject-name",children:"FREE"})}):(0,l.jsxs)("div",{className:"period-content",children:[(0,l.jsx)("span",{className:"subject-name",children:n.subject}),(0,l.jsx)("span",{className:"class-name",children:n.class})]})},e)})]},e))})]})}):(0,l.jsxs)("div",{style:{padding:"40px",textAlign:"center"},children:[(0,l.jsx)("div",{style:{fontSize:"48px",marginBottom:"20px"},children:"‚ö†Ô∏è"}),(0,l.jsx)("h3",{children:"No Timetable Found"}),(0,l.jsxs)("p",{style:{color:"#64748b"},children:['No timetable for "',s,'"']}),(0,l.jsxs)("p",{style:{color:"#64748b",fontSize:"14px"},children:["Available: ",Object.keys(e).join(", ")]})]})}s("acw62")});
//# sourceMappingURL=StaffDashboard.5b7de4ba.js.map
